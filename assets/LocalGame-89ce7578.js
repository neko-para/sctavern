import{aE as re,$ as xe,a2 as Se,aF as Ce,aG as Gt,M as Bt,N as Yt,O as At,P as it,R as W,Q as Y,U as Q,aH as he,T as st,c as dt,h as q,aI as Zt,aJ as rt,K as ft,W as bt,L as pt,Y as Ct,aK as Ut,i as pe,u as Xt,r as wt,ap as Ee,F as Vt,f as Qt,l as Rt,s as me,H as Ie,g as ze,aL as Te,a as Oe,q as Be,J as Re,aM as ae,j as Ke,av as ie,aN as se,a0 as We,aO as De,aP as Pe}from"./index-7a1cdafb.js";import{P as ve,O as Ot,B as ge,C as Ze,D as _e,H as te,F as ye,h as Ue,G as be,c as Fe,S as Le,f as Ne,T as Ge,U as je,M as $e,W as Me,e as Je,X as Jt,N as oe,Y as Ve,Q as He}from"./VOverlay-1c0ad127.js";class qe{constructor(H,u,S=!1){this.pos=H,this.wrapper=u,this.observer=S}post(H){this.observer||this.wrapper.game.input({...H})}autoPost(H){this.post({...H,player:this.pos})}getPlayer(){return this.wrapper.game.player[this.pos]}}class le{constructor(){this.notify=[]}emit(H){this.notify.forEach(u=>u(H))}}class Ye{constructor(){this.server=new le,this.server.notify.push(()=>{this.loading||this.autoSave()}),this.game=new re({Pack:["核心"],Seed:1,Role:["白板"],Mutation:[],Pve:!1,PoolPack:xe,ActivePack:Se,ActiveUnit:Ce.map(H=>H)},this.server),this.save={old:[Gt.serialize(this.game)],new:[]},this.loading=!1,this.saveStateChanged=()=>{}}unbind(){this.game.$ignore$Server=new le}bind(){this.game.$ignore$Server=this.server,this.loading=!0,this.server.emit(this.game.getState()),this.loading=!1}init(H){this.unbind(),this.game=new re(H,this.server),this.save={old:[Gt.serialize(this.game)],new:[]},this.saveStateChanged()}load(H){this.save=H,this.loadActive()}loadActive(){this.unbind(),this.game=Gt.deserialize(this.save.old[this.save.old.length-1]),this.bind(),this.saveStateChanged()}undo(){this.save.old.length>1&&(this.save.new.push(this.save.old.pop()),this.loadActive())}redo(){this.save.new.length>0&&(this.save.old.push(this.save.new.pop()),this.loadActive())}getState(){return{canRedo:this.save.new.length>0,canUndo:this.save.old.length>1}}autoSave(){this.save.new=[],this.save.old.push(Gt.serialize(this.game)),this.saveStateChanged()}}const Xe=["_acc"],_t=Bt({__name:"AutoButton",props:{variant:{default:"elevated"},accelerator:{default:null}},setup(K){const H=Yt();return(u,S)=>(Y(),At(ve,{variant:K.variant,size:W(H).isMobile?"x-small":"large"},{default:it(()=>[Q("span",{_acc:K.accelerator?`[${K.accelerator}]`:""},[he(u.$slots,"default")],8,Xe)]),_:3},8,["variant","size"]))}}),Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAMAAAAcqPc3AAABiVBMVEUAAAAAAP8AgIAAVapAQIAzZpkrVYAkSZIgYJ8zZpkuXYsnYokwYI8tWpYrVZUpXI8kW5IsWI0pWpQoWI8nXZMsV5IpWpErW5InWZAnWJMrWpIoWZIpWpIoWpAqW5MpWpEoWZIrXJAqWpEoWpIoWZArW5IqWpAqWZEpW5AoWZIoW5EqWpIqWZApWpEpWpAoW5EoWpIpWpAoW5AqWZIqW5EpWZApW5EoWpAqWZEoWZEoW5ApWpIoWZEoW5EqWpApWZEpWpEoWpEpWpAoWpIqWZEqW5EpWpApW5AqWZIpWpEoWpAoW5EpWpEpW5EqWpEpW5EpW5EpWpIpW5EpWpEpWpEoWpAqWpEpWZIpWZEpWpEqWpApW5EpWpIpWpEpW5EoWpEpWpEpWpEpWpEoWZEpWpEpWpEpWZEpWpIpW5EqWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEoWpEpWZEpWpEpWpEpW5EpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpH///9iquSlAAAAgXRSTlMAAQIDBAUGBwgKCw0QERgZHB0fICEjJSouNDY/REdJSk1OT1JTVFVWV1laW1xdXl9gY2VnaGprbG1yc3d4eXp7fX+DhYaHiIqMkJGSlJWZo6mqtLu8vb6/wsPExcbHyMrMzs/Q0dLT1NbX2Nna3N7f4OPk5ebn6uzu7/Hz9/j5+vygaELFAAAAAWJLR0SCi7P/RAAAATRJREFUGBltwQc3QmEABuC3IknIyEhGqWyykln2zsgudclIiJIV4v3n7ndzTufgeZCn3y7Bf+a5hH9Uf3x91uAvu9/ib0OeNiiFAoHA/qENjXshSTjWAbBQsWuqHzOXb1LRDGCVQnTYTWYM7hAFP4BEoH2G5GNTgpw6I7ni2HlQodZXZh6n7J0/vHVGXz0MsPI3BwoBWHkiMe9Eoh2CNV26y7wDQ9IOoaWr6jXbPkHB5/jImJytECrUR5ODxgyFt8r+ibC6Agobb3sjzJFcV3RCoY7Sc3EWoxA7jw/xUg2hgymdtyRG4Vo/rb1nJ2SaOEeAVua0AYO8KQAwwKQOiJDMkjxVQXvHPqA4xWcp3EXZMmWukPTERBE8L7L1YHprcc4wu7CRulijbBSK2h4NclTdDRC+AT2KgPJ9IL5pAAAAAElFTkSuQmCC",tn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAfCAMAAADZe72GAAABQVBMVEUAAAD//wD//wD/qlW/v0DMzDPV1Svb20no0UbVv0DYxDvhwzzjxjnkyUPZzEDbzj3eyEPfykDbyEDcyj7fx0DgyT7hyzzbzELgxz7byjveyTzgyz7gxz3cyDzdyUDeyz3cyj7eyT/eyj7fyj3fx0DgyD/cyT7fykDgyz/fyD3fyT3eyj7eyj3fyT7fyj3eyT7fyD/dyj/eyT3fyD7dyT3fyT/dyj7dyD3eyT7fyT7eyj7eyT3eyT7eyD/fyT7fyT3eyT7dyT7dyT/eyT7eyT7eyT3eyT7eyj7eyD3eyT7eyT3eyD7eyT7eyT/eyT7eyT7eyT7eyT7fyT3eyT7eyT3dyT7eyj7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7///8gDrLIAAAAaXRSTlMAAQIDBAUGBwsMDRESExQVFxgcHSAhIiMpKy8xMjM0Njo9Pj9AQUJISU9QVlxfYGNmaWxvcXZ4eXt/i5Kco6Wmqq6vsrS3uLq7wcPJztDT1trb3N/g5OXn6Orr7PDx8vP09vj5+vv8/f6Lin9bAAAAAWJLR0RqJWKVDgAAAP9JREFUGBldwQc7QgEAhtG3CGWUSLKbCNmSEdmR2SCblu///wFX6tF1DgxaMfNHMAukMAvWvJgEtYtJSJqnVUh69dEiJCnr4k9Iyq/MUudzAWEpAUMdGLov2iEsbcBExoPhYQHCUgqsHzd2IHcEEakyiqOsBFAogL8kFTdPpJwFx2cJsK1VZdhZ6iWuZ6CnPy7DFpZYRddgL76NP8mQuZO0B+4vRU/VtAhMTluO1VB2wtwYUyU1JMHxWL2tqaE6AstqsQ0cyJA7LMtw2QVcSUp2si4p78HwLp3bICDlvPx4UWUYiOnMSV1W+4A1vdrGr7SigMdNU0J9mAzc888MJt/I0kvypbVLxQAAAABJRU5ErkJggg==",en="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAMAAABrajdMAAAB4FBMVEUAAAD/AP+AAICAQICZM5mAK4CSJJKAIJ+OHI6AM5mLLouAK5WJJ4mAJJKHLZaOK46GKJSMJoyGJJKFLJCFKY+JJ5OEJo6JJJKIK5GMKZSLJ5OHK46KKZGGKJSJJ5CGJpOJLI+GK5KIKo6FKZGIKJOLJ5CIK5KHKpKKKY+HK5CJK5KGKpCJKZKIKJGGJ5OKKpKIKZCKKJKHKI+HKZKHKJKHK5GIKpOKKJCIKJKJK5CIKpGJKJKHKJCHKZCIKJGJKpKIKpCJKZGIKZCHKJGIKpKIKZKIKZGJKJCIKZGJKZKIKJGIKpGIKZGHKZKIKpCJKZGIKZKJKZGIKpCHKZGIKJKHKpGIKpGIKJGJKpKIKpGIKZGHKJCHKpKIKZGJKZGIKJCJKpGIKZGIKZGIKJGHKZGIKZKIKZGIKpGIKZGJKZKIKZGIKJGIKZCIKZGJKJGIKpKIKJCIKpGIKZKIKZGJKpCIKZGJKZKIKZGIKJGIKZCIKZKIKZGIKZGIKZGIKZGIKZGIKZGIKZKIKZGIKpGIKZGIKZGHKZGIKZGIKJGIKZGIKZGIKZGIKJCIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZH///8QAlFtAAAAnnRSTlMAAQIEBQYHCAkKCwwNDhESExQVFxkaGxweHyEkJSYnKCkqKywtLi8xMjU2Nzg6Oz0+P0BERkhJTE1OT1JTV1pbXF1eZmdpa2xvcHJ0dnd6e3x9gYSFhoeLjI2OkZOWl5iZnJ2eoKGjpaeoqautrre4vb6/wcTFxsnKy83O0tbY2drb3N3e3+Dh4+Tm5+nq6+zt7vDx8/T29/n6+/z9/ohh8dsAAAABYktHRJ/otZOdAAABlElEQVQYGW3BiVuLAQDH8d/aotiGvM7S4ajJFcnRtCiRtbByLJIVQ1RDJiTLkavNkWzW2vdvtbee8Xoen48samr1X7aRe25Zudr6boeaHdqQiRsq119O7yS8OaIJnhfvDsjC8Yi5Y3oGFzb/MrTME4qOle9lWJvS2dNV++mSad0oMC4HqZ5J4lI/I3aXpKaGfa2xzOVBloyN5nhS1qI8o1+rM/yR8V480S2pZnaxvQOINm9tuA8kbe6ZgF2lr+ZeAtl2mXqBhzOcbFKo16lxCGpbNHF3lf0tEP9ZEVHdzlvGez6vcH8CgroBWVdl15AUI29A3bw+9S6sq0DP9ZxHO+b95+GcHhDQpcOKYXosdbQUlYFfEcKqkhfTgkfyGU+nYUjHWQjWd6YwXZFUUs9ElGSxBil4sVJ5BxJuZ46zKoqw7IMhU8VwYyf82CW1fiHv+3YtsfnamL2TTh6S1vqn+FqngvXfquVjcWCjpNpKFazRwRIZQPpmtSz29G2R4xp5H4/KqjExnwKmzpTqX+5AOBL0yOo3LpiexziX8A0AAAAASUVORK5CYII=",nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAAAmJLR0QA/4ePzL8AAAImSURBVDjLhZRNSFVREMdPlNGiTYWFm77EKErEVUgLIUWqRYvAIDLRO7+5+jT7AAmqjSDlppIwKItaWFFpaGXLhFYVJD2KzBZKRfaNditFK3RavPte7/kUz2z+cH5zZs6cmeNc2tJierXdz3ZzLd1IN4Zh/KGVFbOC/kquMRmiMQvkaMWidDBDD/IrBYzboJSmoFLEqxnBuD1gg3POudL53MJ4xpqqnJiLdvnZXh5vMUwv+1myhUkmpMo5V71a8ulngFppZATDeC31NDGKYUQ5pC2Y3IgsoczxlVPVyznG2KxJDMg2LSRK4AgwvuB7a7kzAzhOg7+ejlhtHAHv+IQR1UKvRPuSUbktm6SR8XghHQHH/Sx+YhgdVTkcCDN/zlbdy1CS83dHwFBlJo8TYU/IKm0h4hXwCMPo8fKk/j9sDDMVwmMYH70CamNvqW2yX+u0MBmO26ifwXmMCGcxjH4txrgqF6fBcoT3GGVeHkaEcxhGJ0+ZYhcT02A/l3KM3/RiRPRCPJrel7tJF9Qz2obRKYcT6US4lNAPE2rEEUijn8FgylNEuJLQn3mRBDOmu4mmwtoWqknJl9Oh/ub8zfIkCWtmBMPneryby5fJGwyjW9c559w8yvkQ1mSp1mAINxMX/IFpn1eS1P41i2liAtOT7MC0ImwdwxjWuoYF6aOVre3h+fu0C8P4S2tl5qxDK0W8xNjDPYweP3eOz6B0odTrdpp1Z/reP9LLBjo3QdHHAAAAAElFTkSuQmCC",rn={T:Qe,P:tn,Z:en,N:nn},an={class:"raceIconRoot align-center justify-center"},sn=["src"],Ft=Bt({__name:"RaceIcon",props:{race:null},setup(K){return(H,u)=>(Y(),st("div",an,[Q("img",{src:W(rn)[K.race]},null,8,sn)]))}});const on={class:"d-flex"},ln={class:"Label ml-1"},un={class:"Label ml-auto mr-1"},cn={class:"d-flex mt-auto"},ue=Bt({__name:"StoreItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=dt(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.store[H.place])||null}),S=dt(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.selected)||{area:"none",place:-1}}),w={enter:"购买",combine:"三连",stage:"暂存"},s=dt(()=>S.value.area==="store"&&S.value.place===H.place);return(a,r)=>{var o;return Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)}]),color:W(u)&&((o=H.state.player[H.client.pos])!=null&&o.locked)?"cyan":"",onClick:r[0]||(r[0]=f=>K.client.autoPost(W(u)?{msg:"$select",area:"store",place:K.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>{var f;return[W(u)?(Y(),st(ft,{key:0},[Q("div",on,[q(Ft,{race:W(Zt)[W(u).card].race},null,8,["race"]),Q("span",ln,rt(W(u).card),1),Q("span",un,rt(W(Zt)[W(u).card].level),1)]),Q("div",cn,[(Y(!0),st(ft,null,bt(((f=W(u))==null?void 0:f.actions)||[],(_,m)=>(Y(),At(_t,{variant:"text",key:`SA-${m}`,disabled:!_.enable,onClick:h=>K.client.post(_.msg)},{default:it(()=>[pt(rt(w[_.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]}),_:1},8,["color","class"])}}}),dn={class:"d-flex"},fn={class:"Label ml-1"},hn={class:"Label ml-auto mr-1"},pn={class:"d-flex mt-auto"},ce=Bt({__name:"HandItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=dt(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.hand[H.place])||null}),S=dt(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.selected)||{area:"none",place:-1}}),w={enter:"进场",combine:"三连",sell:"出售"},s=dt(()=>S.value.area==="hand"&&S.value.place===H.place);return(a,r)=>(Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)}]),onClick:r[0]||(r[0]=o=>K.client.autoPost(W(u)?{msg:"$select",area:"hand",place:K.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>{var o;return[W(u)?(Y(),st(ft,{key:0},[Q("div",dn,[q(Ft,{race:W(Zt)[W(u).card].race},null,8,["race"]),Q("span",fn,rt(W(u).card),1),Q("span",hn,rt(W(Zt)[W(u).card].level),1)]),Q("div",pn,[(Y(!0),st(ft,null,bt(((o=W(u))==null?void 0:o.actions)||[],(f,_)=>(Y(),At(_t,{variant:"text",key:`HA-${_}`,disabled:!f.enable,onClick:m=>K.client.post(f.msg)},{default:it(()=>[pt(rt(w[f.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]}),_:1},8,["class"]))}}),mn={class:"d-flex flex-column"},Pt=Bt({__name:"AutoSpan",props:{text:null},setup(K){return(H,u)=>(Y(),st("div",mn,[(Y(!0),st(ft,null,bt(K.text,(S,w)=>(Y(),st("div",{class:"d-flex flex-column ASRow",key:`S-${w}`},[(Y(!0),st(ft,null,bt(S.split(`
`),(s,a)=>(Y(),st("span",{class:"Info",key:`SS-${w}-${a}`},rt(s),1))),128))]))),128))]))}});const $t=pe()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ge({origin:"center center",scrollStrategy:"block",transition:{component:Ze},zIndex:2400})},emits:{"update:modelValue":K=>!0},setup(K,H){let{slots:u}=H;const S=Xt(K,"modelValue"),{scopeId:w}=_e(),s=wt();function a(o){var f,_;const m=o.relatedTarget,h=o.target;if(m!==h&&(f=s.value)!=null&&f.contentEl&&(_=s.value)!=null&&_.globalTop&&![document,s.value.contentEl].includes(h)&&!s.value.contentEl.contains(h)){const n=[...s.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(c=>!c.hasAttribute("disabled")&&!c.matches('[tabindex="-1"]'));if(!n.length)return;const p=n[0],i=n[n.length-1];m===p?i.focus():p.focus()}}Ee&&Vt(()=>S.value&&K.retainFocus,o=>{o?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0}),Vt(S,async o=>{if(await me(),o){var f;(f=s.value.contentEl)==null||f.focus({preventScroll:!0})}else{var _;(_=s.value.activatorEl)==null||_.focus({preventScroll:!0})}});const r=dt(()=>Rt({"aria-haspopup":"dialog","aria-expanded":String(S.value)},K.activatorProps));return Qt(()=>{const[o]=ye(K);return q(be,Rt({ref:s,class:["v-dialog",{"v-dialog--fullscreen":K.fullscreen,"v-dialog--scrollable":K.scrollable}]},o,{modelValue:S.value,"onUpdate:modelValue":f=>S.value=f,"aria-role":"dialog","aria-modal":"true",activatorProps:r.value},w),{activator:u.activator,default:function(){for(var f,_=arguments.length,m=new Array(_),h=0;h<_;h++)m[h]=arguments[h];return q(Ue,{root:!0},{default:()=>[(f=u.default)==null?void 0:f.call(u,...m)]})}})}),te({},s)}});const vn=pe()({name:"VTooltip",props:{id:String,text:String,...Ie(ge({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":K=>!0},setup(K,H){let{slots:u}=H;const S=Xt(K,"modelValue"),{scopeId:w}=_e(),s=ze(),a=dt(()=>K.id||`v-tooltip-${s}`),r=wt(),o=dt(()=>K.location.split(" ").length>1?K.location:K.location+" center"),f=dt(()=>K.origin==="auto"||K.origin==="overlap"||K.origin.split(" ").length>1||K.location.split(" ").length>1?K.origin:K.origin+" center"),_=dt(()=>K.transition?K.transition:S.value?"scale-transition":"fade-transition"),m=dt(()=>Rt({"aria-describedby":a.value},K.activatorProps));return Qt(()=>{const[h]=ye(K);return q(be,Rt({ref:r,class:["v-tooltip"],id:a.value},h,{modelValue:S.value,"onUpdate:modelValue":n=>S.value=n,transition:_.value,absolute:!0,location:o.value,origin:f.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:m.value,_disableGlobalStack:!0},w),{activator:u.activator,default:function(){for(var n,p=arguments.length,i=new Array(p),c=0;c<p;c++)i[c]=arguments[c];return((n=u.default)==null?void 0:n.call(u,...i))??K.text}})}),te({},r)}}),gn={class:"d-flex flex-column DescCol overflow-y-auto"},_n={class:"Label"},yn={class:"d-flex"},bn={class:"Label"},wn={class:"Label ml-auto"},kn={class:"d-flex flex-column mt-2 overflow-y-auto"},An={class:"d-flex flex-column UnitCol"},xn={class:"Label"},Sn={class:"d-flex flex-column UpgrCol"},Cn={class:"Label"},En={class:"d-flex"},In={class:"Label"},zn={class:"d-flex"},Tn={class:"Label"},On={class:"Label ml-auto mr-1"},Bn={class:"d-flex flex-column mt-auto"},Rn={key:0,class:"d-flex justify-space-between Info"},Kn={class:"d-flex flex-column"},Wn={class:"d-flex flex-column justify-end"},Dn={class:"d-flex justify-space-between"},Pn={class:"d-flex flex-column"},Zn={class:"Info"},Un={key:1,class:"mt-auto"},Fn={class:"d-flex"},Ln=Bt({__name:"PresentItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=Yt(),S=dt(()=>{var m;return((m=H.state.player[H.client.pos])==null?void 0:m.present[H.place])||null}),w=dt(()=>{var h,n;const m=((n=(h=S.value)==null?void 0:h.card)==null?void 0:n.color)||"normal";return m!=="normal"?m==="gold"?"yellow":m:""}),s=dt(()=>{var m;return((m=H.state.player[H.client.pos])==null?void 0:m.selected)||{area:"none",place:-1}}),a={upgrade:"升级",sell:"出售",insert:"这里",deploy:"这里"},r=wt(!1);function o(m){const h={};return m.forEach(n=>{h[n]=(h[n]||0)+1}),Object.keys(h).map(n=>`${n}	${h[n]}`)}const f=dt(()=>{var m,h;return o(((h=(m=S.value)==null?void 0:m.card)==null?void 0:h.units)||[])}),_=dt(()=>s.value.area==="present"&&s.value.place===H.place);return(m,h)=>(Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start PresCard",{selected:W(_),unselected:!W(_)}]),color:W(w),onClick:h[2]||(h[2]=n=>{var p;return K.client.autoPost((p=W(S))!=null&&p.card?{msg:"$select",area:"present",place:K.place}:{msg:"$select",area:"none",place:-1})})},{default:it(()=>[W(S)?(Y(),st(ft,{key:0},[W(S).card?(Y(),st(ft,{key:0},[q($t,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=n=>r.value=n),class:"w-75"},{default:it(()=>[q(Ot,{class:"d-flex flex-row InfoCard pa-2 justify-space-between"},{default:it(()=>[Q("div",gn,[Q("span",_n,rt(W(S).card.name),1),Q("div",yn,[q(Ft,{race:W(S).card.race},null,8,["race"]),Q("span",bn,rt(W(S).card.level),1),Q("span",wn,rt(W(S).card.value),1)]),Q("div",kn,[q(Pt,{text:W(S).card.descs},null,8,["text"]),q(Pt,{class:"mt-2",text:W(S).card.notes},null,8,["text"])])]),Q("div",An,[Q("span",xn," 单位 "+rt(W(S).card.units.length)+" / "+rt(W(S).card.config.MaxUnit),1),q(Pt,{class:"overflow-y-auto",text:W(f)},null,8,["text"])]),Q("div",Sn,[Q("span",Cn," 升级 "+rt(W(S).card.upgrades.length)+" / "+rt(W(S).card.config.MaxUpgrade),1),q(Pt,{text:W(S).card.upgrades},null,8,["text"])])]),_:1})]),_:1},8,["modelValue"]),Q("div",En,[q(_t,{variant:"text",onClick:h[1]||(h[1]=n=>r.value=!0)},{default:it(()=>[pt(" 信息 ")]),_:1})]),Q("span",In,rt(W(S).card.name),1),Q("div",zn,[q(Ft,{race:W(S).card.race},null,8,["race"]),Q("span",Tn,rt(W(S).card.level),1),Q("span",On,rt(W(S).card.value),1)]),q(Pt,{text:W(S).card.notes},null,8,["text"]),Q("div",Bn,[W(u).isMobile?Ct("",!0):(Y(),st("div",Rn,[Q("div",Kn,[(Y(!0),st(ft,null,bt(W(f).slice(0,5),(n,p)=>(Y(),st("span",{key:`Unit-${p}`},rt(n),1))),128))]),Q("div",Wn,[(Y(!0),st(ft,null,bt(W(S).card.upgrades,(n,p)=>(Y(),st("span",{key:`Upgrade-${p}`},rt(n),1))),128))])])),Q("div",Dn,[q(vn,{location:"top"},{activator:it(({props:n})=>[Q("span",Rt({class:"Info"},n),rt(W(S).card.units.length)+" / "+rt(W(S).card.config.MaxUnit),17)]),default:it(()=>[Q("div",Pn,[(Y(!0),st(ft,null,bt(W(f),(n,p)=>(Y(),st("span",{class:"Info",key:`UnitTip-${p}`},rt(n),1))),128))])]),_:1}),Q("span",Zn,rt(W(S).card.upgrades.length)+" / "+rt(W(S).card.config.MaxUpgrade),1)])])],64)):(Y(),st("div",Un)),Q("div",Fn,[(Y(!0),st(ft,null,bt(W(S).actions||[],(n,p)=>(Y(),At(_t,{variant:"text",key:`PA-${p}`,disabled:!n.enable,onClick:i=>K.client.post(n.msg)},{default:it(()=>[pt(rt(a[n.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]),_:1},8,["color","class"]))}});const Nn={key:0,class:"d-flex"},Gn={class:"Label ml-1"},jn={class:"Label ml-auto mr-1"},$n={key:1,class:"Label"},Mn={key:2,class:"Label"},Jn={key:3,class:"Label"},de=Bt({__name:"DiscoverItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=dt(()=>{var S,w;return((w=(S=H.state.player[H.client.pos])==null?void 0:S.discover)==null?void 0:w.item[H.place])||null});return(S,w)=>(Y(),At(Ot,{class:"d-flex flex-column align-self-start KeyCard",onClick:w[0]||(w[0]=s=>K.client.autoPost({msg:"$choice",category:"discover",place:K.place}))},{default:it(()=>[W(u)?(Y(),st(ft,{key:0},[W(u).type==="card"?(Y(),st("div",Nn,[q(Ft,{race:W(u).card.race},null,8,["race"]),Q("span",Gn,rt(W(u).card.name),1),Q("span",jn,rt(W(u).card.level),1)])):W(u).type==="upgrade"?(Y(),st("span",$n,rt(W(u).upgrade.name),1)):W(u).type==="prophesy"?(Y(),st("span",Mn,rt(W(u).prophesy.name),1)):(Y(),st("span",Jn,rt(W(u).str),1))],64)):Ct("",!0)]),_:1}))}}),Vn={class:"d-flex flex-column justify-center"},Hn={class:"d-flex"},qn={class:"ml-auto"},Yn=Q("hr",null,null,-1),Xn={key:0,class:"d-flex"},Qn={class:"d-flex flex-column"},tr={class:"Info"},er={class:"Info"},nr={class:"HandContainer"},rr={class:"ml-1"},ar={class:"d-flex flex-column"},ir={class:"StoreContainer"},sr={class:"mt-1"},or={key:0,class:"mt-1"},lr={key:0,class:"d-flex mt-1 DiscoverContainer"},ur={class:"mt-1"},cr={key:0,class:"mt-1 mb-1"},dr={class:"d-flex mt-auto mb-1"},fr={class:"PresentContainer"},hr=Bt({__name:"GameInstance",props:{state:null,client:null},setup(K){const H=K,u=dt(()=>H.state.player[H.client.pos]),S=dt(()=>{var a;const s=(a=u.value)==null?void 0:a.role;return{upgrade:"升级",refresh:"刷新",lock:"锁定",unlock:"解锁",finish:"结束",ability:s?s.ability+(s.progress?s.progress.max===-1?` ${s.progress.cur}`:` ${s.progress.cur} / ${s.progress.max}`:""):"魂姿"}}),w=wt(!0);return(s,a)=>{var r,o,f,_,m,h,n,p,i,c,l,y,A,k,v,C,z,U,B,F,X;return Y(),st("div",Vn,[Q("div",Hn,[q(Ot,{class:"ControlPanel d-flex flex-column"},{default:it(()=>[Q("div",qn,[q(_t,{variant:"flat",onClick:a[0]||(a[0]=b=>w.value=!w.value)},{default:it(()=>[pt(" 菜单 ")]),_:1})]),w.value?(Y(),st(ft,{key:0},[Yn,w.value?(Y(),st("div",Xn,[he(s.$slots,"default")])):Ct("",!0)],64)):Ct("",!0)]),_:3}),Q("div",Qn,[Q("span",tr," 回合 "+rt(K.state.round)+" 等级 "+rt((r=W(u))==null?void 0:r.level)+" 生命 "+rt((o=W(u))==null?void 0:o.life)+" 价值 "+rt((f=W(u))==null?void 0:f.present.map(b=>{var T;return((T=b.card)==null?void 0:T.value)||0}).reduce((b,T)=>b+T,0)),1),Q("span",er," 升级 "+rt((_=W(u))==null?void 0:_.upgrade_cost)+" 晶矿 "+rt((m=W(u))==null?void 0:m.mineral)+" / "+rt((h=W(u))==null?void 0:h.mineral_max)+" 瓦斯 "+rt((n=W(u))==null?void 0:n.gas)+" / "+rt((p=W(u))==null?void 0:p.gas_max),1),Q("div",nr,[Q("div",null,[(Y(),st(ft,null,bt(3,b=>q(ce,{class:"mt-1",key:`Hand${b-1}`,state:K.state,client:K.client,place:b-1},null,8,["state","client","place"])),64))]),Q("div",rr,[(Y(),st(ft,null,bt(3,b=>q(ce,{class:"mt-1",key:`Hand${b+2}`,state:K.state,client:K.client,place:b+2},null,8,["state","client","place"])),64))])])]),Q("div",ar,[Q("div",ir,[Q("div",sr,[(Y(!0),st(ft,null,bt(((i=W(u))==null?void 0:i.store.slice(0,3))||[],(b,T)=>(Y(),At(ue,{class:"ml-2",key:`Store${T}`,state:K.state,client:K.client,place:T},null,8,["state","client","place"]))),128))]),(((c=W(u))==null?void 0:c.store.length)||0)>3?(Y(),st("div",or,[(Y(!0),st(ft,null,bt(((l=W(u))==null?void 0:l.store.slice(3))||[],(b,T)=>(Y(),At(ue,{class:"ml-2",key:`Store${T+3}`,state:K.state,client:K.client,place:T+3},null,8,["state","client","place"]))),128))])):Ct("",!0)]),((y=W(u))==null?void 0:y.status)==="discover"&&W(u).discover?(Y(),st("div",lr,[Q("div",ur,[(Y(!0),st(ft,null,bt(((k=(A=W(u))==null?void 0:A.discover)==null?void 0:k.item.slice(0,3))||[],(b,T)=>(Y(),At(de,{class:"ml-2",key:`Discover${T}`,state:K.state,client:K.client,place:T},null,8,["state","client","place"]))),128))]),((C=(v=W(u))==null?void 0:v.discover)==null?void 0:C.item.length)>3?(Y(),st("div",cr,[(Y(!0),st(ft,null,bt(((U=(z=W(u))==null?void 0:z.discover)==null?void 0:U.item.slice(3))||[],(b,T)=>(Y(),At(de,{class:"ml-2",key:`Discover${T+3}`,state:K.state,client:K.client,place:T+3},null,8,["state","client","place"]))),128)),(F=(B=W(u))==null?void 0:B.discover)!=null&&F.extra?(Y(),At(_t,{key:0,class:"ml-2",onClick:a[1]||(a[1]=b=>K.client.autoPost({msg:"$choice",category:"discover",place:-1}))},{default:it(()=>{var b,T;return[pt(rt((T=(b=W(u))==null?void 0:b.discover)==null?void 0:T.extra),1)]}),_:1})):Ct("",!0)])):Ct("",!0)])):Ct("",!0),Q("div",dr,[(Y(!0),st(ft,null,bt(((X=W(u))==null?void 0:X.action)||[],(b,T)=>{var e;return Y(),At(_t,{class:"ml-2",variant:"elevated",key:`GA-${T}`,disabled:!b.enable,onClick:P=>K.client.post(b.msg),color:b.msg.msg==="$ability"&&((e=W(u))!=null&&e.role.enhance)?"red":""},{default:it(()=>[pt(rt(W(S)[b.action]),1)]),_:2},1032,["disabled","onClick","color"])}),128))])])]),Q("div",fr,[(Y(),st(ft,null,bt(7,b=>q(Ln,{class:"mt-1",key:`Present${b-1}`,state:K.state,client:K.client,place:b-1},null,8,["state","client","place"])),64))])])}}});var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(K){throw new Error('Could not dynamically require "'+K+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ht={},pr={get exports(){return Ht},set exports(K){Ht=K}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(K,H){(function(u){K.exports=u()})(function(){return function u(S,w,s){function a(f,_){if(!w[f]){if(!S[f]){var m=typeof jt=="function"&&jt;if(!_&&m)return m(f,!0);if(r)return r(f,!0);var h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h}var n=w[f]={exports:{}};S[f][0].call(n.exports,function(p){var i=S[f][1][p];return a(i||p)},n,n.exports,u,S,w,s)}return w[f].exports}for(var r=typeof jt=="function"&&jt,o=0;o<s.length;o++)a(s[o]);return a}({1:[function(u,S,w){var s=u("./utils"),a=u("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";w.encode=function(o){for(var f,_,m,h,n,p,i,c=[],l=0,y=o.length,A=y,k=s.getTypeOf(o)!=="string";l<o.length;)A=y-l,m=k?(f=o[l++],_=l<y?o[l++]:0,l<y?o[l++]:0):(f=o.charCodeAt(l++),_=l<y?o.charCodeAt(l++):0,l<y?o.charCodeAt(l++):0),h=f>>2,n=(3&f)<<4|_>>4,p=1<A?(15&_)<<2|m>>6:64,i=2<A?63&m:64,c.push(r.charAt(h)+r.charAt(n)+r.charAt(p)+r.charAt(i));return c.join("")},w.decode=function(o){var f,_,m,h,n,p,i=0,c=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var y,A=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===r.charAt(64)&&A--,o.charAt(o.length-2)===r.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|A):new Array(0|A);i<o.length;)f=r.indexOf(o.charAt(i++))<<2|(h=r.indexOf(o.charAt(i++)))>>4,_=(15&h)<<4|(n=r.indexOf(o.charAt(i++)))>>2,m=(3&n)<<6|(p=r.indexOf(o.charAt(i++))),y[c++]=f,n!==64&&(y[c++]=_),p!==64&&(y[c++]=m);return y}},{"./support":30,"./utils":32}],2:[function(u,S,w){var s=u("./external"),a=u("./stream/DataWorker"),r=u("./stream/Crc32Probe"),o=u("./stream/DataLengthProbe");function f(_,m,h,n,p){this.compressedSize=_,this.uncompressedSize=m,this.crc32=h,this.compression=n,this.compressedContent=p}f.prototype={getContentWorker:function(){var _=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),m=this;return _.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(_,m,h){return _.pipe(new r).pipe(new o("uncompressedSize")).pipe(m.compressWorker(h)).pipe(new o("compressedSize")).withStreamInfo("compression",m)},S.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,S,w){var s=u("./stream/GenericWorker");w.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},w.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,S,w){var s=u("./utils"),a=function(){for(var r,o=[],f=0;f<256;f++){r=f;for(var _=0;_<8;_++)r=1&r?3988292384^r>>>1:r>>>1;o[f]=r}return o}();S.exports=function(r,o){return r!==void 0&&r.length?s.getTypeOf(r)!=="string"?function(f,_,m,h){var n=a,p=h+m;f^=-1;for(var i=h;i<p;i++)f=f>>>8^n[255&(f^_[i])];return-1^f}(0|o,r,r.length,0):function(f,_,m,h){var n=a,p=h+m;f^=-1;for(var i=h;i<p;i++)f=f>>>8^n[255&(f^_.charCodeAt(i))];return-1^f}(0|o,r,r.length,0):0}},{"./utils":32}],5:[function(u,S,w){w.base64=!1,w.binary=!1,w.dir=!1,w.createFolders=!0,w.date=null,w.compression=null,w.compressionOptions=null,w.comment=null,w.unixPermissions=null,w.dosPermissions=null},{}],6:[function(u,S,w){var s=null;s=typeof Promise<"u"?Promise:u("lie"),S.exports={Promise:s}},{lie:37}],7:[function(u,S,w){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=u("pako"),r=u("./utils"),o=u("./stream/GenericWorker"),f=s?"uint8array":"array";function _(m,h){o.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=h,this.meta={}}w.magic="\b\0",r.inherits(_,o),_.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(f,m.data),!1)},_.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(h){m.push({data:h,meta:m.meta})}},w.compressWorker=function(m){return new _("Deflate",m)},w.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,S,w){function s(n,p){var i,c="";for(i=0;i<p;i++)c+=String.fromCharCode(255&n),n>>>=8;return c}function a(n,p,i,c,l,y){var A,k,v=n.file,C=n.compression,z=y!==f.utf8encode,U=r.transformTo("string",y(v.name)),B=r.transformTo("string",f.utf8encode(v.name)),F=v.comment,X=r.transformTo("string",y(F)),b=r.transformTo("string",f.utf8encode(F)),T=B.length!==v.name.length,e=b.length!==F.length,P="",at="",N="",ot=v.dir,G=v.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};p&&!i||(nt.crc32=n.crc32,nt.compressedSize=n.compressedSize,nt.uncompressedSize=n.uncompressedSize);var O=0;p&&(O|=8),z||!T&&!e||(O|=2048);var E=0,tt=0;ot&&(E|=16),l==="UNIX"?(tt=798,E|=function(M,mt){var kt=M;return M||(kt=mt?16893:33204),(65535&kt)<<16}(v.unixPermissions,ot)):(tt=20,E|=function(M){return 63&(M||0)}(v.dosPermissions)),A=G.getUTCHours(),A<<=6,A|=G.getUTCMinutes(),A<<=5,A|=G.getUTCSeconds()/2,k=G.getUTCFullYear()-1980,k<<=4,k|=G.getUTCMonth()+1,k<<=5,k|=G.getUTCDate(),T&&(at=s(1,1)+s(_(U),4)+B,P+="up"+s(at.length,2)+at),e&&(N=s(1,1)+s(_(X),4)+b,P+="uc"+s(N.length,2)+N);var J="";return J+=`
\0`,J+=s(O,2),J+=C.magic,J+=s(A,2),J+=s(k,2),J+=s(nt.crc32,4),J+=s(nt.compressedSize,4),J+=s(nt.uncompressedSize,4),J+=s(U.length,2),J+=s(P.length,2),{fileRecord:m.LOCAL_FILE_HEADER+J+U+P,dirRecord:m.CENTRAL_FILE_HEADER+s(tt,2)+J+s(X.length,2)+"\0\0\0\0"+s(E,4)+s(c,4)+U+P+X}}var r=u("../utils"),o=u("../stream/GenericWorker"),f=u("../utf8"),_=u("../crc32"),m=u("../signature");function h(n,p,i,c){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=i,this.encodeFileName=c,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(h,o),h.prototype.push=function(n){var p=n.meta.percent||0,i=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,o.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:i?(p+100*(i-c-1))/i:100}}))},h.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var p=this.streamFiles&&!n.file.dir;if(p){var i=a(n,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(n){this.accumulate=!1;var p=this.streamFiles&&!n.file.dir,i=a(n,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),p)this.push({data:function(c){return m.DATA_DESCRIPTOR+s(c.crc32,4)+s(c.compressedSize,4)+s(c.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var n=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var i=this.bytesWritten-n,c=function(l,y,A,k,v){var C=r.transformTo("string",v(k));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(l,2)+s(l,2)+s(y,4)+s(A,4)+s(C.length,2)+C}(this.dirRecords.length,i,n,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(n){this._sources.push(n);var p=this;return n.on("data",function(i){p.processChunk(i)}),n.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),n.on("error",function(i){p.error(i)}),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(n){var p=this._sources;if(!o.prototype.error.call(this,n))return!1;for(var i=0;i<p.length;i++)try{p[i].error(n)}catch{}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var n=this._sources,p=0;p<n.length;p++)n[p].lock()},S.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,S,w){var s=u("../compressions"),a=u("./ZipFileWorker");w.generateWorker=function(r,o,f){var _=new a(o.streamFiles,f,o.platform,o.encodeFileName),m=0;try{r.forEach(function(h,n){m++;var p=function(y,A){var k=y||A,v=s[k];if(!v)throw new Error(k+" is not a valid compression method !");return v}(n.options.compression,o.compression),i=n.options.compressionOptions||o.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(p,i).withStreamInfo("file",{name:h,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(_)}),_.entriesCount=m}catch(h){_.error(h)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,S,w){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(s.prototype=u("./object")).loadAsync=u("./load"),s.support=u("./support"),s.defaults=u("./defaults"),s.version="3.10.1",s.loadAsync=function(a,r){return new s().loadAsync(a,r)},s.external=u("./external"),S.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,S,w){var s=u("./utils"),a=u("./external"),r=u("./utf8"),o=u("./zipEntries"),f=u("./stream/Crc32Probe"),_=u("./nodejsUtils");function m(h){return new a.Promise(function(n,p){var i=h.decompressed.getContentWorker().pipe(new f);i.on("error",function(c){p(c)}).on("end",function(){i.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}S.exports=function(h,n){var p=this;return n=s.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),_.isNode&&_.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,n.optimizedBinaryString,n.base64).then(function(i){var c=new o(n);return c.load(i),c}).then(function(i){var c=[a.Promise.resolve(i)],l=i.files;if(n.checkCRC32)for(var y=0;y<l.length;y++)c.push(m(l[y]));return a.Promise.all(c)}).then(function(i){for(var c=i.shift(),l=c.files,y=0;y<l.length;y++){var A=l[y],k=A.fileNameStr,v=s.resolve(A.fileNameStr);p.file(v,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:n.createFolders}),A.dir||(p.file(v).unsafeOriginalName=k)}return c.zipComment.length&&(p.comment=c.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,S,w){var s=u("../utils"),a=u("../stream/GenericWorker");function r(o,f){a.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(r,a),r.prototype._bindStream=function(o){var f=this;(this._stream=o).pause(),o.on("data",function(_){f.push({data:_,meta:{percent:0}})}).on("error",function(_){f.isPaused?this.generatedError=_:f.error(_)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,S,w){var s=u("readable-stream").Readable;function a(r,o,f){s.call(this,o),this._helper=r;var _=this;r.on("data",function(m,h){_.push(m)||_._helper.pause(),f&&f(h)}).on("error",function(m){_.emit("error",m)}).on("end",function(){_.push(null)})}u("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},S.exports=a},{"../utils":32,"readable-stream":16}],14:[function(u,S,w){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(u,S,w){function s(v,C,z){var U,B=r.getTypeOf(C),F=r.extend(z||{},_);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(v=l(v)),F.createFolders&&(U=c(v))&&y.call(this,U,!0);var X=B==="string"&&F.binary===!1&&F.base64===!1;z&&z.binary!==void 0||(F.binary=!X),(C instanceof m&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",B="string");var b=null;b=C instanceof m||C instanceof o?C:p.isNode&&p.isStream(C)?new i(v,C):r.prepareContent(v,C,F.binary,F.optimizedBinaryString,F.base64);var T=new h(v,b,F);this.files[v]=T}var a=u("./utf8"),r=u("./utils"),o=u("./stream/GenericWorker"),f=u("./stream/StreamHelper"),_=u("./defaults"),m=u("./compressedObject"),h=u("./zipObject"),n=u("./generate"),p=u("./nodejsUtils"),i=u("./nodejs/NodejsStreamInputAdapter"),c=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var C=v.lastIndexOf("/");return 0<C?v.substring(0,C):""},l=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},y=function(v,C){return C=C!==void 0?C:_.createFolders,v=l(v),this.files[v]||s.call(this,v,null,{dir:!0,createFolders:C}),this.files[v]};function A(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var C,z,U;for(C in this.files)U=this.files[C],(z=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&v(z,U)},filter:function(v){var C=[];return this.forEach(function(z,U){v(z,U)&&C.push(U)}),C},file:function(v,C,z){if(arguments.length!==1)return v=this.root+v,s.call(this,v,C,z),this;if(A(v)){var U=v;return this.filter(function(F,X){return!X.dir&&U.test(F)})}var B=this.files[this.root+v];return B&&!B.dir?B:null},folder:function(v){if(!v)return this;if(A(v))return this.filter(function(B,F){return F.dir&&v.test(B)});var C=this.root+v,z=y.call(this,C),U=this.clone();return U.root=z.name,U},remove:function(v){v=this.root+v;var C=this.files[v];if(C||(v.slice(-1)!=="/"&&(v+="/"),C=this.files[v]),C&&!C.dir)delete this.files[v];else for(var z=this.filter(function(B,F){return F.name.slice(0,v.length)===v}),U=0;U<z.length;U++)delete this.files[z[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var C,z={};try{if((z=r.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");r.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var U=z.comment||this.comment||"";C=n.generateWorker(this,z,U)}catch(B){(C=new o("error")).error(B)}return new f(C,z.type||"string",z.mimeType)},generateAsync:function(v,C){return this.generateInternalStream(v).accumulate(C)},generateNodeStream:function(v,C){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(C)}};S.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,S,w){S.exports=u("stream")},{stream:void 0}],17:[function(u,S,w){var s=u("./DataReader");function a(r){s.call(this,r);for(var o=0;o<this.data.length;o++)r[o]=255&r[o]}u("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var o=r.charCodeAt(0),f=r.charCodeAt(1),_=r.charCodeAt(2),m=r.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===o&&this.data[h+1]===f&&this.data[h+2]===_&&this.data[h+3]===m)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var o=r.charCodeAt(0),f=r.charCodeAt(1),_=r.charCodeAt(2),m=r.charCodeAt(3),h=this.readData(4);return o===h[0]&&f===h[1]&&_===h[2]&&m===h[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./DataReader":18}],18:[function(u,S,w){var s=u("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var o,f=0;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)f=(f<<8)+this.byteAt(o);return this.index+=r,f},readString:function(r){return s.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},S.exports=a},{"../utils":32}],19:[function(u,S,w){var s=u("./Uint8ArrayReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,S,w){var s=u("./DataReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./DataReader":18}],21:[function(u,S,w){var s=u("./ArrayReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(u,S,w){var s=u("../utils"),a=u("../support"),r=u("./ArrayReader"),o=u("./StringReader"),f=u("./NodeBufferReader"),_=u("./Uint8ArrayReader");S.exports=function(m){var h=s.getTypeOf(m);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new f(m):a.uint8array?new _(s.transformTo("uint8array",m)):new r(s.transformTo("array",m)):new o(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,S,w){w.LOCAL_FILE_HEADER="PK",w.CENTRAL_FILE_HEADER="PK",w.CENTRAL_DIRECTORY_END="PK",w.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",w.ZIP64_CENTRAL_DIRECTORY_END="PK",w.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,S,w){var s=u("./GenericWorker"),a=u("../utils");function r(o){s.call(this,"ConvertWorker to "+o),this.destType=o}a.inherits(r,s),r.prototype.processChunk=function(o){this.push({data:a.transformTo(this.destType,o.data),meta:o.meta})},S.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(u,S,w){var s=u("./GenericWorker"),a=u("../crc32");function r(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(r,s),r.prototype.processChunk=function(o){this.streamInfo.crc32=a(o.data,this.streamInfo.crc32||0),this.push(o)},S.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,S,w){var s=u("../utils"),a=u("./GenericWorker");function r(o){a.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}s.inherits(r,a),r.prototype.processChunk=function(o){if(o){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+o.data.length}a.prototype.processChunk.call(this,o)},S.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(u,S,w){var s=u("../utils"),a=u("./GenericWorker");function r(o){a.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(_){f.dataIsReady=!0,f.data=_,f.max=_&&_.length||0,f.type=s.getTypeOf(_),f.isPaused||f._tickAndRepeat()},function(_){f.error(_)})}s.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,f);break;case"uint8array":o=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":o=this.data.slice(this.index,f)}return this.index=f,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(u,S,w){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var o=0;o<this._listeners[a].length;o++)this._listeners[a][o].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(o){r.processChunk(o)}),a.on("end",function(){r.end()}),a.on("error",function(o){r.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},S.exports=s},{}],29:[function(u,S,w){var s=u("../utils"),a=u("./ConvertWorker"),r=u("./GenericWorker"),o=u("../base64"),f=u("../support"),_=u("../external"),m=null;if(f.nodestream)try{m=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,i){return new _.Promise(function(c,l){var y=[],A=p._internalType,k=p._outputType,v=p._mimeType;p.on("data",function(C,z){y.push(C),i&&i(z)}).on("error",function(C){y=[],l(C)}).on("end",function(){try{var C=function(z,U,B){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",U),B);case"base64":return o.encode(U);default:return s.transformTo(z,U)}}(k,function(z,U){var B,F=0,X=null,b=0;for(B=0;B<U.length;B++)b+=U[B].length;switch(z){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(X=new Uint8Array(b),B=0;B<U.length;B++)X.set(U[B],F),F+=U[B].length;return X;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+z+"'")}}(A,y),v);c(C)}catch(z){l(z)}y=[]}).resume()})}function n(p,i,c){var l=i;switch(i){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=i,this._mimeType=c,s.checkSupport(l),this._worker=p.pipe(new a(l)),p.lock()}catch(y){this._worker=new r("error"),this._worker.error(y)}}n.prototype={accumulate:function(p){return h(this,p)},on:function(p,i){var c=this;return p==="data"?this._worker.on(p,function(l){i.call(c,l.data,l.meta)}):this._worker.on(p,function(){s.delay(i,arguments,c)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},p)}},S.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,S,w){if(w.base64=!0,w.array=!0,w.string=!0,w.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",w.nodebuffer=typeof Buffer<"u",w.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")w.blob=!1;else{var s=new ArrayBuffer(0);try{w.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),w.blob=a.getBlob("application/zip").size===0}catch{w.blob=!1}}}try{w.nodestream=!!u("readable-stream").Readable}catch{w.nodestream=!1}},{"readable-stream":16}],31:[function(u,S,w){for(var s=u("./utils"),a=u("./support"),r=u("./nodejsUtils"),o=u("./stream/GenericWorker"),f=new Array(256),_=0;_<256;_++)f[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;f[254]=f[254]=1;function m(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}w.utf8encode=function(n){return a.nodebuffer?r.newBufferFrom(n,"utf-8"):function(p){var i,c,l,y,A,k=p.length,v=0;for(y=0;y<k;y++)(64512&(c=p.charCodeAt(y)))==55296&&y+1<k&&(64512&(l=p.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(l-56320),y++),v+=c<128?1:c<2048?2:c<65536?3:4;for(i=a.uint8array?new Uint8Array(v):new Array(v),y=A=0;A<v;y++)(64512&(c=p.charCodeAt(y)))==55296&&y+1<k&&(64512&(l=p.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(l-56320),y++),c<128?i[A++]=c:(c<2048?i[A++]=192|c>>>6:(c<65536?i[A++]=224|c>>>12:(i[A++]=240|c>>>18,i[A++]=128|c>>>12&63),i[A++]=128|c>>>6&63),i[A++]=128|63&c);return i}(n)},w.utf8decode=function(n){return a.nodebuffer?s.transformTo("nodebuffer",n).toString("utf-8"):function(p){var i,c,l,y,A=p.length,k=new Array(2*A);for(i=c=0;i<A;)if((l=p[i++])<128)k[c++]=l;else if(4<(y=f[l]))k[c++]=65533,i+=y-1;else{for(l&=y===2?31:y===3?15:7;1<y&&i<A;)l=l<<6|63&p[i++],y--;1<y?k[c++]=65533:l<65536?k[c++]=l:(l-=65536,k[c++]=55296|l>>10&1023,k[c++]=56320|1023&l)}return k.length!==c&&(k.subarray?k=k.subarray(0,c):k.length=c),s.applyFromCharCode(k)}(n=s.transformTo(a.uint8array?"uint8array":"array",n))},s.inherits(m,o),m.prototype.processChunk=function(n){var p=s.transformTo(a.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var i=p;(p=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),p.set(i,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var c=function(y,A){var k;for((A=A||y.length)>y.length&&(A=y.length),k=A-1;0<=k&&(192&y[k])==128;)k--;return k<0||k===0?A:k+f[y[k]]>A?k:A}(p),l=p;c!==p.length&&(a.uint8array?(l=p.subarray(0,c),this.leftOver=p.subarray(c,p.length)):(l=p.slice(0,c),this.leftOver=p.slice(c,p.length))),this.push({data:w.utf8decode(l),meta:n.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:w.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},w.Utf8DecodeWorker=m,s.inherits(h,o),h.prototype.processChunk=function(n){this.push({data:w.utf8encode(n.data),meta:n.meta})},w.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,S,w){var s=u("./support"),a=u("./base64"),r=u("./nodejsUtils"),o=u("./external");function f(i){return i}function _(i,c){for(var l=0;l<i.length;++l)c[l]=255&i.charCodeAt(l);return c}u("setimmediate"),w.newBlob=function(i,c){w.checkSupport("blob");try{return new Blob([i],{type:c})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(i),l.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(i,c,l){var y=[],A=0,k=i.length;if(k<=l)return String.fromCharCode.apply(null,i);for(;A<k;)c==="array"||c==="nodebuffer"?y.push(String.fromCharCode.apply(null,i.slice(A,Math.min(A+l,k)))):y.push(String.fromCharCode.apply(null,i.subarray(A,Math.min(A+l,k)))),A+=l;return y.join("")},stringifyByChar:function(i){for(var c="",l=0;l<i.length;l++)c+=String.fromCharCode(i[l]);return c},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function h(i){var c=65536,l=w.getTypeOf(i),y=!0;if(l==="uint8array"?y=m.applyCanBeUsed.uint8array:l==="nodebuffer"&&(y=m.applyCanBeUsed.nodebuffer),y)for(;1<c;)try{return m.stringifyByChunk(i,l,c)}catch{c=Math.floor(c/2)}return m.stringifyByChar(i)}function n(i,c){for(var l=0;l<i.length;l++)c[l]=i[l];return c}w.applyFromCharCode=h;var p={};p.string={string:f,array:function(i){return _(i,new Array(i.length))},arraybuffer:function(i){return p.string.uint8array(i).buffer},uint8array:function(i){return _(i,new Uint8Array(i.length))},nodebuffer:function(i){return _(i,r.allocBuffer(i.length))}},p.array={string:h,array:f,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(i)}},p.arraybuffer={string:function(i){return h(new Uint8Array(i))},array:function(i){return n(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:f,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(new Uint8Array(i))}},p.uint8array={string:h,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:f,nodebuffer:function(i){return r.newBufferFrom(i)}},p.nodebuffer={string:h,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return p.nodebuffer.uint8array(i).buffer},uint8array:function(i){return n(i,new Uint8Array(i.length))},nodebuffer:f},w.transformTo=function(i,c){if(c=c||"",!i)return c;w.checkSupport(i);var l=w.getTypeOf(c);return p[l][i](c)},w.resolve=function(i){for(var c=i.split("/"),l=[],y=0;y<c.length;y++){var A=c[y];A==="."||A===""&&y!==0&&y!==c.length-1||(A===".."?l.pop():l.push(A))}return l.join("/")},w.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":s.nodebuffer&&r.isBuffer(i)?"nodebuffer":s.uint8array&&i instanceof Uint8Array?"uint8array":s.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},w.checkSupport=function(i){if(!s[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},w.MAX_VALUE_16BITS=65535,w.MAX_VALUE_32BITS=-1,w.pretty=function(i){var c,l,y="";for(l=0;l<(i||"").length;l++)y+="\\x"+((c=i.charCodeAt(l))<16?"0":"")+c.toString(16).toUpperCase();return y},w.delay=function(i,c,l){setImmediate(function(){i.apply(l||null,c||[])})},w.inherits=function(i,c){function l(){}l.prototype=c.prototype,i.prototype=new l},w.extend=function(){var i,c,l={};for(i=0;i<arguments.length;i++)for(c in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],c)&&l[c]===void 0&&(l[c]=arguments[i][c]);return l},w.prepareContent=function(i,c,l,y,A){return o.Promise.resolve(c).then(function(k){return s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new o.Promise(function(v,C){var z=new FileReader;z.onload=function(U){v(U.target.result)},z.onerror=function(U){C(U.target.error)},z.readAsArrayBuffer(k)}):k}).then(function(k){var v=w.getTypeOf(k);return v?(v==="arraybuffer"?k=w.transformTo("uint8array",k):v==="string"&&(A?k=a.decode(k):l&&y!==!0&&(k=function(C){return _(C,s.uint8array?new Uint8Array(C.length):new Array(C.length))}(k))),k):o.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,S,w){var s=u("./reader/readerFor"),a=u("./utils"),r=u("./signature"),o=u("./zipEntry"),f=u("./support");function _(m){this.files=[],this.loadOptions=m}_.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(m)+")")}},isSignature:function(m,h){var n=this.reader.index;this.reader.setIndex(m);var p=this.reader.readString(4)===h;return this.reader.setIndex(n),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),h=f.uint8array?"uint8array":"array",n=a.transformTo(h,m);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,h,n,p=this.zip64EndOfCentralSize-44;0<p;)m=this.reader.readInt(2),h=this.reader.readInt(4),n=this.reader.readData(h),this.zip64ExtensibleData[m]={id:m,length:h,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,h;for(m=0;m<this.files.length;m++)h=this.files[m],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(m=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var h=m;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var p=h-n;if(0<p)this.isSignature(h,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,S,w){var s=u("./reader/readerFor"),a=u("./utils"),r=u("./compressedObject"),o=u("./crc32"),f=u("./utf8"),_=u("./compressions"),m=u("./support");function h(n,p){this.options=n,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var p,i;if(n.skip(22),this.fileNameLength=n.readInt(2),i=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(c){for(var l in _)if(Object.prototype.hasOwnProperty.call(_,l)&&_[l].magic===c)return _[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,p,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var p=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(p),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var p,i,c,l=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<l;)p=n.readInt(2),i=n.readInt(2),c=n.readData(i),this.extraFields[p]={id:p,length:i,value:c};n.setIndex(l)},handleUTF8:function(){var n=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var i=a.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var l=a.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var p=s(n.value);return p.readInt(1)!==1||o(this.fileName)!==p.readInt(4)?null:f.utf8decode(p.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var p=s(n.value);return p.readInt(1)!==1||o(this.fileComment)!==p.readInt(4)?null:f.utf8decode(p.readData(n.length-5))}return null}},S.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,S,w){function s(p,i,c){this.name=p,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=i,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var a=u("./stream/StreamHelper"),r=u("./stream/DataWorker"),o=u("./utf8"),f=u("./compressedObject"),_=u("./stream/GenericWorker");s.prototype={internalStream:function(p){var i=null,c="string";try{if(!p)throw new Error("No output type specified.");var l=(c=p.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),i=this._decompressWorker();var y=!this._dataBinary;y&&!l&&(i=i.pipe(new o.Utf8EncodeWorker)),!y&&l&&(i=i.pipe(new o.Utf8DecodeWorker))}catch(A){(i=new _("error")).error(A)}return new a(i,c,"")},async:function(p,i){return this.internalStream(p).accumulate(i)},nodeStream:function(p,i){return this.internalStream(p||"nodebuffer").toNodejsStream(i)},_compressWorker:function(p,i){if(this._data instanceof f&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new o.Utf8EncodeWorker)),f.createWorkerFrom(c,p,i)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof _?this._data:new r(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<m.length;n++)s.prototype[m[n]]=h;S.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,S,w){(function(s){var a,r,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var f=0,_=new o(p),m=s.document.createTextNode("");_.observe(m,{characterData:!0}),a=function(){m.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var i=s.document.createElement("script");i.onreadystatechange=function(){p(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},s.document.documentElement.appendChild(i)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,a=function(){h.port2.postMessage(0)}}var n=[];function p(){var i,c;r=!0;for(var l=n.length;l;){for(c=n,n=[],i=-1;++i<l;)c[i]();l=n.length}r=!1}S.exports=function(i){n.push(i)!==1||r||a()}}).call(this,typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,S,w){var s=u("immediate");function a(){}var r={},o=["REJECTED"],f=["FULFILLED"],_=["PENDING"];function m(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,l!==a&&i(this,l)}function h(l,y,A){this.promise=l,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function n(l,y,A){s(function(){var k;try{k=y(A)}catch(v){return r.reject(l,v)}k===l?r.reject(l,new TypeError("Cannot resolve promise with itself")):r.resolve(l,k)})}function p(l){var y=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof y=="function")return function(){y.apply(l,arguments)}}function i(l,y){var A=!1;function k(z){A||(A=!0,r.reject(l,z))}function v(z){A||(A=!0,r.resolve(l,z))}var C=c(function(){y(v,k)});C.status==="error"&&k(C.value)}function c(l,y){var A={};try{A.value=l(y),A.status="success"}catch(k){A.status="error",A.value=k}return A}(S.exports=m).prototype.finally=function(l){if(typeof l!="function")return this;var y=this.constructor;return this.then(function(A){return y.resolve(l()).then(function(){return A})},function(A){return y.resolve(l()).then(function(){throw A})})},m.prototype.catch=function(l){return this.then(null,l)},m.prototype.then=function(l,y){if(typeof l!="function"&&this.state===f||typeof y!="function"&&this.state===o)return this;var A=new this.constructor(a);return this.state!==_?n(A,this.state===f?l:y,this.outcome):this.queue.push(new h(A,l,y)),A},h.prototype.callFulfilled=function(l){r.resolve(this.promise,l)},h.prototype.otherCallFulfilled=function(l){n(this.promise,this.onFulfilled,l)},h.prototype.callRejected=function(l){r.reject(this.promise,l)},h.prototype.otherCallRejected=function(l){n(this.promise,this.onRejected,l)},r.resolve=function(l,y){var A=c(p,y);if(A.status==="error")return r.reject(l,A.value);var k=A.value;if(k)i(l,k);else{l.state=f,l.outcome=y;for(var v=-1,C=l.queue.length;++v<C;)l.queue[v].callFulfilled(y)}return l},r.reject=function(l,y){l.state=o,l.outcome=y;for(var A=-1,k=l.queue.length;++A<k;)l.queue[A].callRejected(y);return l},m.resolve=function(l){return l instanceof this?l:r.resolve(new this(a),l)},m.reject=function(l){var y=new this(a);return r.reject(y,l)},m.all=function(l){var y=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=l.length,k=!1;if(!A)return this.resolve([]);for(var v=new Array(A),C=0,z=-1,U=new this(a);++z<A;)B(l[z],z);return U;function B(F,X){y.resolve(F).then(function(b){v[X]=b,++C!==A||k||(k=!0,r.resolve(U,v))},function(b){k||(k=!0,r.reject(U,b))})}},m.race=function(l){var y=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=l.length,k=!1;if(!A)return this.resolve([]);for(var v=-1,C=new this(a);++v<A;)z=l[v],y.resolve(z).then(function(U){k||(k=!0,r.resolve(C,U))},function(U){k||(k=!0,r.reject(C,U))});var z;return C}},{immediate:36}],38:[function(u,S,w){var s={};(0,u("./lib/utils/common").assign)(s,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),S.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,S,w){var s=u("./zlib/deflate"),a=u("./utils/common"),r=u("./utils/strings"),o=u("./zlib/messages"),f=u("./zlib/zstream"),_=Object.prototype.toString,m=0,h=-1,n=0,p=8;function i(l){if(!(this instanceof i))return new i(l);this.options=a.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},l||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(A!==m)throw new Error(o[A]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var k;if(k=typeof y.dictionary=="string"?r.string2buf(y.dictionary):_.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(A=s.deflateSetDictionary(this.strm,k))!==m)throw new Error(o[A]);this._dict_set=!0}}function c(l,y){var A=new i(y);if(A.push(l,!0),A.err)throw A.msg||o[A.err];return A.result}i.prototype.push=function(l,y){var A,k,v=this.strm,C=this.options.chunkSize;if(this.ended)return!1;k=y===~~y?y:y===!0?4:0,typeof l=="string"?v.input=r.string2buf(l):_.call(l)==="[object ArrayBuffer]"?v.input=new Uint8Array(l):v.input=l,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new a.Buf8(C),v.next_out=0,v.avail_out=C),(A=s.deflate(v,k))!==1&&A!==m)return this.onEnd(A),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(v.output,v.next_out))):this.onData(a.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&A!==1);return k===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===m):k!==2||(this.onEnd(m),!(v.avail_out=0))},i.prototype.onData=function(l){this.chunks.push(l)},i.prototype.onEnd=function(l){l===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},w.Deflate=i,w.deflate=c,w.deflateRaw=function(l,y){return(y=y||{}).raw=!0,c(l,y)},w.gzip=function(l,y){return(y=y||{}).gzip=!0,c(l,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,S,w){var s=u("./zlib/inflate"),a=u("./utils/common"),r=u("./utils/strings"),o=u("./zlib/constants"),f=u("./zlib/messages"),_=u("./zlib/zstream"),m=u("./zlib/gzheader"),h=Object.prototype.toString;function n(i){if(!(this instanceof n))return new n(i);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},i||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||i&&i.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var l=s.inflateInit2(this.strm,c.windowBits);if(l!==o.Z_OK)throw new Error(f[l]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function p(i,c){var l=new n(c);if(l.push(i,!0),l.err)throw l.msg||f[l.err];return l.result}n.prototype.push=function(i,c){var l,y,A,k,v,C,z=this.strm,U=this.options.chunkSize,B=this.options.dictionary,F=!1;if(this.ended)return!1;y=c===~~c?c:c===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof i=="string"?z.input=r.binstring2buf(i):h.call(i)==="[object ArrayBuffer]"?z.input=new Uint8Array(i):z.input=i,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new a.Buf8(U),z.next_out=0,z.avail_out=U),(l=s.inflate(z,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&B&&(C=typeof B=="string"?r.string2buf(B):h.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,l=s.inflateSetDictionary(this.strm,C)),l===o.Z_BUF_ERROR&&F===!0&&(l=o.Z_OK,F=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&l!==o.Z_STREAM_END&&(z.avail_in!==0||y!==o.Z_FINISH&&y!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=r.utf8border(z.output,z.next_out),k=z.next_out-A,v=r.buf2string(z.output,A),z.next_out=k,z.avail_out=U-k,k&&a.arraySet(z.output,z.output,A,k,0),this.onData(v)):this.onData(a.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(F=!0)}while((0<z.avail_in||z.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(y=o.Z_FINISH),y===o.Z_FINISH?(l=s.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):y!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(z.avail_out=0))},n.prototype.onData=function(i){this.chunks.push(i)},n.prototype.onEnd=function(i){i===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},w.Inflate=n,w.inflate=p,w.inflateRaw=function(i,c){return(c=c||{}).raw=!0,p(i,c)},w.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,S,w){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";w.assign=function(o){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var _=f.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var m in _)_.hasOwnProperty(m)&&(o[m]=_[m])}}return o},w.shrinkBuf=function(o,f){return o.length===f?o:o.subarray?o.subarray(0,f):(o.length=f,o)};var a={arraySet:function(o,f,_,m,h){if(f.subarray&&o.subarray)o.set(f.subarray(_,_+m),h);else for(var n=0;n<m;n++)o[h+n]=f[_+n]},flattenChunks:function(o){var f,_,m,h,n,p;for(f=m=0,_=o.length;f<_;f++)m+=o[f].length;for(p=new Uint8Array(m),f=h=0,_=o.length;f<_;f++)n=o[f],p.set(n,h),h+=n.length;return p}},r={arraySet:function(o,f,_,m,h){for(var n=0;n<m;n++)o[h+n]=f[_+n]},flattenChunks:function(o){return[].concat.apply([],o)}};w.setTyped=function(o){o?(w.Buf8=Uint8Array,w.Buf16=Uint16Array,w.Buf32=Int32Array,w.assign(w,a)):(w.Buf8=Array,w.Buf16=Array,w.Buf32=Array,w.assign(w,r))},w.setTyped(s)},{}],42:[function(u,S,w){var s=u("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var o=new s.Buf8(256),f=0;f<256;f++)o[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function _(m,h){if(h<65537&&(m.subarray&&r||!m.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(m,h));for(var n="",p=0;p<h;p++)n+=String.fromCharCode(m[p]);return n}o[254]=o[254]=1,w.string2buf=function(m){var h,n,p,i,c,l=m.length,y=0;for(i=0;i<l;i++)(64512&(n=m.charCodeAt(i)))==55296&&i+1<l&&(64512&(p=m.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),i++),y+=n<128?1:n<2048?2:n<65536?3:4;for(h=new s.Buf8(y),i=c=0;c<y;i++)(64512&(n=m.charCodeAt(i)))==55296&&i+1<l&&(64512&(p=m.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),i++),n<128?h[c++]=n:(n<2048?h[c++]=192|n>>>6:(n<65536?h[c++]=224|n>>>12:(h[c++]=240|n>>>18,h[c++]=128|n>>>12&63),h[c++]=128|n>>>6&63),h[c++]=128|63&n);return h},w.buf2binstring=function(m){return _(m,m.length)},w.binstring2buf=function(m){for(var h=new s.Buf8(m.length),n=0,p=h.length;n<p;n++)h[n]=m.charCodeAt(n);return h},w.buf2string=function(m,h){var n,p,i,c,l=h||m.length,y=new Array(2*l);for(n=p=0;n<l;)if((i=m[n++])<128)y[p++]=i;else if(4<(c=o[i]))y[p++]=65533,n+=c-1;else{for(i&=c===2?31:c===3?15:7;1<c&&n<l;)i=i<<6|63&m[n++],c--;1<c?y[p++]=65533:i<65536?y[p++]=i:(i-=65536,y[p++]=55296|i>>10&1023,y[p++]=56320|1023&i)}return _(y,p)},w.utf8border=function(m,h){var n;for((h=h||m.length)>m.length&&(h=m.length),n=h-1;0<=n&&(192&m[n])==128;)n--;return n<0||n===0?h:n+o[m[n]]>h?n:h}},{"./common":41}],43:[function(u,S,w){S.exports=function(s,a,r,o){for(var f=65535&s|0,_=s>>>16&65535|0,m=0;r!==0;){for(r-=m=2e3<r?2e3:r;_=_+(f=f+a[o++]|0)|0,--m;);f%=65521,_%=65521}return f|_<<16|0}},{}],44:[function(u,S,w){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,S,w){var s=function(){for(var a,r=[],o=0;o<256;o++){a=o;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;r[o]=a}return r}();S.exports=function(a,r,o,f){var _=s,m=f+o;a^=-1;for(var h=f;h<m;h++)a=a>>>8^_[255&(a^r[h])];return-1^a}},{}],46:[function(u,S,w){var s,a=u("../utils/common"),r=u("./trees"),o=u("./adler32"),f=u("./crc32"),_=u("./messages"),m=0,h=4,n=0,p=-2,i=-1,c=4,l=2,y=8,A=9,k=286,v=30,C=19,z=2*k+1,U=15,B=3,F=258,X=F+B+1,b=42,T=113,e=1,P=2,at=3,N=4;function ot(t,D){return t.msg=_[D],D}function G(t){return(t<<1)-(4<t?9:0)}function nt(t){for(var D=t.length;0<=--D;)t[D]=0}function O(t){var D=t.state,R=D.pending;R>t.avail_out&&(R=t.avail_out),R!==0&&(a.arraySet(t.output,D.pending_buf,D.pending_out,R,t.next_out),t.next_out+=R,D.pending_out+=R,t.total_out+=R,t.avail_out-=R,D.pending-=R,D.pending===0&&(D.pending_out=0))}function E(t,D){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,D),t.block_start=t.strstart,O(t.strm)}function tt(t,D){t.pending_buf[t.pending++]=D}function J(t,D){t.pending_buf[t.pending++]=D>>>8&255,t.pending_buf[t.pending++]=255&D}function M(t,D){var R,g,d=t.max_chain_length,x=t.strstart,Z=t.prev_length,L=t.nice_match,I=t.strstart>t.w_size-X?t.strstart-(t.w_size-X):0,j=t.window,V=t.w_mask,$=t.prev,et=t.strstart+F,ht=j[x+Z-1],ut=j[x+Z];t.prev_length>=t.good_match&&(d>>=2),L>t.lookahead&&(L=t.lookahead);do if(j[(R=D)+Z]===ut&&j[R+Z-1]===ht&&j[R]===j[x]&&j[++R]===j[x+1]){x+=2,R++;do;while(j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&j[++x]===j[++R]&&x<et);if(g=F-(et-x),x=et-F,Z<g){if(t.match_start=D,L<=(Z=g))break;ht=j[x+Z-1],ut=j[x+Z]}}while((D=$[D&V])>I&&--d!=0);return Z<=t.lookahead?Z:t.lookahead}function mt(t){var D,R,g,d,x,Z,L,I,j,V,$=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=$+($-X)){for(a.arraySet(t.window,t.window,$,$,0),t.match_start-=$,t.strstart-=$,t.block_start-=$,D=R=t.hash_size;g=t.head[--D],t.head[D]=$<=g?g-$:0,--R;);for(D=R=$;g=t.prev[--D],t.prev[D]=$<=g?g-$:0,--R;);d+=$}if(t.strm.avail_in===0)break;if(Z=t.strm,L=t.window,I=t.strstart+t.lookahead,j=d,V=void 0,V=Z.avail_in,j<V&&(V=j),R=V===0?0:(Z.avail_in-=V,a.arraySet(L,Z.input,Z.next_in,V,I),Z.state.wrap===1?Z.adler=o(Z.adler,L,V,I):Z.state.wrap===2&&(Z.adler=f(Z.adler,L,V,I)),Z.next_in+=V,Z.total_in+=V,V),t.lookahead+=R,t.lookahead+t.insert>=B)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+B-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<X&&t.strm.avail_in!==0)}function kt(t,D){for(var R,g;;){if(t.lookahead<X){if(mt(t),t.lookahead<X&&D===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),R!==0&&t.strstart-R<=t.w_size-X&&(t.match_length=M(t,R)),t.match_length>=B)if(g=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else g=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(g&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,D===h?(E(t,!0),t.strm.avail_out===0?at:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function lt(t,D){for(var R,g,d;;){if(t.lookahead<X){if(mt(t),t.lookahead<X&&D===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,R!==0&&t.prev_length<t.max_lazy_match&&t.strstart-R<=t.w_size-X&&(t.match_length=M(t,R),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-B,g=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,g&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((g=r._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(g=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,D===h?(E(t,!0),t.strm.avail_out===0?at:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function ct(t,D,R,g,d){this.good_length=t,this.max_lazy=D,this.nice_length=R,this.max_chain=g,this.func=d}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*z),this.dyn_dtree=new a.Buf16(2*(2*v+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(U+1),this.heap=new a.Buf16(2*k+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*k+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function vt(t){var D;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(D=t.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?b:T,t.adler=D.wrap===2?0:1,D.last_flush=m,r._tr_init(D),n):ot(t,p)}function Et(t){var D=vt(t);return D===n&&function(R){R.window_size=2*R.w_size,nt(R.head),R.max_lazy_match=s[R.level].max_lazy,R.good_match=s[R.level].good_length,R.nice_match=s[R.level].nice_length,R.max_chain_length=s[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=B-1,R.match_available=0,R.ins_h=0}(t.state),D}function St(t,D,R,g,d,x){if(!t)return p;var Z=1;if(D===i&&(D=6),g<0?(Z=0,g=-g):15<g&&(Z=2,g-=16),d<1||A<d||R!==y||g<8||15<g||D<0||9<D||x<0||c<x)return ot(t,p);g===8&&(g=9);var L=new yt;return(t.state=L).strm=t,L.wrap=Z,L.gzhead=null,L.w_bits=g,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=d+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+B-1)/B),L.window=new a.Buf8(2*L.w_size),L.head=new a.Buf16(L.hash_size),L.prev=new a.Buf16(L.w_size),L.lit_bufsize=1<<d+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new a.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=D,L.strategy=x,L.method=R,Et(t)}s=[new ct(0,0,0,0,function(t,D){var R=65535;for(R>t.pending_buf_size-5&&(R=t.pending_buf_size-5);;){if(t.lookahead<=1){if(mt(t),t.lookahead===0&&D===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var g=t.block_start+R;if((t.strstart===0||t.strstart>=g)&&(t.lookahead=t.strstart-g,t.strstart=g,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-X&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,D===h?(E(t,!0),t.strm.avail_out===0?at:N):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new ct(4,4,8,4,kt),new ct(4,5,16,8,kt),new ct(4,6,32,32,kt),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],w.deflateInit=function(t,D){return St(t,D,y,15,8,0)},w.deflateInit2=St,w.deflateReset=Et,w.deflateResetKeep=vt,w.deflateSetHeader=function(t,D){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=D,n):p},w.deflate=function(t,D){var R,g,d,x;if(!t||!t.state||5<D||D<0)return t?ot(t,p):p;if(g=t.state,!t.output||!t.input&&t.avail_in!==0||g.status===666&&D!==h)return ot(t,t.avail_out===0?-5:p);if(g.strm=t,R=g.last_flush,g.last_flush=D,g.status===b)if(g.wrap===2)t.adler=0,tt(g,31),tt(g,139),tt(g,8),g.gzhead?(tt(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),tt(g,255&g.gzhead.time),tt(g,g.gzhead.time>>8&255),tt(g,g.gzhead.time>>16&255),tt(g,g.gzhead.time>>24&255),tt(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),tt(g,255&g.gzhead.os),g.gzhead.extra&&g.gzhead.extra.length&&(tt(g,255&g.gzhead.extra.length),tt(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(t.adler=f(t.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(tt(g,0),tt(g,0),tt(g,0),tt(g,0),tt(g,0),tt(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),tt(g,3),g.status=T);else{var Z=y+(g.w_bits-8<<4)<<8;Z|=(2<=g.strategy||g.level<2?0:g.level<6?1:g.level===6?2:3)<<6,g.strstart!==0&&(Z|=32),Z+=31-Z%31,g.status=T,J(g,Z),g.strstart!==0&&(J(g,t.adler>>>16),J(g,65535&t.adler)),t.adler=1}if(g.status===69)if(g.gzhead.extra){for(d=g.pending;g.gzindex<(65535&g.gzhead.extra.length)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),O(t),d=g.pending,g.pending!==g.pending_buf_size));)tt(g,255&g.gzhead.extra[g.gzindex]),g.gzindex++;g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(g.status===73)if(g.gzhead.name){d=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),O(t),d=g.pending,g.pending===g.pending_buf_size)){x=1;break}x=g.gzindex<g.gzhead.name.length?255&g.gzhead.name.charCodeAt(g.gzindex++):0,tt(g,x)}while(x!==0);g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),x===0&&(g.gzindex=0,g.status=91)}else g.status=91;if(g.status===91)if(g.gzhead.comment){d=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),O(t),d=g.pending,g.pending===g.pending_buf_size)){x=1;break}x=g.gzindex<g.gzhead.comment.length?255&g.gzhead.comment.charCodeAt(g.gzindex++):0,tt(g,x)}while(x!==0);g.gzhead.hcrc&&g.pending>d&&(t.adler=f(t.adler,g.pending_buf,g.pending-d,d)),x===0&&(g.status=103)}else g.status=103;if(g.status===103&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&O(t),g.pending+2<=g.pending_buf_size&&(tt(g,255&t.adler),tt(g,t.adler>>8&255),t.adler=0,g.status=T)):g.status=T),g.pending!==0){if(O(t),t.avail_out===0)return g.last_flush=-1,n}else if(t.avail_in===0&&G(D)<=G(R)&&D!==h)return ot(t,-5);if(g.status===666&&t.avail_in!==0)return ot(t,-5);if(t.avail_in!==0||g.lookahead!==0||D!==m&&g.status!==666){var L=g.strategy===2?function(I,j){for(var V;;){if(I.lookahead===0&&(mt(I),I.lookahead===0)){if(j===m)return e;break}if(I.match_length=0,V=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,V&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,j===h?(E(I,!0),I.strm.avail_out===0?at:N):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:P}(g,D):g.strategy===3?function(I,j){for(var V,$,et,ht,ut=I.window;;){if(I.lookahead<=F){if(mt(I),I.lookahead<=F&&j===m)return e;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=B&&0<I.strstart&&($=ut[et=I.strstart-1])===ut[++et]&&$===ut[++et]&&$===ut[++et]){ht=I.strstart+F;do;while($===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&et<ht);I.match_length=F-(ht-et),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=B?(V=r._tr_tally(I,1,I.match_length-B),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(V=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),V&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,j===h?(E(I,!0),I.strm.avail_out===0?at:N):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:P}(g,D):s[g.level].func(g,D);if(L!==at&&L!==N||(g.status=666),L===e||L===at)return t.avail_out===0&&(g.last_flush=-1),n;if(L===P&&(D===1?r._tr_align(g):D!==5&&(r._tr_stored_block(g,0,0,!1),D===3&&(nt(g.head),g.lookahead===0&&(g.strstart=0,g.block_start=0,g.insert=0))),O(t),t.avail_out===0))return g.last_flush=-1,n}return D!==h?n:g.wrap<=0?1:(g.wrap===2?(tt(g,255&t.adler),tt(g,t.adler>>8&255),tt(g,t.adler>>16&255),tt(g,t.adler>>24&255),tt(g,255&t.total_in),tt(g,t.total_in>>8&255),tt(g,t.total_in>>16&255),tt(g,t.total_in>>24&255)):(J(g,t.adler>>>16),J(g,65535&t.adler)),O(t),0<g.wrap&&(g.wrap=-g.wrap),g.pending!==0?n:1)},w.deflateEnd=function(t){var D;return t&&t.state?(D=t.state.status)!==b&&D!==69&&D!==73&&D!==91&&D!==103&&D!==T&&D!==666?ot(t,p):(t.state=null,D===T?ot(t,-3):n):p},w.deflateSetDictionary=function(t,D){var R,g,d,x,Z,L,I,j,V=D.length;if(!t||!t.state||(x=(R=t.state).wrap)===2||x===1&&R.status!==b||R.lookahead)return p;for(x===1&&(t.adler=o(t.adler,D,V,0)),R.wrap=0,V>=R.w_size&&(x===0&&(nt(R.head),R.strstart=0,R.block_start=0,R.insert=0),j=new a.Buf8(R.w_size),a.arraySet(j,D,V-R.w_size,R.w_size,0),D=j,V=R.w_size),Z=t.avail_in,L=t.next_in,I=t.input,t.avail_in=V,t.next_in=0,t.input=D,mt(R);R.lookahead>=B;){for(g=R.strstart,d=R.lookahead-(B-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[g+B-1])&R.hash_mask,R.prev[g&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=g,g++,--d;);R.strstart=g,R.lookahead=B-1,mt(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=B-1,R.match_available=0,t.next_in=L,t.input=I,t.avail_in=Z,R.wrap=x,n},w.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,S,w){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,S,w){S.exports=function(s,a){var r,o,f,_,m,h,n,p,i,c,l,y,A,k,v,C,z,U,B,F,X,b,T,e,P;r=s.state,o=s.next_in,e=s.input,f=o+(s.avail_in-5),_=s.next_out,P=s.output,m=_-(a-s.avail_out),h=_+(s.avail_out-257),n=r.dmax,p=r.wsize,i=r.whave,c=r.wnext,l=r.window,y=r.hold,A=r.bits,k=r.lencode,v=r.distcode,C=(1<<r.lenbits)-1,z=(1<<r.distbits)-1;t:do{A<15&&(y+=e[o++]<<A,A+=8,y+=e[o++]<<A,A+=8),U=k[y&C];e:for(;;){if(y>>>=B=U>>>24,A-=B,(B=U>>>16&255)===0)P[_++]=65535&U;else{if(!(16&B)){if(!(64&B)){U=k[(65535&U)+(y&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}s.msg="invalid literal/length code",r.mode=30;break t}F=65535&U,(B&=15)&&(A<B&&(y+=e[o++]<<A,A+=8),F+=y&(1<<B)-1,y>>>=B,A-=B),A<15&&(y+=e[o++]<<A,A+=8,y+=e[o++]<<A,A+=8),U=v[y&z];n:for(;;){if(y>>>=B=U>>>24,A-=B,!(16&(B=U>>>16&255))){if(!(64&B)){U=v[(65535&U)+(y&(1<<B)-1)];continue n}s.msg="invalid distance code",r.mode=30;break t}if(X=65535&U,A<(B&=15)&&(y+=e[o++]<<A,(A+=8)<B&&(y+=e[o++]<<A,A+=8)),n<(X+=y&(1<<B)-1)){s.msg="invalid distance too far back",r.mode=30;break t}if(y>>>=B,A-=B,(B=_-m)<X){if(i<(B=X-B)&&r.sane){s.msg="invalid distance too far back",r.mode=30;break t}if(T=l,(b=0)===c){if(b+=p-B,B<F){for(F-=B;P[_++]=l[b++],--B;);b=_-X,T=P}}else if(c<B){if(b+=p+c-B,(B-=c)<F){for(F-=B;P[_++]=l[b++],--B;);if(b=0,c<F){for(F-=B=c;P[_++]=l[b++],--B;);b=_-X,T=P}}}else if(b+=c-B,B<F){for(F-=B;P[_++]=l[b++],--B;);b=_-X,T=P}for(;2<F;)P[_++]=T[b++],P[_++]=T[b++],P[_++]=T[b++],F-=3;F&&(P[_++]=T[b++],1<F&&(P[_++]=T[b++]))}else{for(b=_-X;P[_++]=P[b++],P[_++]=P[b++],P[_++]=P[b++],2<(F-=3););F&&(P[_++]=P[b++],1<F&&(P[_++]=P[b++]))}break}}break}}while(o<f&&_<h);o-=F=A>>3,y&=(1<<(A-=F<<3))-1,s.next_in=o,s.next_out=_,s.avail_in=o<f?f-o+5:5-(o-f),s.avail_out=_<h?h-_+257:257-(_-h),r.hold=y,r.bits=A}},{}],49:[function(u,S,w){var s=u("../utils/common"),a=u("./adler32"),r=u("./crc32"),o=u("./inffast"),f=u("./inftrees"),_=1,m=2,h=0,n=-2,p=1,i=852,c=592;function l(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(b){var T;return b&&b.state?(T=b.state,b.total_in=b.total_out=T.total=0,b.msg="",T.wrap&&(b.adler=1&T.wrap),T.mode=p,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new s.Buf32(i),T.distcode=T.distdyn=new s.Buf32(c),T.sane=1,T.back=-1,h):n}function k(b){var T;return b&&b.state?((T=b.state).wsize=0,T.whave=0,T.wnext=0,A(b)):n}function v(b,T){var e,P;return b&&b.state?(P=b.state,T<0?(e=0,T=-T):(e=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?n:(P.window!==null&&P.wbits!==T&&(P.window=null),P.wrap=e,P.wbits=T,k(b))):n}function C(b,T){var e,P;return b?(P=new y,(b.state=P).window=null,(e=v(b,T))!==h&&(b.state=null),e):n}var z,U,B=!0;function F(b){if(B){var T;for(z=new s.Buf32(512),U=new s.Buf32(32),T=0;T<144;)b.lens[T++]=8;for(;T<256;)b.lens[T++]=9;for(;T<280;)b.lens[T++]=7;for(;T<288;)b.lens[T++]=8;for(f(_,b.lens,0,288,z,0,b.work,{bits:9}),T=0;T<32;)b.lens[T++]=5;f(m,b.lens,0,32,U,0,b.work,{bits:5}),B=!1}b.lencode=z,b.lenbits=9,b.distcode=U,b.distbits=5}function X(b,T,e,P){var at,N=b.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new s.Buf8(N.wsize)),P>=N.wsize?(s.arraySet(N.window,T,e-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(P<(at=N.wsize-N.wnext)&&(at=P),s.arraySet(N.window,T,e-P,at,N.wnext),(P-=at)?(s.arraySet(N.window,T,e-P,P,0),N.wnext=P,N.whave=N.wsize):(N.wnext+=at,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=at))),0}w.inflateReset=k,w.inflateReset2=v,w.inflateResetKeep=A,w.inflateInit=function(b){return C(b,15)},w.inflateInit2=C,w.inflate=function(b,T){var e,P,at,N,ot,G,nt,O,E,tt,J,M,mt,kt,lt,ct,yt,vt,Et,St,t,D,R,g,d=0,x=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return n;(e=b.state).mode===12&&(e.mode=13),ot=b.next_out,at=b.output,nt=b.avail_out,N=b.next_in,P=b.input,G=b.avail_in,O=e.hold,E=e.bits,tt=G,J=nt,D=h;t:for(;;)switch(e.mode){case p:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(2&e.wrap&&O===35615){x[e.check=0]=255&O,x[1]=O>>>8&255,e.check=r(e.check,x,2,0),E=O=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&O)<<8)+(O>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&O)!=8){b.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(O>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&O?10:12,E=O=0;break;case 2:for(;E<16;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(e.flags=O,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=O>>8&1),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=r(e.check,x,2,0)),E=O=0,e.mode=3;case 3:for(;E<32;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.head&&(e.head.time=O),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,x[2]=O>>>16&255,x[3]=O>>>24&255,e.check=r(e.check,x,4,0)),E=O=0,e.mode=4;case 4:for(;E<16;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.head&&(e.head.xflags=255&O,e.head.os=O>>8),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=r(e.check,x,2,0)),E=O=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.length=O,e.head&&(e.head.extra_len=O),512&e.flags&&(x[0]=255&O,x[1]=O>>>8&255,e.check=r(e.check,x,2,0)),E=O=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(G<(M=e.length)&&(M=G),M&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,P,N,M,t)),512&e.flags&&(e.check=r(e.check,P,M,N)),G-=M,N+=M,e.length-=M),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(G===0)break t;for(M=0;t=P[N+M++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&M<G;);if(512&e.flags&&(e.check=r(e.check,P,M,N)),G-=M,N+=M,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(G===0)break t;for(M=0;t=P[N+M++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&M<G;);if(512&e.flags&&(e.check=r(e.check,P,M,N)),G-=M,N+=M,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(O!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}E=O=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}b.adler=e.check=l(O),E=O=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=ot,b.avail_out=nt,b.next_in=N,b.avail_in=G,e.hold=O,e.bits=E,2;b.adler=e.check=1,e.mode=12;case 12:if(T===5||T===6)break t;case 13:if(e.last){O>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}switch(e.last=1&O,E-=1,3&(O>>>=1)){case 0:e.mode=14;break;case 1:if(F(e),e.mode=20,T!==6)break;O>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}O>>>=2,E-=2;break;case 14:for(O>>>=7&E,E-=7&E;E<32;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if((65535&O)!=(O>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&O,E=O=0,e.mode=15,T===6)break t;case 15:e.mode=16;case 16:if(M=e.length){if(G<M&&(M=G),nt<M&&(M=nt),M===0)break t;s.arraySet(at,P,N,M,ot),G-=M,N+=M,nt-=M,ot+=M,e.length-=M;break}e.mode=12;break;case 17:for(;E<14;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(e.nlen=257+(31&O),O>>>=5,E-=5,e.ndist=1+(31&O),O>>>=5,E-=5,e.ncode=4+(15&O),O>>>=4,E-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.lens[Z[e.have++]]=7&O,O>>>=3,E-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,R={bits:e.lenbits},D=f(0,e.lens,0,19,e.lencode,0,e.work,R),e.lenbits=R.bits,D){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ct=(d=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,yt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(yt<16)O>>>=lt,E-=lt,e.lens[e.have++]=yt;else{if(yt===16){for(g=lt+2;E<g;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(O>>>=lt,E-=lt,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],M=3+(3&O),O>>>=2,E-=2}else if(yt===17){for(g=lt+3;E<g;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}E-=lt,t=0,M=3+(7&(O>>>=lt)),O>>>=3,E-=3}else{for(g=lt+7;E<g;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}E-=lt,t=0,M=11+(127&(O>>>=lt)),O>>>=7,E-=7}if(e.have+M>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;M--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,R={bits:e.lenbits},D=f(_,e.lens,0,e.nlen,e.lencode,0,e.work,R),e.lenbits=R.bits,D){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,R={bits:e.distbits},D=f(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,R),e.distbits=R.bits,D){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,T===6)break t;case 20:e.mode=21;case 21:if(6<=G&&258<=nt){b.next_out=ot,b.avail_out=nt,b.next_in=N,b.avail_in=G,e.hold=O,e.bits=E,o(b,J),ot=b.next_out,at=b.output,nt=b.avail_out,N=b.next_in,P=b.input,G=b.avail_in,O=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;ct=(d=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,yt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(ct&&!(240&ct)){for(vt=lt,Et=ct,St=yt;ct=(d=e.lencode[St+((O&(1<<vt+Et)-1)>>vt)])>>>16&255,yt=65535&d,!(vt+(lt=d>>>24)<=E);){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}O>>>=vt,E-=vt,e.back+=vt}if(O>>>=lt,E-=lt,e.back+=lt,e.length=yt,ct===0){e.mode=26;break}if(32&ct){e.back=-1,e.mode=12;break}if(64&ct){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&ct,e.mode=22;case 22:if(e.extra){for(g=e.extra;E<g;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.length+=O&(1<<e.extra)-1,O>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;ct=(d=e.distcode[O&(1<<e.distbits)-1])>>>16&255,yt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(!(240&ct)){for(vt=lt,Et=ct,St=yt;ct=(d=e.distcode[St+((O&(1<<vt+Et)-1)>>vt)])>>>16&255,yt=65535&d,!(vt+(lt=d>>>24)<=E);){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}O>>>=vt,E-=vt,e.back+=vt}if(O>>>=lt,E-=lt,e.back+=lt,64&ct){b.msg="invalid distance code",e.mode=30;break}e.offset=yt,e.extra=15&ct,e.mode=24;case 24:if(e.extra){for(g=e.extra;E<g;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}e.offset+=O&(1<<e.extra)-1,O>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(nt===0)break t;if(M=J-nt,e.offset>M){if((M=e.offset-M)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}mt=M>e.wnext?(M-=e.wnext,e.wsize-M):e.wnext-M,M>e.length&&(M=e.length),kt=e.window}else kt=at,mt=ot-e.offset,M=e.length;for(nt<M&&(M=nt),nt-=M,e.length-=M;at[ot++]=kt[mt++],--M;);e.length===0&&(e.mode=21);break;case 26:if(nt===0)break t;at[ot++]=e.length,nt--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(G===0)break t;G--,O|=P[N++]<<E,E+=8}if(J-=nt,b.total_out+=J,e.total+=J,J&&(b.adler=e.check=e.flags?r(e.check,at,J,ot-J):a(e.check,at,J,ot-J)),J=nt,(e.flags?O:l(O))!==e.check){b.msg="incorrect data check",e.mode=30;break}E=O=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(G===0)break t;G--,O+=P[N++]<<E,E+=8}if(O!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}E=O=0}e.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return n}return b.next_out=ot,b.avail_out=nt,b.next_in=N,b.avail_in=G,e.hold=O,e.bits=E,(e.wsize||J!==b.avail_out&&e.mode<30&&(e.mode<27||T!==4))&&X(b,b.output,b.next_out,J-b.avail_out)?(e.mode=31,-4):(tt-=b.avail_in,J-=b.avail_out,b.total_in+=tt,b.total_out+=J,e.total+=J,e.wrap&&J&&(b.adler=e.check=e.flags?r(e.check,at,J,b.next_out-J):a(e.check,at,J,b.next_out-J)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(tt==0&&J===0||T===4)&&D===h&&(D=-5),D)},w.inflateEnd=function(b){if(!b||!b.state)return n;var T=b.state;return T.window&&(T.window=null),b.state=null,h},w.inflateGetHeader=function(b,T){var e;return b&&b.state&&2&(e=b.state).wrap?((e.head=T).done=!1,h):n},w.inflateSetDictionary=function(b,T){var e,P=T.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?n:e.mode===11&&a(1,T,P,0)!==e.check?-3:X(b,T,P,P)?(e.mode=31,-4):(e.havedict=1,h):n},w.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,S,w){var s=u("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(_,m,h,n,p,i,c,l){var y,A,k,v,C,z,U,B,F,X=l.bits,b=0,T=0,e=0,P=0,at=0,N=0,ot=0,G=0,nt=0,O=0,E=null,tt=0,J=new s.Buf16(16),M=new s.Buf16(16),mt=null,kt=0;for(b=0;b<=15;b++)J[b]=0;for(T=0;T<n;T++)J[m[h+T]]++;for(at=X,P=15;1<=P&&J[P]===0;P--);if(P<at&&(at=P),P===0)return p[i++]=20971520,p[i++]=20971520,l.bits=1,0;for(e=1;e<P&&J[e]===0;e++);for(at<e&&(at=e),b=G=1;b<=15;b++)if(G<<=1,(G-=J[b])<0)return-1;if(0<G&&(_===0||P!==1))return-1;for(M[1]=0,b=1;b<15;b++)M[b+1]=M[b]+J[b];for(T=0;T<n;T++)m[h+T]!==0&&(c[M[m[h+T]]++]=T);if(z=_===0?(E=mt=c,19):_===1?(E=a,tt-=257,mt=r,kt-=257,256):(E=o,mt=f,-1),b=e,C=i,ot=T=O=0,k=-1,v=(nt=1<<(N=at))-1,_===1&&852<nt||_===2&&592<nt)return 1;for(;;){for(U=b-ot,F=c[T]<z?(B=0,c[T]):c[T]>z?(B=mt[kt+c[T]],E[tt+c[T]]):(B=96,0),y=1<<b-ot,e=A=1<<N;p[C+(O>>ot)+(A-=y)]=U<<24|B<<16|F|0,A!==0;);for(y=1<<b-1;O&y;)y>>=1;if(y!==0?(O&=y-1,O+=y):O=0,T++,--J[b]==0){if(b===P)break;b=m[h+c[T]]}if(at<b&&(O&v)!==k){for(ot===0&&(ot=at),C+=e,G=1<<(N=b-ot);N+ot<P&&!((G-=J[N+ot])<=0);)N++,G<<=1;if(nt+=1<<N,_===1&&852<nt||_===2&&592<nt)return 1;p[k=O&v]=at<<24|N<<16|C-i|0}}return O!==0&&(p[C+O]=b-ot<<24|64<<16|0),l.bits=at,0}},{"../utils/common":41}],51:[function(u,S,w){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,S,w){var s=u("../utils/common"),a=0,r=1;function o(d){for(var x=d.length;0<=--x;)d[x]=0}var f=0,_=29,m=256,h=m+1+_,n=30,p=19,i=2*h+1,c=15,l=16,y=7,A=256,k=16,v=17,C=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(h+2));o(X);var b=new Array(2*n);o(b);var T=new Array(512);o(T);var e=new Array(256);o(e);var P=new Array(_);o(P);var at,N,ot,G=new Array(n);function nt(d,x,Z,L,I){this.static_tree=d,this.extra_bits=x,this.extra_base=Z,this.elems=L,this.max_length=I,this.has_stree=d&&d.length}function O(d,x){this.dyn_tree=d,this.max_code=0,this.stat_desc=x}function E(d){return d<256?T[d]:T[256+(d>>>7)]}function tt(d,x){d.pending_buf[d.pending++]=255&x,d.pending_buf[d.pending++]=x>>>8&255}function J(d,x,Z){d.bi_valid>l-Z?(d.bi_buf|=x<<d.bi_valid&65535,tt(d,d.bi_buf),d.bi_buf=x>>l-d.bi_valid,d.bi_valid+=Z-l):(d.bi_buf|=x<<d.bi_valid&65535,d.bi_valid+=Z)}function M(d,x,Z){J(d,Z[2*x],Z[2*x+1])}function mt(d,x){for(var Z=0;Z|=1&d,d>>>=1,Z<<=1,0<--x;);return Z>>>1}function kt(d,x,Z){var L,I,j=new Array(c+1),V=0;for(L=1;L<=c;L++)j[L]=V=V+Z[L-1]<<1;for(I=0;I<=x;I++){var $=d[2*I+1];$!==0&&(d[2*I]=mt(j[$]++,$))}}function lt(d){var x;for(x=0;x<h;x++)d.dyn_ltree[2*x]=0;for(x=0;x<n;x++)d.dyn_dtree[2*x]=0;for(x=0;x<p;x++)d.bl_tree[2*x]=0;d.dyn_ltree[2*A]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function ct(d){8<d.bi_valid?tt(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function yt(d,x,Z,L){var I=2*x,j=2*Z;return d[I]<d[j]||d[I]===d[j]&&L[x]<=L[Z]}function vt(d,x,Z){for(var L=d.heap[Z],I=Z<<1;I<=d.heap_len&&(I<d.heap_len&&yt(x,d.heap[I+1],d.heap[I],d.depth)&&I++,!yt(x,L,d.heap[I],d.depth));)d.heap[Z]=d.heap[I],Z=I,I<<=1;d.heap[Z]=L}function Et(d,x,Z){var L,I,j,V,$=0;if(d.last_lit!==0)for(;L=d.pending_buf[d.d_buf+2*$]<<8|d.pending_buf[d.d_buf+2*$+1],I=d.pending_buf[d.l_buf+$],$++,L===0?M(d,I,x):(M(d,(j=e[I])+m+1,x),(V=z[j])!==0&&J(d,I-=P[j],V),M(d,j=E(--L),Z),(V=U[j])!==0&&J(d,L-=G[j],V)),$<d.last_lit;);M(d,A,x)}function St(d,x){var Z,L,I,j=x.dyn_tree,V=x.stat_desc.static_tree,$=x.stat_desc.has_stree,et=x.stat_desc.elems,ht=-1;for(d.heap_len=0,d.heap_max=i,Z=0;Z<et;Z++)j[2*Z]!==0?(d.heap[++d.heap_len]=ht=Z,d.depth[Z]=0):j[2*Z+1]=0;for(;d.heap_len<2;)j[2*(I=d.heap[++d.heap_len]=ht<2?++ht:0)]=1,d.depth[I]=0,d.opt_len--,$&&(d.static_len-=V[2*I+1]);for(x.max_code=ht,Z=d.heap_len>>1;1<=Z;Z--)vt(d,j,Z);for(I=et;Z=d.heap[1],d.heap[1]=d.heap[d.heap_len--],vt(d,j,1),L=d.heap[1],d.heap[--d.heap_max]=Z,d.heap[--d.heap_max]=L,j[2*I]=j[2*Z]+j[2*L],d.depth[I]=(d.depth[Z]>=d.depth[L]?d.depth[Z]:d.depth[L])+1,j[2*Z+1]=j[2*L+1]=I,d.heap[1]=I++,vt(d,j,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(ut,xt){var Kt,It,Wt,gt,Lt,Mt,zt=xt.dyn_tree,ee=xt.max_code,we=xt.stat_desc.static_tree,ke=xt.stat_desc.has_stree,Ae=xt.stat_desc.extra_bits,ne=xt.stat_desc.extra_base,Dt=xt.stat_desc.max_length,Nt=0;for(gt=0;gt<=c;gt++)ut.bl_count[gt]=0;for(zt[2*ut.heap[ut.heap_max]+1]=0,Kt=ut.heap_max+1;Kt<i;Kt++)Dt<(gt=zt[2*zt[2*(It=ut.heap[Kt])+1]+1]+1)&&(gt=Dt,Nt++),zt[2*It+1]=gt,ee<It||(ut.bl_count[gt]++,Lt=0,ne<=It&&(Lt=Ae[It-ne]),Mt=zt[2*It],ut.opt_len+=Mt*(gt+Lt),ke&&(ut.static_len+=Mt*(we[2*It+1]+Lt)));if(Nt!==0){do{for(gt=Dt-1;ut.bl_count[gt]===0;)gt--;ut.bl_count[gt]--,ut.bl_count[gt+1]+=2,ut.bl_count[Dt]--,Nt-=2}while(0<Nt);for(gt=Dt;gt!==0;gt--)for(It=ut.bl_count[gt];It!==0;)ee<(Wt=ut.heap[--Kt])||(zt[2*Wt+1]!==gt&&(ut.opt_len+=(gt-zt[2*Wt+1])*zt[2*Wt],zt[2*Wt+1]=gt),It--)}}(d,x),kt(j,ht,d.bl_count)}function t(d,x,Z){var L,I,j=-1,V=x[1],$=0,et=7,ht=4;for(V===0&&(et=138,ht=3),x[2*(Z+1)+1]=65535,L=0;L<=Z;L++)I=V,V=x[2*(L+1)+1],++$<et&&I===V||($<ht?d.bl_tree[2*I]+=$:I!==0?(I!==j&&d.bl_tree[2*I]++,d.bl_tree[2*k]++):$<=10?d.bl_tree[2*v]++:d.bl_tree[2*C]++,j=I,ht=($=0)===V?(et=138,3):I===V?(et=6,3):(et=7,4))}function D(d,x,Z){var L,I,j=-1,V=x[1],$=0,et=7,ht=4;for(V===0&&(et=138,ht=3),L=0;L<=Z;L++)if(I=V,V=x[2*(L+1)+1],!(++$<et&&I===V)){if($<ht)for(;M(d,I,d.bl_tree),--$!=0;);else I!==0?(I!==j&&(M(d,I,d.bl_tree),$--),M(d,k,d.bl_tree),J(d,$-3,2)):$<=10?(M(d,v,d.bl_tree),J(d,$-3,3)):(M(d,C,d.bl_tree),J(d,$-11,7));j=I,ht=($=0)===V?(et=138,3):I===V?(et=6,3):(et=7,4)}}o(G);var R=!1;function g(d,x,Z,L){J(d,(f<<1)+(L?1:0),3),function(I,j,V,$){ct(I),$&&(tt(I,V),tt(I,~V)),s.arraySet(I.pending_buf,I.window,j,V,I.pending),I.pending+=V}(d,x,Z,!0)}w._tr_init=function(d){R||(function(){var x,Z,L,I,j,V=new Array(c+1);for(I=L=0;I<_-1;I++)for(P[I]=L,x=0;x<1<<z[I];x++)e[L++]=I;for(e[L-1]=I,I=j=0;I<16;I++)for(G[I]=j,x=0;x<1<<U[I];x++)T[j++]=I;for(j>>=7;I<n;I++)for(G[I]=j<<7,x=0;x<1<<U[I]-7;x++)T[256+j++]=I;for(Z=0;Z<=c;Z++)V[Z]=0;for(x=0;x<=143;)X[2*x+1]=8,x++,V[8]++;for(;x<=255;)X[2*x+1]=9,x++,V[9]++;for(;x<=279;)X[2*x+1]=7,x++,V[7]++;for(;x<=287;)X[2*x+1]=8,x++,V[8]++;for(kt(X,h+1,V),x=0;x<n;x++)b[2*x+1]=5,b[2*x]=mt(x,5);at=new nt(X,z,m+1,h,c),N=new nt(b,U,0,n,c),ot=new nt(new Array(0),B,0,p,y)}(),R=!0),d.l_desc=new O(d.dyn_ltree,at),d.d_desc=new O(d.dyn_dtree,N),d.bl_desc=new O(d.bl_tree,ot),d.bi_buf=0,d.bi_valid=0,lt(d)},w._tr_stored_block=g,w._tr_flush_block=function(d,x,Z,L){var I,j,V=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function($){var et,ht=4093624447;for(et=0;et<=31;et++,ht>>>=1)if(1&ht&&$.dyn_ltree[2*et]!==0)return a;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return r;for(et=32;et<m;et++)if($.dyn_ltree[2*et]!==0)return r;return a}(d)),St(d,d.l_desc),St(d,d.d_desc),V=function($){var et;for(t($,$.dyn_ltree,$.l_desc.max_code),t($,$.dyn_dtree,$.d_desc.max_code),St($,$.bl_desc),et=p-1;3<=et&&$.bl_tree[2*F[et]+1]===0;et--);return $.opt_len+=3*(et+1)+5+5+4,et}(d),I=d.opt_len+3+7>>>3,(j=d.static_len+3+7>>>3)<=I&&(I=j)):I=j=Z+5,Z+4<=I&&x!==-1?g(d,x,Z,L):d.strategy===4||j===I?(J(d,2+(L?1:0),3),Et(d,X,b)):(J(d,4+(L?1:0),3),function($,et,ht,ut){var xt;for(J($,et-257,5),J($,ht-1,5),J($,ut-4,4),xt=0;xt<ut;xt++)J($,$.bl_tree[2*F[xt]+1],3);D($,$.dyn_ltree,et-1),D($,$.dyn_dtree,ht-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,V+1),Et(d,d.dyn_ltree,d.dyn_dtree)),lt(d),L&&ct(d)},w._tr_tally=function(d,x,Z){return d.pending_buf[d.d_buf+2*d.last_lit]=x>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&x,d.pending_buf[d.l_buf+d.last_lit]=255&Z,d.last_lit++,x===0?d.dyn_ltree[2*Z]++:(d.matches++,x--,d.dyn_ltree[2*(e[Z]+m+1)]++,d.dyn_dtree[2*E(x)]++),d.last_lit===d.lit_bufsize-1},w._tr_align=function(d){J(d,2,3),M(d,A,X),function(x){x.bi_valid===16?(tt(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(u,S,w){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,S,w){(function(s){(function(a,r){if(!a.setImmediate){var o,f,_,m,h=1,n={},p=!1,i=a.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(a);c=c&&c.setTimeout?c:a,o={}.toString.call(a.process)==="[object process]"?function(k){process.nextTick(function(){y(k)})}:function(){if(a.postMessage&&!a.importScripts){var k=!0,v=a.onmessage;return a.onmessage=function(){k=!1},a.postMessage("","*"),a.onmessage=v,k}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",A,!1):a.attachEvent("onmessage",A),function(k){a.postMessage(m+k,"*")}):a.MessageChannel?((_=new MessageChannel).port1.onmessage=function(k){y(k.data)},function(k){_.port2.postMessage(k)}):i&&"onreadystatechange"in i.createElement("script")?(f=i.documentElement,function(k){var v=i.createElement("script");v.onreadystatechange=function(){y(k),v.onreadystatechange=null,f.removeChild(v),v=null},f.appendChild(v)}):function(k){setTimeout(y,0,k)},c.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var v=new Array(arguments.length-1),C=0;C<v.length;C++)v[C]=arguments[C+1];var z={callback:k,args:v};return n[h]=z,o(h),h++},c.clearImmediate=l}function l(k){delete n[k]}function y(k){if(p)setTimeout(y,0,k);else{var v=n[k];if(v){p=!0;try{(function(C){var z=C.callback,U=C.args;switch(U.length){case 0:z();break;case 1:z(U[0]);break;case 2:z(U[0],U[1]);break;case 3:z(U[0],U[1],U[2]);break;default:z.apply(r,U)}})(v)}finally{l(k),p=!1}}}}function A(k){k.source===a&&typeof k.data=="string"&&k.data.indexOf(m)===0&&y(+k.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pr);const fe=Ht;var qt={},mr={get exports(){return qt},set exports(K){qt=K}};(function(K,H){(function(u,S){S()})(Tt,function(){function u(f,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function S(f,_,m){var h=new XMLHttpRequest;h.open("GET",f),h.responseType="blob",h.onload=function(){o(h.response,_,m)},h.onerror=function(){console.error("could not download file")},h.send()}function w(f){var _=new XMLHttpRequest;_.open("HEAD",f,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(_)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Tt=="object"&&Tt.global===Tt?Tt:void 0,r=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(f,_,m){var h=a.URL||a.webkitURL,n=document.createElement("a");_=_||f.name||"download",n.download=_,n.rel="noopener",typeof f=="string"?(n.href=f,n.origin===location.origin?s(n):w(n.href)?S(f,_,m):s(n,n.target="_blank")):(n.href=h.createObjectURL(f),setTimeout(function(){h.revokeObjectURL(n.href)},4e4),setTimeout(function(){s(n)},0))}:"msSaveOrOpenBlob"in navigator?function(f,_,m){if(_=_||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(u(f,m),_);else if(w(f))S(f,_,m);else{var h=document.createElement("a");h.href=f,h.target="_blank",setTimeout(function(){s(h)})}}:function(f,_,m,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof f=="string")return S(f,_,m);var n=f.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||n&&p||r)&&typeof FileReader<"u"){var c=new FileReader;c.onloadend=function(){var A=c.result;A=i?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=A:location=A,h=null},c.readAsDataURL(f)}else{var l=a.URL||a.webkitURL,y=l.createObjectURL(f);h?h.location=y:location.href=y,h=null,setTimeout(function(){l.revokeObjectURL(y)},4e4)}});a.saveAs=o.saveAs=o,K.exports=o})})(mr);const vr=qt,gr=Te("save",()=>{const K=wt(null);function H(a){K.value=a,localStorage.setItem("save",JSON.stringify({save:K.value}))}function u(){try{const{save:a}=JSON.parse(localStorage.getItem("save"));return K.value=a,!0}catch{return K.value=null,!1}}function S(){localStorage.removeItem("save"),K.value=null}async function w(){const a=JSON.stringify(K.value),r=fe();r.file("save.txt",a);const o=await r.generateAsync({type:"blob",compression:"DEFLATE"});vr.saveAs(o,"save.SCTReplay")}async function s(a){var o;const r=await fe.loadAsync(a);K.value=JSON.parse(await((o=r.file("save.txt"))==null?void 0:o.async("string"))||"{}")}return{save:K,SaveStorage:H,LoadStorage:u,CleanStorage:S,Download:w,Upload:s}});const _r=Oe({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:K=>typeof K=="boolean"||[1e3,1024].includes(K)},...Fe({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:K=>Be(K).every(H=>H!=null&&typeof H=="object")},...Le({clearable:!0})},emits:{"click:control":K=>!0,"update:modelValue":K=>!0},setup(K,H){let{attrs:u,emit:S,slots:w}=H;const{t:s}=Re(),a=Xt(K,"modelValue"),r=dt(()=>typeof K.showSize!="boolean"?K.showSize:void 0),o=dt(()=>(a.value??[]).reduce((v,C)=>{let{size:z=0}=C;return v+z},0)),f=dt(()=>ae(o.value,r.value)),_=dt(()=>(a.value??[]).map(v=>{const{name:C="",size:z=0}=v;return K.showSize?`${C} (${ae(z,r.value)})`:C})),m=dt(()=>{var v;const C=((v=a.value)==null?void 0:v.length)??0;return K.showSize?s(K.counterSizeString,C,f.value):s(K.counterString,C)}),h=wt(),n=wt(),p=wt(!1),i=wt(),c=dt(()=>K.messages.length?K.messages:K.persistentHint?K.hint:"");function l(){if(i.value!==document.activeElement){var v;(v=i.value)==null||v.focus()}p.value||(p.value=!0)}function y(v){ie(K["onClick:prepend"],v),A(v)}function A(v){var C;(C=i.value)==null||C.click(),S("click:control",v)}function k(v){v.stopPropagation(),l(),me(()=>{a.value=[],ie(K["onClick:clear"],v)})}return Vt(a,v=>{(!Array.isArray(v)||!v.length)&&i.value&&(i.value.value="")}),Qt(()=>{const v=!!(w.counter||K.counter),C=!!(v||w.details),[z,U]=Ke(u),[{modelValue:B,...F}]=Ne(K),[X]=Ge(K);return q(Je,Rt({ref:h,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,class:"v-file-input","onClick:prepend":y,"onClick:append":K["onClick:append"]},z,F,{focused:p.value,messages:c.value}),{...w,default:b=>{let{id:T,isDisabled:e,isDirty:P,isReadonly:at,isValid:N}=b;return q(je,Rt({ref:n,"prepend-icon":K.prependIcon,"onClick:control":A,"onClick:clear":k,"onClick:prependInner":K["onClick:prependInner"],"onClick:appendInner":K["onClick:appendInner"]},X,{id:T.value,active:P.value||p.value,dirty:P.value,focused:p.value,error:N.value===!1}),{...w,default:ot=>{var G;let{props:{class:nt,...O}}=ot;return q(ft,null,[q("input",Rt({ref:i,type:"file",readonly:at.value,disabled:e.value,multiple:K.multiple,name:K.name,onClick:E=>{E.stopPropagation(),l()},onChange:E=>{if(!E.target)return;const tt=E.target;a.value=[...tt.files??[]]},onFocus:l,onBlur:()=>p.value=!1},O,U),null),q("div",{class:nt},[!!((G=a.value)!=null&&G.length)&&(w.selection?w.selection({fileNames:_.value,totalBytes:o.value,totalBytesReadable:f.value}):K.chips?_.value.map(E=>q($e,{key:E,size:"small",color:K.color},{default:()=>[E]})):_.value.join(", "))])])}})},details:C?b=>{var T,e;return q(ft,null,[(T=w.details)==null?void 0:T.call(w,b),v&&q(ft,null,[q("span",null,null),q(Me,{active:!!((e=a.value)!=null&&e.length),value:m.value},w.counter)])])}:void 0})}),te({},h,n,i)}}),yr={class:"d-flex flex-column"},br={class:"d-flex flex-column"},wr={class:"d-flex flex-column"},kr={class:"d-flex flex-column"},Sr=Bt({__name:"LocalGame",props:{config:null},setup(K){const H=K,u=Yt(),S=We(),w=gr();w.LoadStorage();const s=new Ye,a=new qe(0,s);s.init(H.config),s.game.start();const r=wt({canUndo:!1,canRedo:!1}),o=wt(s.game.getState()),f=dt(()=>o.value.player[0]);s.server.notify.push(k=>{o.value=k}),s.saveStateChanged=()=>{r.value=s.getState()};function _(){S.back()}document.onkeydown=k=>{var v,C;if(!(k.shiftKey||k.altKey)){if(k.ctrlKey){switch(k.key){case"z":r.value.canUndo&&s.undo();break;case"y":r.value.canRedo&&s.redo();break}return}switch(k.key){case"w":a.autoPost({msg:"$upgrade"});break;case"z":a.autoPost({msg:"$finish"});break;case"c":a.autoPost({msg:(v=a.getPlayer())!=null&&v.locked?"$unlock":"$lock"});break;case"r":a.autoPost({msg:"$refresh"});break;default:{const z=o.value.player[a.pos];if(!z||z.selected.area==="none")break;for(const U of((C=z[z.selected.area][z.selected.place])==null?void 0:C.actions)||[])if(k.key===U.acckey){a.post(U.msg);break}}}}};const m=wt(!1),h=wt(""),n=dt(()=>o.value.config.ActivePack.map(k=>De[k]).reduce((k,v)=>k.concat(v),[]).map(k=>Zt[k]).map((k,v)=>({card:k,find:k.pinyin.indexOf(h.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({card:k})=>k).slice(0,10)),p=wt(!1),i=wt(""),c=dt(()=>o.value.config.ActiveUnit.map(k=>Pe[k]).map((k,v)=>({unit:k,find:k.pinyin.indexOf(i.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({unit:k})=>k).slice(0,10)),l=wt(!1),y=wt([]);function A(){w.Upload(y.value[0]),l.value=!1}return(k,v)=>(Y(),st(ft,null,[q(hr,{class:"MiddleScale",state:o.value,client:W(a)},{default:it(()=>{var C,z,U,B;return[Q("div",yr,[q(_t,{variant:"flat",onClick:v[0]||(v[0]=F=>_())},{default:it(()=>[pt(" 返回 ")]),_:1}),q(_t,{variant:"flat",onClick:v[1]||(v[1]=F=>m.value=!0),disabled:((C=W(f))==null?void 0:C.status)!=="normal"},{default:it(()=>[pt(" 卡牌 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",disabled:((z=W(f))==null?void 0:z.selected.area)!=="present"||((U=W(f))==null?void 0:U.status)!=="normal",onClick:v[2]||(v[2]=F=>p.value=!0)},{default:it(()=>[pt(" 单位 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",disabled:((B=W(f))==null?void 0:B.status)!=="normal",onClick:v[3]||(v[3]=F=>W(a).autoPost({msg:"$cheat",type:"resource"}))},{default:it(()=>[pt(" 资源 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",class:"mt-auto",onClick:v[4]||(v[4]=F=>W(u).toggleFullScreen())},{default:it(()=>[pt(rt(W(u).isFullScreen?"窗口":"全屏"),1)]),_:1})]),Q("div",br,[q(_t,{variant:"flat",disabled:!r.value.canUndo,onClick:v[5]||(v[5]=F=>W(s).undo())},{default:it(()=>[pt(" 撤销 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",disabled:!r.value.canRedo,onClick:v[6]||(v[6]=F=>W(s).redo())},{default:it(()=>[pt(" 重做 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",onClick:v[7]||(v[7]=F=>W(w).SaveStorage(W(s).save))},{default:it(()=>[pt(" 保存 ")]),_:1}),q(_t,{variant:"flat",disabled:!W(w).save,onClick:v[8]||(v[8]=F=>W(w).save?W(s).load(W(w).save):void 0)},{default:it(()=>[pt(" 读取 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",disabled:!W(w).save,onClick:v[9]||(v[9]=F=>W(w).CleanStorage())},{default:it(()=>[pt(" 清除 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",disabled:!W(w).save,onClick:v[10]||(v[10]=F=>W(w).Download())},{default:it(()=>[pt(" 导出 ")]),_:1},8,["disabled"]),q(_t,{variant:"flat",onClick:v[11]||(v[11]=F=>l.value=!0)},{default:it(()=>[pt(" 导入 ")]),_:1})])]}),_:1},8,["state","client"]),q($t,{modelValue:m.value,"onUpdate:modelValue":v[14]||(v[14]=C=>m.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Jt,null,{default:it(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:h.value,"onUpdate:modelValue":v[12]||(v[12]=C=>h.value=C),onKeyup:v[13]||(v[13]=se(C=>W(n).length>0&&W(a).autoPost({msg:"$cheat",type:"card",cardt:W(n)[0].name}),["enter"]))},null,8,["density","modelValue"]),Q("div",wr,[(Y(!0),st(ft,null,bt(W(n),(C,z)=>(Y(),At(_t,{variant:"flat",class:Ut({enterSelect:z===0}),key:`GCChoice-${z}`,onClick:U=>W(a).autoPost({msg:"$cheat",type:"card",cardt:C.name})},{default:it(()=>[pt(rt(C.pinyin)+" "+rt(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q($t,{modelValue:p.value,"onUpdate:modelValue":v[17]||(v[17]=C=>p.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Jt,null,{default:it(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:i.value,"onUpdate:modelValue":v[15]||(v[15]=C=>i.value=C),onKeyup:v[16]||(v[16]=se(C=>{var z;return W(c).length>0&&W(a).autoPost({msg:"$cheat",type:"unit",units:[W(c)[0].name],place:((z=W(f))==null?void 0:z.selected.place)||0})},["enter"]))},null,8,["density","modelValue"]),Q("div",kr,[(Y(!0),st(ft,null,bt(W(c),(C,z)=>(Y(),At(_t,{variant:"flat",class:Ut({enterSelect:z===0}),key:`GUChoice-${z}`,onClick:U=>{var B;return W(a).autoPost({msg:"$cheat",type:"unit",units:[C.name],place:((B=W(f))==null?void 0:B.selected.place)||0})}},{default:it(()=>[pt(rt(C.pinyin)+" "+rt(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q($t,{modelValue:l.value,"onUpdate:modelValue":v[20]||(v[20]=C=>l.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Ve,null,{default:it(()=>[pt(" 导入 ")]),_:1}),q(Jt,null,{default:it(()=>[q(_r,{modelValue:y.value,"onUpdate:modelValue":v[18]||(v[18]=C=>y.value=C),accept:".SCTReplay"},null,8,["modelValue"])]),_:1}),q(He,null,{default:it(()=>[q(ve,{color:"primary",disabled:y.value.length!==1,onClick:v[19]||(v[19]=C=>A())},{default:it(()=>[pt(" 确定 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Sr as default};
