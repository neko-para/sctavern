import{aG as re,a1 as Ae,a4 as Se,aH as Ce,aI as jt,M as Bt,N as Yt,O as kt,P as at,R as W,Q as Y,U as Q,aJ as he,T as st,c as ft,h as q,aK as Ut,aL as it,K as dt,W as yt,L as pt,Y as St,aM as Ft,i as pe,u as Xt,r as wt,ar as Ee,F as Jt,f as Qt,s as me,l as Rt,H as Ie,g as ze,aN as Te,a as Oe,q as Be,J as Re,aO as ae,j as Ke,ax as ie,aP as se,a2 as We,aQ as De,aR as Pe}from"./index-5d61864d.js";import{P as ve,O as zt,B as ge,C as Ze,D as _e,H as te,F as ye,h as Ue,G as be,c as Fe,S as Le,f as Ne,T as Ge,U as je,M as $e,W as Me,e as Ve,X as Vt,N as oe,Y as Je,Q as He}from"./VOverlay-a53b9494.js";class qe{constructor(H,u,S=!1){this.pos=H,this.wrapper=u,this.observer=S}post(H){this.observer||this.wrapper.game.input({...H})}autoPost(H){this.post({...H,player:this.pos})}getPlayer(){return this.wrapper.game.player[this.pos]}}class le{constructor(){this.notify=[]}emit(H){this.notify.forEach(u=>u(H))}}class Ye{constructor(){this.server=new le,this.server.notify.push(()=>{this.loading||this.autoSave()}),this.game=new re({Pack:["核心"],Seed:1,Role:["白板"],Mutation:[],Pve:!1,PoolPack:Ae,ActivePack:Se,ActiveUnit:Ce.map(H=>H)},this.server),this.save={old:[jt.serialize(this.game)],new:[]},this.loading=!1,this.saveStateChanged=()=>{}}unbind(){this.game.$ignore$Server=new le}bind(){this.game.$ignore$Server=this.server,this.loading=!0,this.server.emit(this.game.getState()),this.loading=!1}init(H){this.unbind(),this.game=new re(H,this.server),this.save={old:[jt.serialize(this.game)],new:[]},this.saveStateChanged()}load(H){this.save=H,this.loadActive()}loadActive(){this.unbind(),this.game=jt.deserialize(this.save.old[this.save.old.length-1]),this.bind(),this.saveStateChanged()}undo(){this.save.old.length>1&&(this.save.new.push(this.save.old.pop()),this.loadActive())}redo(){this.save.new.length>0&&(this.save.old.push(this.save.new.pop()),this.loadActive())}getState(){return{canRedo:this.save.new.length>0,canUndo:this.save.old.length>1}}autoSave(){this.save.new=[],this.save.old.push(jt.serialize(this.game)),this.saveStateChanged()}}const Xe=["_acc"],mt=Bt({__name:"AutoButton",props:{variant:{default:"elevated"},accelerator:{default:null}},setup(K){const H=Yt();return(u,S)=>(Y(),kt(ve,{variant:K.variant,size:W(H).isMobile?"x-small":"large"},{default:at(()=>[Q("span",{_acc:K.accelerator?`[${K.accelerator}]`:""},[he(u.$slots,"default")],8,Xe)]),_:3},8,["variant","size"]))}}),Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAMAAAAcqPc3AAABiVBMVEUAAAAAAP8AgIAAVapAQIAzZpkrVYAkSZIgYJ8zZpkuXYsnYokwYI8tWpYrVZUpXI8kW5IsWI0pWpQoWI8nXZMsV5IpWpErW5InWZAnWJMrWpIoWZIpWpIoWpAqW5MpWpEoWZIrXJAqWpEoWpIoWZArW5IqWpAqWZEpW5AoWZIoW5EqWpIqWZApWpEpWpAoW5EoWpIpWpAoW5AqWZIqW5EpWZApW5EoWpAqWZEoWZEoW5ApWpIoWZEoW5EqWpApWZEpWpEoWpEpWpAoWpIqWZEqW5EpWpApW5AqWZIpWpEoWpAoW5EpWpEpW5EqWpEpW5EpW5EpWpIpW5EpWpEpWpEoWpAqWpEpWZIpWZEpWpEqWpApW5EpWpIpWpEpW5EoWpEpWpEpWpEpWpEoWZEpWpEpWpEpWZEpWpIpW5EqWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEoWpEpWZEpWpEpWpEpW5EpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpH///9iquSlAAAAgXRSTlMAAQIDBAUGBwgKCw0QERgZHB0fICEjJSouNDY/REdJSk1OT1JTVFVWV1laW1xdXl9gY2VnaGprbG1yc3d4eXp7fX+DhYaHiIqMkJGSlJWZo6mqtLu8vb6/wsPExcbHyMrMzs/Q0dLT1NbX2Nna3N7f4OPk5ebn6uzu7/Hz9/j5+vygaELFAAAAAWJLR0SCi7P/RAAAATRJREFUGBltwQc3QmEABuC3IknIyEhGqWyykln2zsgudclIiJIV4v3n7ndzTufgeZCn3y7Bf+a5hH9Uf3x91uAvu9/ib0OeNiiFAoHA/qENjXshSTjWAbBQsWuqHzOXb1LRDGCVQnTYTWYM7hAFP4BEoH2G5GNTgpw6I7ni2HlQodZXZh6n7J0/vHVGXz0MsPI3BwoBWHkiMe9Eoh2CNV26y7wDQ9IOoaWr6jXbPkHB5/jImJytECrUR5ODxgyFt8r+ibC6Agobb3sjzJFcV3RCoY7Sc3EWoxA7jw/xUg2hgymdtyRG4Vo/rb1nJ2SaOEeAVua0AYO8KQAwwKQOiJDMkjxVQXvHPqA4xWcp3EXZMmWukPTERBE8L7L1YHprcc4wu7CRulijbBSK2h4NclTdDRC+AT2KgPJ9IL5pAAAAAElFTkSuQmCC",tn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAfCAMAAADZe72GAAABQVBMVEUAAAD//wD//wD/qlW/v0DMzDPV1Svb20no0UbVv0DYxDvhwzzjxjnkyUPZzEDbzj3eyEPfykDbyEDcyj7fx0DgyT7hyzzbzELgxz7byjveyTzgyz7gxz3cyDzdyUDeyz3cyj7eyT/eyj7fyj3fx0DgyD/cyT7fykDgyz/fyD3fyT3eyj7eyj3fyT7fyj3eyT7fyD/dyj/eyT3fyD7dyT3fyT/dyj7dyD3eyT7fyT7eyj7eyT3eyT7eyD/fyT7fyT3eyT7dyT7dyT/eyT7eyT7eyT3eyT7eyj7eyD3eyT7eyT3eyD7eyT7eyT/eyT7eyT7eyT7eyT7fyT3eyT7eyT3dyT7eyj7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7///8gDrLIAAAAaXRSTlMAAQIDBAUGBwsMDRESExQVFxgcHSAhIiMpKy8xMjM0Njo9Pj9AQUJISU9QVlxfYGNmaWxvcXZ4eXt/i5Kco6Wmqq6vsrS3uLq7wcPJztDT1trb3N/g5OXn6Orr7PDx8vP09vj5+vv8/f6Lin9bAAAAAWJLR0RqJWKVDgAAAP9JREFUGBldwQc7QgEAhtG3CGWUSLKbCNmSEdmR2SCblu///wFX6tF1DgxaMfNHMAukMAvWvJgEtYtJSJqnVUh69dEiJCnr4k9Iyq/MUudzAWEpAUMdGLov2iEsbcBExoPhYQHCUgqsHzd2IHcEEakyiqOsBFAogL8kFTdPpJwFx2cJsK1VZdhZ6iWuZ6CnPy7DFpZYRddgL76NP8mQuZO0B+4vRU/VtAhMTluO1VB2wtwYUyU1JMHxWL2tqaE6AstqsQ0cyJA7LMtw2QVcSUp2si4p78HwLp3bICDlvPx4UWUYiOnMSV1W+4A1vdrGr7SigMdNU0J9mAzc888MJt/I0kvypbVLxQAAAABJRU5ErkJggg==",en="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAMAAABrajdMAAAB4FBMVEUAAAD/AP+AAICAQICZM5mAK4CSJJKAIJ+OHI6AM5mLLouAK5WJJ4mAJJKHLZaOK46GKJSMJoyGJJKFLJCFKY+JJ5OEJo6JJJKIK5GMKZSLJ5OHK46KKZGGKJSJJ5CGJpOJLI+GK5KIKo6FKZGIKJOLJ5CIK5KHKpKKKY+HK5CJK5KGKpCJKZKIKJGGJ5OKKpKIKZCKKJKHKI+HKZKHKJKHK5GIKpOKKJCIKJKJK5CIKpGJKJKHKJCHKZCIKJGJKpKIKpCJKZGIKZCHKJGIKpKIKZKIKZGJKJCIKZGJKZKIKJGIKpGIKZGHKZKIKpCJKZGIKZKJKZGIKpCHKZGIKJKHKpGIKpGIKJGJKpKIKpGIKZGHKJCHKpKIKZGJKZGIKJCJKpGIKZGIKZGIKJGHKZGIKZKIKZGIKpGIKZGJKZKIKZGIKJGIKZCIKZGJKJGIKpKIKJCIKpGIKZKIKZGJKpCIKZGJKZKIKZGIKJGIKZCIKZKIKZGIKZGIKZGIKZGIKZGIKZGIKZKIKZGIKpGIKZGIKZGHKZGIKZGIKJGIKZGIKZGIKZGIKJCIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZH///8QAlFtAAAAnnRSTlMAAQIEBQYHCAkKCwwNDhESExQVFxkaGxweHyEkJSYnKCkqKywtLi8xMjU2Nzg6Oz0+P0BERkhJTE1OT1JTV1pbXF1eZmdpa2xvcHJ0dnd6e3x9gYSFhoeLjI2OkZOWl5iZnJ2eoKGjpaeoqautrre4vb6/wcTFxsnKy83O0tbY2drb3N3e3+Dh4+Tm5+nq6+zt7vDx8/T29/n6+/z9/ohh8dsAAAABYktHRJ/otZOdAAABlElEQVQYGW3BiVuLAQDH8d/aotiGvM7S4ajJFcnRtCiRtbByLJIVQ1RDJiTLkavNkWzW2vdvtbee8Xoen48samr1X7aRe25Zudr6boeaHdqQiRsq119O7yS8OaIJnhfvDsjC8Yi5Y3oGFzb/MrTME4qOle9lWJvS2dNV++mSad0oMC4HqZ5J4lI/I3aXpKaGfa2xzOVBloyN5nhS1qI8o1+rM/yR8V480S2pZnaxvQOINm9tuA8kbe6ZgF2lr+ZeAtl2mXqBhzOcbFKo16lxCGpbNHF3lf0tEP9ZEVHdzlvGez6vcH8CgroBWVdl15AUI29A3bw+9S6sq0DP9ZxHO+b95+GcHhDQpcOKYXosdbQUlYFfEcKqkhfTgkfyGU+nYUjHWQjWd6YwXZFUUs9ElGSxBil4sVJ5BxJuZ46zKoqw7IMhU8VwYyf82CW1fiHv+3YtsfnamL2TTh6S1vqn+FqngvXfquVjcWCjpNpKFazRwRIZQPpmtSz29G2R4xp5H4/KqjExnwKmzpTqX+5AOBL0yOo3LpiexziX8A0AAAAASUVORK5CYII=",nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAAAmJLR0QA/4ePzL8AAAImSURBVDjLhZRNSFVREMdPlNGiTYWFm77EKErEVUgLIUWqRYvAIDLRO7+5+jT7AAmqjSDlppIwKItaWFFpaGXLhFYVJD2KzBZKRfaNditFK3RavPte7/kUz2z+cH5zZs6cmeNc2tJierXdz3ZzLd1IN4Zh/KGVFbOC/kquMRmiMQvkaMWidDBDD/IrBYzboJSmoFLEqxnBuD1gg3POudL53MJ4xpqqnJiLdvnZXh5vMUwv+1myhUkmpMo5V71a8ulngFppZATDeC31NDGKYUQ5pC2Y3IgsoczxlVPVyznG2KxJDMg2LSRK4AgwvuB7a7kzAzhOg7+ejlhtHAHv+IQR1UKvRPuSUbktm6SR8XghHQHH/Sx+YhgdVTkcCDN/zlbdy1CS83dHwFBlJo8TYU/IKm0h4hXwCMPo8fKk/j9sDDMVwmMYH70CamNvqW2yX+u0MBmO26ifwXmMCGcxjH4txrgqF6fBcoT3GGVeHkaEcxhGJ0+ZYhcT02A/l3KM3/RiRPRCPJrel7tJF9Qz2obRKYcT6US4lNAPE2rEEUijn8FgylNEuJLQn3mRBDOmu4mmwtoWqknJl9Oh/ub8zfIkCWtmBMPneryby5fJGwyjW9c559w8yvkQ1mSp1mAINxMX/IFpn1eS1P41i2liAtOT7MC0ImwdwxjWuoYF6aOVre3h+fu0C8P4S2tl5qxDK0W8xNjDPYweP3eOz6B0odTrdpp1Z/reP9LLBjo3QdHHAAAAAElFTkSuQmCC",rn={T:Qe,P:tn,Z:en,N:nn},an={class:"raceIconRoot align-center justify-center"},sn=["src"],Lt=Bt({__name:"RaceIcon",props:{race:null},setup(K){return(H,u)=>(Y(),st("div",an,[Q("img",{src:W(rn)[K.race]},null,8,sn)]))}});const on={class:"d-flex"},ln={class:"Label ml-1"},un={class:"Label ml-auto mr-1"},cn={class:"d-flex mt-auto"},ue=Bt({__name:"StoreItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=ft(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.store[H.place])||null}),S=ft(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.selected)||{area:"none",place:-1}}),b={enter:"购买",combine:"三连",stage:"暂存"},s=ft(()=>S.value.area==="store"&&S.value.place===H.place);return(a,r)=>{var o,h,_;return Y(),kt(zt,{class:Ft(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)&&!((o=W(u))!=null&&o.special),special:!!((h=W(u))!=null&&h.special)}]),color:W(u)&&((_=H.state.player[H.client.pos])!=null&&_.locked)?"cyan":"",onClick:r[0]||(r[0]=m=>K.client.autoPost(W(u)?{msg:"$select",area:"store",place:K.place}:{msg:"$select",area:"none",place:-1}))},{default:at(()=>{var m;return[W(u)?(Y(),st(dt,{key:0},[Q("div",on,[q(Lt,{race:W(Ut)[W(u).card].race},null,8,["race"]),Q("span",ln,it(W(u).card),1),Q("span",un,it(W(Ut)[W(u).card].level),1)]),Q("div",cn,[(Y(!0),st(dt,null,yt(((m=W(u))==null?void 0:m.actions)||[],(f,n)=>(Y(),kt(mt,{variant:"text",key:`SA-${n}`,disabled:!f.enable,onClick:p=>K.client.post(f.msg)},{default:at(()=>[pt(it(b[f.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):St("",!0)]}),_:1},8,["color","class"])}}}),dn={class:"d-flex"},fn={class:"Label ml-1"},hn={class:"Label ml-auto mr-1"},pn={class:"d-flex mt-auto"},ce=Bt({__name:"HandItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=ft(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.hand[H.place])||null}),S=ft(()=>{var a;return((a=H.state.player[H.client.pos])==null?void 0:a.selected)||{area:"none",place:-1}}),b={enter:"进场",combine:"三连",sell:"出售"},s=ft(()=>S.value.area==="hand"&&S.value.place===H.place);return(a,r)=>(Y(),kt(zt,{class:Ft(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)}]),onClick:r[0]||(r[0]=o=>K.client.autoPost(W(u)?{msg:"$select",area:"hand",place:K.place}:{msg:"$select",area:"none",place:-1}))},{default:at(()=>{var o;return[W(u)?(Y(),st(dt,{key:0},[Q("div",dn,[q(Lt,{race:W(Ut)[W(u).card].race},null,8,["race"]),Q("span",fn,it(W(u).card),1),Q("span",hn,it(W(Ut)[W(u).card].level),1)]),Q("div",pn,[(Y(!0),st(dt,null,yt(((o=W(u))==null?void 0:o.actions)||[],(h,_)=>(Y(),kt(mt,{variant:"text",key:`HA-${_}`,disabled:!h.enable,onClick:m=>K.client.post(h.msg)},{default:at(()=>[pt(it(b[h.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):St("",!0)]}),_:1},8,["class"]))}}),mn={class:"d-flex flex-column"},Pt=Bt({__name:"AutoSpan",props:{text:null},setup(K){return(H,u)=>(Y(),st("div",mn,[(Y(!0),st(dt,null,yt(K.text,(S,b)=>(Y(),st("div",{class:"d-flex flex-column ASRow",key:`S-${b}`},[(Y(!0),st(dt,null,yt(S.split(`
`),(s,a)=>(Y(),st("span",{class:"Info",key:`SS-${b}-${a}`},it(s),1))),128))]))),128))]))}});const Zt=pe()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ge({origin:"center center",scrollStrategy:"block",transition:{component:Ze},zIndex:2400})},emits:{"update:modelValue":K=>!0},setup(K,H){let{slots:u}=H;const S=Xt(K,"modelValue"),{scopeId:b}=_e(),s=wt();function a(o){var h,_;const m=o.relatedTarget,f=o.target;if(m!==f&&(h=s.value)!=null&&h.contentEl&&(_=s.value)!=null&&_.globalTop&&![document,s.value.contentEl].includes(f)&&!s.value.contentEl.contains(f)){const n=[...s.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(c=>!c.hasAttribute("disabled")&&!c.matches('[tabindex="-1"]'));if(!n.length)return;const p=n[0],i=n[n.length-1];m===p?i.focus():p.focus()}}Ee&&Jt(()=>S.value&&K.retainFocus,o=>{o?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0}),Jt(S,async o=>{if(await me(),o){var h;(h=s.value.contentEl)==null||h.focus({preventScroll:!0})}else{var _;(_=s.value.activatorEl)==null||_.focus({preventScroll:!0})}});const r=ft(()=>Rt({"aria-haspopup":"dialog","aria-expanded":String(S.value)},K.activatorProps));return Qt(()=>{const[o]=ye(K);return q(be,Rt({ref:s,class:["v-dialog",{"v-dialog--fullscreen":K.fullscreen,"v-dialog--scrollable":K.scrollable}]},o,{modelValue:S.value,"onUpdate:modelValue":h=>S.value=h,"aria-role":"dialog","aria-modal":"true",activatorProps:r.value},b),{activator:u.activator,default:function(){for(var h,_=arguments.length,m=new Array(_),f=0;f<_;f++)m[f]=arguments[f];return q(Ue,{root:!0},{default:()=>[(h=u.default)==null?void 0:h.call(u,...m)]})}})}),te({},s)}});const vn=pe()({name:"VTooltip",props:{id:String,text:String,...Ie(ge({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":K=>!0},setup(K,H){let{slots:u}=H;const S=Xt(K,"modelValue"),{scopeId:b}=_e(),s=ze(),a=ft(()=>K.id||`v-tooltip-${s}`),r=wt(),o=ft(()=>K.location.split(" ").length>1?K.location:K.location+" center"),h=ft(()=>K.origin==="auto"||K.origin==="overlap"||K.origin.split(" ").length>1||K.location.split(" ").length>1?K.origin:K.origin+" center"),_=ft(()=>K.transition?K.transition:S.value?"scale-transition":"fade-transition"),m=ft(()=>Rt({"aria-describedby":a.value},K.activatorProps));return Qt(()=>{const[f]=ye(K);return q(be,Rt({ref:r,class:["v-tooltip"],id:a.value},f,{modelValue:S.value,"onUpdate:modelValue":n=>S.value=n,transition:_.value,absolute:!0,location:o.value,origin:h.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:m.value,_disableGlobalStack:!0},b),{activator:u.activator,default:function(){for(var n,p=arguments.length,i=new Array(p),c=0;c<p;c++)i[c]=arguments[c];return((n=u.default)==null?void 0:n.call(u,...i))??K.text}})}),te({},r)}}),gn={class:"d-flex flex-column DescCol overflow-y-auto"},_n={class:"Label"},yn={class:"d-flex"},bn={class:"Label"},wn={class:"Label ml-auto"},kn={class:"d-flex flex-column mt-2 overflow-y-auto"},xn={class:"d-flex flex-column UnitCol"},An={class:"Label"},Sn={class:"d-flex flex-column UpgrCol"},Cn={class:"Label"},En={class:"d-flex"},In={class:"Label"},zn={class:"d-flex"},Tn={class:"Label"},On={class:"Label ml-auto mr-1"},Bn={class:"d-flex flex-column mt-auto"},Rn={key:0,class:"d-flex justify-space-between Info"},Kn={class:"d-flex flex-column"},Wn={class:"d-flex flex-column justify-end"},Dn={class:"d-flex justify-space-between"},Pn={class:"d-flex flex-column"},Zn={class:"Info"},Un={key:1,class:"mt-auto"},Fn={class:"d-flex"},Ln=Bt({__name:"PresentItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=Yt(),S=ft(()=>{var m;return((m=H.state.player[H.client.pos])==null?void 0:m.present[H.place])||null}),b=ft(()=>{var f,n;const m=((n=(f=S.value)==null?void 0:f.card)==null?void 0:n.color)||"normal";return m!=="normal"?m==="gold"?"yellow":m:""}),s=ft(()=>{var m;return((m=H.state.player[H.client.pos])==null?void 0:m.selected)||{area:"none",place:-1}}),a={upgrade:"升级",sell:"出售",insert:"这里",deploy:"这里"},r=wt(!1);function o(m){const f={};return m.forEach(n=>{f[n]=(f[n]??0)+1}),Object.keys(f).map(n=>`${n}	${f[n]}`)}const h=ft(()=>{var m,f;return o(((f=(m=S.value)==null?void 0:m.card)==null?void 0:f.units)||[])}),_=ft(()=>s.value.area==="present"&&s.value.place===H.place);return(m,f)=>(Y(),kt(zt,{class:Ft(["d-flex flex-column align-self-start PresCard",{selected:W(_),unselected:!W(_)}]),color:W(b),onClick:f[2]||(f[2]=n=>{var p;return K.client.autoPost((p=W(S))!=null&&p.card?{msg:"$select",area:"present",place:K.place}:{msg:"$select",area:"none",place:-1})})},{default:at(()=>[W(S)?(Y(),st(dt,{key:0},[W(S).card?(Y(),st(dt,{key:0},[q(Zt,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=n=>r.value=n),class:"w-75"},{default:at(()=>[q(zt,{class:"d-flex flex-row InfoCard pa-2 justify-space-between"},{default:at(()=>[Q("div",gn,[Q("span",_n,it(W(S).card.name),1),Q("div",yn,[q(Lt,{race:W(S).card.race},null,8,["race"]),Q("span",bn,it(W(S).card.level),1),Q("span",wn,it(W(S).card.value),1)]),Q("div",kn,[q(Pt,{text:W(S).card.descs},null,8,["text"]),q(Pt,{class:"mt-2",text:W(S).card.notes},null,8,["text"])])]),Q("div",xn,[Q("span",An," 单位 "+it(W(S).card.units.length)+" / "+it(W(S).card.config.MaxUnit),1),q(Pt,{class:"overflow-y-auto",text:W(h)},null,8,["text"])]),Q("div",Sn,[Q("span",Cn," 升级 "+it(W(S).card.upgrades.length)+" / "+it(W(S).card.config.MaxUpgrade),1),q(Pt,{text:W(S).card.upgrades},null,8,["text"])])]),_:1})]),_:1},8,["modelValue"]),Q("div",En,[q(mt,{variant:"text",onClick:f[1]||(f[1]=n=>r.value=!0)},{default:at(()=>[pt(" 信息 ")]),_:1})]),Q("span",In,it(W(S).card.name),1),Q("div",zn,[q(Lt,{race:W(S).card.race},null,8,["race"]),Q("span",Tn,it(W(S).card.level),1),Q("span",On,it(W(S).card.value),1)]),q(Pt,{text:W(S).card.notes},null,8,["text"]),Q("div",Bn,[W(u).isMobile?St("",!0):(Y(),st("div",Rn,[Q("div",Kn,[(Y(!0),st(dt,null,yt(W(h).slice(0,5),(n,p)=>(Y(),st("span",{key:`Unit-${p}`},it(n),1))),128))]),Q("div",Wn,[(Y(!0),st(dt,null,yt(W(S).card.upgrades,(n,p)=>(Y(),st("span",{key:`Upgrade-${p}`},it(n),1))),128))])])),Q("div",Dn,[q(vn,{location:"top"},{activator:at(({props:n})=>[Q("span",Rt({class:"Info"},n),it(W(S).card.units.length)+" / "+it(W(S).card.config.MaxUnit),17)]),default:at(()=>[Q("div",Pn,[(Y(!0),st(dt,null,yt(W(h),(n,p)=>(Y(),st("span",{class:"Info",key:`UnitTip-${p}`},it(n),1))),128))])]),_:1}),Q("span",Zn,it(W(S).card.upgrades.length)+" / "+it(W(S).card.config.MaxUpgrade),1)])])],64)):(Y(),st("div",Un)),Q("div",Fn,[(Y(!0),st(dt,null,yt(W(S).actions||[],(n,p)=>(Y(),kt(mt,{variant:"text",key:`PA-${p}`,disabled:!n.enable,onClick:i=>K.client.post(n.msg)},{default:at(()=>[pt(it(a[n.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):St("",!0)]),_:1},8,["color","class"]))}});const Nn={key:0,class:"d-flex"},Gn={class:"Label ml-1"},jn={class:"Label ml-auto mr-1"},$n={key:1,class:"Label"},Mn={key:2,class:"Label"},Vn={key:3,class:"Label"},de=Bt({__name:"DiscoverItem",props:{state:null,client:null,place:null},setup(K){const H=K,u=ft(()=>{var S,b;return((b=(S=H.state.player[H.client.pos])==null?void 0:S.discover)==null?void 0:b.item[H.place])||null});return(S,b)=>(Y(),kt(zt,{class:"d-flex flex-column align-self-start KeyCard",onClick:b[0]||(b[0]=s=>K.client.autoPost({msg:"$choice",category:"discover",place:K.place}))},{default:at(()=>[W(u)?(Y(),st(dt,{key:0},[W(u).type==="card"?(Y(),st("div",Nn,[q(Lt,{race:W(u).card.race},null,8,["race"]),Q("span",Gn,it(W(u).card.name),1),Q("span",jn,it(W(u).card.level),1)])):W(u).type==="upgrade"?(Y(),st("span",$n,it(W(u).upgrade.name),1)):W(u).type==="prophesy"?(Y(),st("span",Mn,it(W(u).prophesy.name),1)):(Y(),st("span",Vn,it(W(u).str),1))],64)):St("",!0)]),_:1}))}}),Jn={class:"d-flex flex-column justify-center"},Hn={class:"d-flex"},qn={class:"ml-auto"},Yn=Q("hr",null,null,-1),Xn={key:0,class:"d-flex"},Qn={class:"d-flex flex-column"},tr={class:"Info"},er={class:"Info"},nr={class:"HandContainer"},rr={class:"ml-1"},ar={class:"d-flex flex-column"},ir={class:"StoreContainer"},sr={class:"mt-1"},or={key:0,class:"mt-1"},lr={key:0,class:"d-flex mt-1 DiscoverContainer"},ur={class:"mt-1"},cr={key:0,class:"mt-1 mb-1"},dr={class:"d-flex mt-auto mb-1"},fr={class:"PresentContainer"},hr=Bt({__name:"GameInstance",props:{state:null,client:null},setup(K){const H=K,u=ft(()=>H.state.player[H.client.pos]),S=ft(()=>{var r;const a=(r=u.value)==null?void 0:r.role;return{upgrade:"升级",refresh:"刷新",lock:"锁定",unlock:"解锁",finish:"结束",ability:a?a.ability+(a.progress?a.progress.max===-1?` ${a.progress.cur}`:` ${a.progress.cur} / ${a.progress.max}`:""):"魂姿"}}),b=wt(!0),s=wt(!1);return(a,r)=>{var o,h,_,m,f,n,p,i,c,l,y,x,k,v,C,z,U,B,F,X,w,D;return Y(),st("div",Jn,[q(Zt,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=e=>s.value=e),class:"w-50"},{default:at(()=>[q(zt,{class:"d-flex flex-column"},{default:at(()=>{var e;return[(Y(!0),st(dt,null,yt(((e=W(u))==null?void 0:e.role.record)||[],(O,nt)=>(Y(),st("span",{class:"Info ma-4",key:`RI-${nt}`},it(O),1))),128))]}),_:1})]),_:1},8,["modelValue"]),Q("div",Hn,[q(zt,{class:"ControlPanel d-flex flex-column"},{default:at(()=>[Q("div",qn,[q(mt,{variant:"flat",onClick:r[1]||(r[1]=e=>b.value=!b.value)},{default:at(()=>[pt(" 菜单 ")]),_:1})]),b.value?(Y(),st(dt,{key:0},[Yn,b.value?(Y(),st("div",Xn,[he(a.$slots,"default")])):St("",!0)],64)):St("",!0)]),_:3}),Q("div",Qn,[Q("span",tr," 回合 "+it(K.state.round)+" 等级 "+it((o=W(u))==null?void 0:o.level)+" 生命 "+it((h=W(u))==null?void 0:h.life)+" 价值 "+it((_=W(u))==null?void 0:_.present.map(e=>{var O;return((O=e.card)==null?void 0:O.value)??0}).reduce((e,O)=>e+O,0)),1),Q("span",er," 升级 "+it((m=W(u))==null?void 0:m.upgrade_cost)+" 晶矿 "+it((f=W(u))==null?void 0:f.mineral)+" / "+it((n=W(u))==null?void 0:n.mineral_max)+" 瓦斯 "+it((p=W(u))==null?void 0:p.gas)+" / "+it((i=W(u))==null?void 0:i.gas_max),1),Q("div",nr,[Q("div",null,[(Y(),st(dt,null,yt(3,e=>q(ce,{class:"mt-1",key:`Hand${e-1}`,state:K.state,client:K.client,place:e-1},null,8,["state","client","place"])),64))]),Q("div",rr,[(Y(),st(dt,null,yt(3,e=>q(ce,{class:"mt-1",key:`Hand${e+2}`,state:K.state,client:K.client,place:e+2},null,8,["state","client","place"])),64))])])]),Q("div",ar,[Q("div",ir,[Q("div",sr,[(Y(!0),st(dt,null,yt(((c=W(u))==null?void 0:c.store.slice(0,3))||[],(e,O)=>(Y(),kt(ue,{class:"ml-2",key:`Store${O}`,state:K.state,client:K.client,place:O},null,8,["state","client","place"]))),128))]),(((l=W(u))==null?void 0:l.store.length)??0)>3?(Y(),st("div",or,[(Y(!0),st(dt,null,yt(((y=W(u))==null?void 0:y.store.slice(3))||[],(e,O)=>(Y(),kt(ue,{class:"ml-2",key:`Store${O+3}`,state:K.state,client:K.client,place:O+3},null,8,["state","client","place"]))),128))])):St("",!0)]),((x=W(u))==null?void 0:x.status)==="discover"&&W(u).discover?(Y(),st("div",lr,[Q("div",ur,[(Y(!0),st(dt,null,yt(((v=(k=W(u))==null?void 0:k.discover)==null?void 0:v.item.slice(0,4))||[],(e,O)=>(Y(),kt(de,{class:"ml-2",key:`Discover${O}`,state:K.state,client:K.client,place:O},null,8,["state","client","place"]))),128))]),((z=(C=W(u))==null?void 0:C.discover)==null?void 0:z.item.length)>3||W(u).discover.extra?(Y(),st("div",cr,[(Y(!0),st(dt,null,yt(((B=(U=W(u))==null?void 0:U.discover)==null?void 0:B.item.slice(4))||[],(e,O)=>(Y(),kt(de,{class:"ml-2",key:`Discover${O+3}`,state:K.state,client:K.client,place:O+3},null,8,["state","client","place"]))),128)),(X=(F=W(u))==null?void 0:F.discover)!=null&&X.extra?(Y(),kt(mt,{key:0,class:"ml-2",onClick:r[2]||(r[2]=e=>K.client.autoPost({msg:"$choice",category:"discover",place:-1}))},{default:at(()=>{var e,O;return[pt(it((O=(e=W(u))==null?void 0:e.discover)==null?void 0:O.extra),1)]}),_:1})):St("",!0)])):St("",!0)])):St("",!0),Q("div",dr,[(Y(!0),st(dt,null,yt(((w=W(u))==null?void 0:w.action)||[],(e,O)=>{var nt;return Y(),kt(mt,{class:"ml-2",variant:"elevated",key:`GA-${O}`,disabled:!e.enable,onClick:N=>K.client.post(e.msg),color:e.msg.msg==="$ability"&&((nt=W(u))!=null&&nt.role.enhance)?"red":e.msg.msg==="$refresh"&&e.special?"green":""},{default:at(()=>[pt(it(W(S)[e.action]),1)]),_:2},1032,["disabled","onClick","color"])}),128)),(D=W(u))!=null&&D.role.record&&W(u).role.record.length>0?(Y(),kt(mt,{key:0,class:"ml-2",variant:"elevated",onClick:r[3]||(r[3]=e=>s.value=!0)},{default:at(()=>[pt("信息")]),_:1})):St("",!0)])])]),Q("div",fr,[(Y(),st(dt,null,yt(7,e=>q(Ln,{class:"mt-1",key:`Present${e-1}`,state:K.state,client:K.client,place:e-1},null,8,["state","client","place"])),64))])])}}});var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $t(K){throw new Error('Could not dynamically require "'+K+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ht={},pr={get exports(){return Ht},set exports(K){Ht=K}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(K,H){(function(u){K.exports=u()})(function(){return function u(S,b,s){function a(h,_){if(!b[h]){if(!S[h]){var m=typeof $t=="function"&&$t;if(!_&&m)return m(h,!0);if(r)return r(h,!0);var f=new Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f}var n=b[h]={exports:{}};S[h][0].call(n.exports,function(p){var i=S[h][1][p];return a(i||p)},n,n.exports,u,S,b,s)}return b[h].exports}for(var r=typeof $t=="function"&&$t,o=0;o<s.length;o++)a(s[o]);return a}({1:[function(u,S,b){var s=u("./utils"),a=u("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(o){for(var h,_,m,f,n,p,i,c=[],l=0,y=o.length,x=y,k=s.getTypeOf(o)!=="string";l<o.length;)x=y-l,m=k?(h=o[l++],_=l<y?o[l++]:0,l<y?o[l++]:0):(h=o.charCodeAt(l++),_=l<y?o.charCodeAt(l++):0,l<y?o.charCodeAt(l++):0),f=h>>2,n=(3&h)<<4|_>>4,p=1<x?(15&_)<<2|m>>6:64,i=2<x?63&m:64,c.push(r.charAt(f)+r.charAt(n)+r.charAt(p)+r.charAt(i));return c.join("")},b.decode=function(o){var h,_,m,f,n,p,i=0,c=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var y,x=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===r.charAt(64)&&x--,o.charAt(o.length-2)===r.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|x):new Array(0|x);i<o.length;)h=r.indexOf(o.charAt(i++))<<2|(f=r.indexOf(o.charAt(i++)))>>4,_=(15&f)<<4|(n=r.indexOf(o.charAt(i++)))>>2,m=(3&n)<<6|(p=r.indexOf(o.charAt(i++))),y[c++]=h,n!==64&&(y[c++]=_),p!==64&&(y[c++]=m);return y}},{"./support":30,"./utils":32}],2:[function(u,S,b){var s=u("./external"),a=u("./stream/DataWorker"),r=u("./stream/Crc32Probe"),o=u("./stream/DataLengthProbe");function h(_,m,f,n,p){this.compressedSize=_,this.uncompressedSize=m,this.crc32=f,this.compression=n,this.compressedContent=p}h.prototype={getContentWorker:function(){var _=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),m=this;return _.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(_,m,f){return _.pipe(new r).pipe(new o("uncompressedSize")).pipe(m.compressWorker(f)).pipe(new o("compressedSize")).withStreamInfo("compression",m)},S.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,S,b){var s=u("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},b.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,S,b){var s=u("./utils"),a=function(){for(var r,o=[],h=0;h<256;h++){r=h;for(var _=0;_<8;_++)r=1&r?3988292384^r>>>1:r>>>1;o[h]=r}return o}();S.exports=function(r,o){return r!==void 0&&r.length?s.getTypeOf(r)!=="string"?function(h,_,m,f){var n=a,p=f+m;h^=-1;for(var i=f;i<p;i++)h=h>>>8^n[255&(h^_[i])];return-1^h}(0|o,r,r.length,0):function(h,_,m,f){var n=a,p=f+m;h^=-1;for(var i=f;i<p;i++)h=h>>>8^n[255&(h^_.charCodeAt(i))];return-1^h}(0|o,r,r.length,0):0}},{"./utils":32}],5:[function(u,S,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(u,S,b){var s=null;s=typeof Promise<"u"?Promise:u("lie"),S.exports={Promise:s}},{lie:37}],7:[function(u,S,b){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=u("pako"),r=u("./utils"),o=u("./stream/GenericWorker"),h=s?"uint8array":"array";function _(m,f){o.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=f,this.meta={}}b.magic="\b\0",r.inherits(_,o),_.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(h,m.data),!1)},_.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(f){m.push({data:f,meta:m.meta})}},b.compressWorker=function(m){return new _("Deflate",m)},b.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,S,b){function s(n,p){var i,c="";for(i=0;i<p;i++)c+=String.fromCharCode(255&n),n>>>=8;return c}function a(n,p,i,c,l,y){var x,k,v=n.file,C=n.compression,z=y!==h.utf8encode,U=r.transformTo("string",y(v.name)),B=r.transformTo("string",h.utf8encode(v.name)),F=v.comment,X=r.transformTo("string",y(F)),w=r.transformTo("string",h.utf8encode(F)),D=B.length!==v.name.length,e=w.length!==F.length,O="",nt="",N="",ot=v.dir,G=v.date,rt={crc32:0,compressedSize:0,uncompressedSize:0};p&&!i||(rt.crc32=n.crc32,rt.compressedSize=n.compressedSize,rt.uncompressedSize=n.uncompressedSize);var T=0;p&&(T|=8),z||!D&&!e||(T|=2048);var E=0,tt=0;ot&&(E|=16),l==="UNIX"?(tt=798,E|=function(M,vt){var xt=M;return M||(xt=vt?16893:33204),(65535&xt)<<16}(v.unixPermissions,ot)):(tt=20,E|=function(M){return 63&(M||0)}(v.dosPermissions)),x=G.getUTCHours(),x<<=6,x|=G.getUTCMinutes(),x<<=5,x|=G.getUTCSeconds()/2,k=G.getUTCFullYear()-1980,k<<=4,k|=G.getUTCMonth()+1,k<<=5,k|=G.getUTCDate(),D&&(nt=s(1,1)+s(_(U),4)+B,O+="up"+s(nt.length,2)+nt),e&&(N=s(1,1)+s(_(X),4)+w,O+="uc"+s(N.length,2)+N);var V="";return V+=`
\0`,V+=s(T,2),V+=C.magic,V+=s(x,2),V+=s(k,2),V+=s(rt.crc32,4),V+=s(rt.compressedSize,4),V+=s(rt.uncompressedSize,4),V+=s(U.length,2),V+=s(O.length,2),{fileRecord:m.LOCAL_FILE_HEADER+V+U+O,dirRecord:m.CENTRAL_FILE_HEADER+s(tt,2)+V+s(X.length,2)+"\0\0\0\0"+s(E,4)+s(c,4)+U+O+X}}var r=u("../utils"),o=u("../stream/GenericWorker"),h=u("../utf8"),_=u("../crc32"),m=u("../signature");function f(n,p,i,c){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=i,this.encodeFileName=c,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(f,o),f.prototype.push=function(n){var p=n.meta.percent||0,i=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,o.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:i?(p+100*(i-c-1))/i:100}}))},f.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var p=this.streamFiles&&!n.file.dir;if(p){var i=a(n,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(n){this.accumulate=!1;var p=this.streamFiles&&!n.file.dir,i=a(n,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),p)this.push({data:function(c){return m.DATA_DESCRIPTOR+s(c.crc32,4)+s(c.compressedSize,4)+s(c.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var n=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var i=this.bytesWritten-n,c=function(l,y,x,k,v){var C=r.transformTo("string",v(k));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(l,2)+s(l,2)+s(y,4)+s(x,4)+s(C.length,2)+C}(this.dirRecords.length,i,n,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(n){this._sources.push(n);var p=this;return n.on("data",function(i){p.processChunk(i)}),n.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),n.on("error",function(i){p.error(i)}),this},f.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(n){var p=this._sources;if(!o.prototype.error.call(this,n))return!1;for(var i=0;i<p.length;i++)try{p[i].error(n)}catch{}return!0},f.prototype.lock=function(){o.prototype.lock.call(this);for(var n=this._sources,p=0;p<n.length;p++)n[p].lock()},S.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,S,b){var s=u("../compressions"),a=u("./ZipFileWorker");b.generateWorker=function(r,o,h){var _=new a(o.streamFiles,h,o.platform,o.encodeFileName),m=0;try{r.forEach(function(f,n){m++;var p=function(y,x){var k=y||x,v=s[k];if(!v)throw new Error(k+" is not a valid compression method !");return v}(n.options.compression,o.compression),i=n.options.compressionOptions||o.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(p,i).withStreamInfo("file",{name:f,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(_)}),_.entriesCount=m}catch(f){_.error(f)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,S,b){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(s.prototype=u("./object")).loadAsync=u("./load"),s.support=u("./support"),s.defaults=u("./defaults"),s.version="3.10.1",s.loadAsync=function(a,r){return new s().loadAsync(a,r)},s.external=u("./external"),S.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,S,b){var s=u("./utils"),a=u("./external"),r=u("./utf8"),o=u("./zipEntries"),h=u("./stream/Crc32Probe"),_=u("./nodejsUtils");function m(f){return new a.Promise(function(n,p){var i=f.decompressed.getContentWorker().pipe(new h);i.on("error",function(c){p(c)}).on("end",function(){i.streamInfo.crc32!==f.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}S.exports=function(f,n){var p=this;return n=s.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),_.isNode&&_.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,n.optimizedBinaryString,n.base64).then(function(i){var c=new o(n);return c.load(i),c}).then(function(i){var c=[a.Promise.resolve(i)],l=i.files;if(n.checkCRC32)for(var y=0;y<l.length;y++)c.push(m(l[y]));return a.Promise.all(c)}).then(function(i){for(var c=i.shift(),l=c.files,y=0;y<l.length;y++){var x=l[y],k=x.fileNameStr,v=s.resolve(x.fileNameStr);p.file(v,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:n.createFolders}),x.dir||(p.file(v).unsafeOriginalName=k)}return c.zipComment.length&&(p.comment=c.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,S,b){var s=u("../utils"),a=u("../stream/GenericWorker");function r(o,h){a.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(r,a),r.prototype._bindStream=function(o){var h=this;(this._stream=o).pause(),o.on("data",function(_){h.push({data:_,meta:{percent:0}})}).on("error",function(_){h.isPaused?this.generatedError=_:h.error(_)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,S,b){var s=u("readable-stream").Readable;function a(r,o,h){s.call(this,o),this._helper=r;var _=this;r.on("data",function(m,f){_.push(m)||_._helper.pause(),h&&h(f)}).on("error",function(m){_.emit("error",m)}).on("end",function(){_.push(null)})}u("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},S.exports=a},{"../utils":32,"readable-stream":16}],14:[function(u,S,b){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(u,S,b){function s(v,C,z){var U,B=r.getTypeOf(C),F=r.extend(z||{},_);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(v=l(v)),F.createFolders&&(U=c(v))&&y.call(this,U,!0);var X=B==="string"&&F.binary===!1&&F.base64===!1;z&&z.binary!==void 0||(F.binary=!X),(C instanceof m&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",B="string");var w=null;w=C instanceof m||C instanceof o?C:p.isNode&&p.isStream(C)?new i(v,C):r.prepareContent(v,C,F.binary,F.optimizedBinaryString,F.base64);var D=new f(v,w,F);this.files[v]=D}var a=u("./utf8"),r=u("./utils"),o=u("./stream/GenericWorker"),h=u("./stream/StreamHelper"),_=u("./defaults"),m=u("./compressedObject"),f=u("./zipObject"),n=u("./generate"),p=u("./nodejsUtils"),i=u("./nodejs/NodejsStreamInputAdapter"),c=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var C=v.lastIndexOf("/");return 0<C?v.substring(0,C):""},l=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},y=function(v,C){return C=C!==void 0?C:_.createFolders,v=l(v),this.files[v]||s.call(this,v,null,{dir:!0,createFolders:C}),this.files[v]};function x(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var C,z,U;for(C in this.files)U=this.files[C],(z=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&v(z,U)},filter:function(v){var C=[];return this.forEach(function(z,U){v(z,U)&&C.push(U)}),C},file:function(v,C,z){if(arguments.length!==1)return v=this.root+v,s.call(this,v,C,z),this;if(x(v)){var U=v;return this.filter(function(F,X){return!X.dir&&U.test(F)})}var B=this.files[this.root+v];return B&&!B.dir?B:null},folder:function(v){if(!v)return this;if(x(v))return this.filter(function(B,F){return F.dir&&v.test(B)});var C=this.root+v,z=y.call(this,C),U=this.clone();return U.root=z.name,U},remove:function(v){v=this.root+v;var C=this.files[v];if(C||(v.slice(-1)!=="/"&&(v+="/"),C=this.files[v]),C&&!C.dir)delete this.files[v];else for(var z=this.filter(function(B,F){return F.name.slice(0,v.length)===v}),U=0;U<z.length;U++)delete this.files[z[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var C,z={};try{if((z=r.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");r.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var U=z.comment||this.comment||"";C=n.generateWorker(this,z,U)}catch(B){(C=new o("error")).error(B)}return new h(C,z.type||"string",z.mimeType)},generateAsync:function(v,C){return this.generateInternalStream(v).accumulate(C)},generateNodeStream:function(v,C){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(C)}};S.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,S,b){S.exports=u("stream")},{stream:void 0}],17:[function(u,S,b){var s=u("./DataReader");function a(r){s.call(this,r);for(var o=0;o<this.data.length;o++)r[o]=255&r[o]}u("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var o=r.charCodeAt(0),h=r.charCodeAt(1),_=r.charCodeAt(2),m=r.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===o&&this.data[f+1]===h&&this.data[f+2]===_&&this.data[f+3]===m)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var o=r.charCodeAt(0),h=r.charCodeAt(1),_=r.charCodeAt(2),m=r.charCodeAt(3),f=this.readData(4);return o===f[0]&&h===f[1]&&_===f[2]&&m===f[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./DataReader":18}],18:[function(u,S,b){var s=u("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var o,h=0;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)h=(h<<8)+this.byteAt(o);return this.index+=r,h},readString:function(r){return s.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},S.exports=a},{"../utils":32}],19:[function(u,S,b){var s=u("./Uint8ArrayReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,S,b){var s=u("./DataReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./DataReader":18}],21:[function(u,S,b){var s=u("./ArrayReader");function a(r){s.call(this,r)}u("../utils").inherits(a,s),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},S.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(u,S,b){var s=u("../utils"),a=u("../support"),r=u("./ArrayReader"),o=u("./StringReader"),h=u("./NodeBufferReader"),_=u("./Uint8ArrayReader");S.exports=function(m){var f=s.getTypeOf(m);return s.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new h(m):a.uint8array?new _(s.transformTo("uint8array",m)):new r(s.transformTo("array",m)):new o(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,S,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,S,b){var s=u("./GenericWorker"),a=u("../utils");function r(o){s.call(this,"ConvertWorker to "+o),this.destType=o}a.inherits(r,s),r.prototype.processChunk=function(o){this.push({data:a.transformTo(this.destType,o.data),meta:o.meta})},S.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(u,S,b){var s=u("./GenericWorker"),a=u("../crc32");function r(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(r,s),r.prototype.processChunk=function(o){this.streamInfo.crc32=a(o.data,this.streamInfo.crc32||0),this.push(o)},S.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,S,b){var s=u("../utils"),a=u("./GenericWorker");function r(o){a.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}s.inherits(r,a),r.prototype.processChunk=function(o){if(o){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+o.data.length}a.prototype.processChunk.call(this,o)},S.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(u,S,b){var s=u("../utils"),a=u("./GenericWorker");function r(o){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(_){h.dataIsReady=!0,h.data=_,h.max=_&&_.length||0,h.type=s.getTypeOf(_),h.isPaused||h._tickAndRepeat()},function(_){h.error(_)})}s.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,h);break;case"uint8array":o=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":o=this.data.slice(this.index,h)}return this.index=h,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(u,S,b){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var o=0;o<this._listeners[a].length;o++)this._listeners[a][o].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(o){r.processChunk(o)}),a.on("end",function(){r.end()}),a.on("error",function(o){r.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},S.exports=s},{}],29:[function(u,S,b){var s=u("../utils"),a=u("./ConvertWorker"),r=u("./GenericWorker"),o=u("../base64"),h=u("../support"),_=u("../external"),m=null;if(h.nodestream)try{m=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,i){return new _.Promise(function(c,l){var y=[],x=p._internalType,k=p._outputType,v=p._mimeType;p.on("data",function(C,z){y.push(C),i&&i(z)}).on("error",function(C){y=[],l(C)}).on("end",function(){try{var C=function(z,U,B){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",U),B);case"base64":return o.encode(U);default:return s.transformTo(z,U)}}(k,function(z,U){var B,F=0,X=null,w=0;for(B=0;B<U.length;B++)w+=U[B].length;switch(z){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(X=new Uint8Array(w),B=0;B<U.length;B++)X.set(U[B],F),F+=U[B].length;return X;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+z+"'")}}(x,y),v);c(C)}catch(z){l(z)}y=[]}).resume()})}function n(p,i,c){var l=i;switch(i){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=i,this._mimeType=c,s.checkSupport(l),this._worker=p.pipe(new a(l)),p.lock()}catch(y){this._worker=new r("error"),this._worker.error(y)}}n.prototype={accumulate:function(p){return f(this,p)},on:function(p,i){var c=this;return p==="data"?this._worker.on(p,function(l){i.call(c,l.data,l.meta)}):this._worker.on(p,function(){s.delay(i,arguments,c)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},p)}},S.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,S,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var s=new ArrayBuffer(0);try{b.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),b.blob=a.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!u("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(u,S,b){for(var s=u("./utils"),a=u("./support"),r=u("./nodejsUtils"),o=u("./stream/GenericWorker"),h=new Array(256),_=0;_<256;_++)h[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;h[254]=h[254]=1;function m(){o.call(this,"utf-8 decode"),this.leftOver=null}function f(){o.call(this,"utf-8 encode")}b.utf8encode=function(n){return a.nodebuffer?r.newBufferFrom(n,"utf-8"):function(p){var i,c,l,y,x,k=p.length,v=0;for(y=0;y<k;y++)(64512&(c=p.charCodeAt(y)))==55296&&y+1<k&&(64512&(l=p.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(l-56320),y++),v+=c<128?1:c<2048?2:c<65536?3:4;for(i=a.uint8array?new Uint8Array(v):new Array(v),y=x=0;x<v;y++)(64512&(c=p.charCodeAt(y)))==55296&&y+1<k&&(64512&(l=p.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(l-56320),y++),c<128?i[x++]=c:(c<2048?i[x++]=192|c>>>6:(c<65536?i[x++]=224|c>>>12:(i[x++]=240|c>>>18,i[x++]=128|c>>>12&63),i[x++]=128|c>>>6&63),i[x++]=128|63&c);return i}(n)},b.utf8decode=function(n){return a.nodebuffer?s.transformTo("nodebuffer",n).toString("utf-8"):function(p){var i,c,l,y,x=p.length,k=new Array(2*x);for(i=c=0;i<x;)if((l=p[i++])<128)k[c++]=l;else if(4<(y=h[l]))k[c++]=65533,i+=y-1;else{for(l&=y===2?31:y===3?15:7;1<y&&i<x;)l=l<<6|63&p[i++],y--;1<y?k[c++]=65533:l<65536?k[c++]=l:(l-=65536,k[c++]=55296|l>>10&1023,k[c++]=56320|1023&l)}return k.length!==c&&(k.subarray?k=k.subarray(0,c):k.length=c),s.applyFromCharCode(k)}(n=s.transformTo(a.uint8array?"uint8array":"array",n))},s.inherits(m,o),m.prototype.processChunk=function(n){var p=s.transformTo(a.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var i=p;(p=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),p.set(i,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var c=function(y,x){var k;for((x=x||y.length)>y.length&&(x=y.length),k=x-1;0<=k&&(192&y[k])==128;)k--;return k<0||k===0?x:k+h[y[k]]>x?k:x}(p),l=p;c!==p.length&&(a.uint8array?(l=p.subarray(0,c),this.leftOver=p.subarray(c,p.length)):(l=p.slice(0,c),this.leftOver=p.slice(c,p.length))),this.push({data:b.utf8decode(l),meta:n.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=m,s.inherits(f,o),f.prototype.processChunk=function(n){this.push({data:b.utf8encode(n.data),meta:n.meta})},b.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,S,b){var s=u("./support"),a=u("./base64"),r=u("./nodejsUtils"),o=u("./external");function h(i){return i}function _(i,c){for(var l=0;l<i.length;++l)c[l]=255&i.charCodeAt(l);return c}u("setimmediate"),b.newBlob=function(i,c){b.checkSupport("blob");try{return new Blob([i],{type:c})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(i),l.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(i,c,l){var y=[],x=0,k=i.length;if(k<=l)return String.fromCharCode.apply(null,i);for(;x<k;)c==="array"||c==="nodebuffer"?y.push(String.fromCharCode.apply(null,i.slice(x,Math.min(x+l,k)))):y.push(String.fromCharCode.apply(null,i.subarray(x,Math.min(x+l,k)))),x+=l;return y.join("")},stringifyByChar:function(i){for(var c="",l=0;l<i.length;l++)c+=String.fromCharCode(i[l]);return c},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function f(i){var c=65536,l=b.getTypeOf(i),y=!0;if(l==="uint8array"?y=m.applyCanBeUsed.uint8array:l==="nodebuffer"&&(y=m.applyCanBeUsed.nodebuffer),y)for(;1<c;)try{return m.stringifyByChunk(i,l,c)}catch{c=Math.floor(c/2)}return m.stringifyByChar(i)}function n(i,c){for(var l=0;l<i.length;l++)c[l]=i[l];return c}b.applyFromCharCode=f;var p={};p.string={string:h,array:function(i){return _(i,new Array(i.length))},arraybuffer:function(i){return p.string.uint8array(i).buffer},uint8array:function(i){return _(i,new Uint8Array(i.length))},nodebuffer:function(i){return _(i,r.allocBuffer(i.length))}},p.array={string:f,array:h,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(i)}},p.arraybuffer={string:function(i){return f(new Uint8Array(i))},array:function(i){return n(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:h,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(new Uint8Array(i))}},p.uint8array={string:f,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:h,nodebuffer:function(i){return r.newBufferFrom(i)}},p.nodebuffer={string:f,array:function(i){return n(i,new Array(i.length))},arraybuffer:function(i){return p.nodebuffer.uint8array(i).buffer},uint8array:function(i){return n(i,new Uint8Array(i.length))},nodebuffer:h},b.transformTo=function(i,c){if(c=c||"",!i)return c;b.checkSupport(i);var l=b.getTypeOf(c);return p[l][i](c)},b.resolve=function(i){for(var c=i.split("/"),l=[],y=0;y<c.length;y++){var x=c[y];x==="."||x===""&&y!==0&&y!==c.length-1||(x===".."?l.pop():l.push(x))}return l.join("/")},b.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":s.nodebuffer&&r.isBuffer(i)?"nodebuffer":s.uint8array&&i instanceof Uint8Array?"uint8array":s.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(i){if(!s[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(i){var c,l,y="";for(l=0;l<(i||"").length;l++)y+="\\x"+((c=i.charCodeAt(l))<16?"0":"")+c.toString(16).toUpperCase();return y},b.delay=function(i,c,l){setImmediate(function(){i.apply(l||null,c||[])})},b.inherits=function(i,c){function l(){}l.prototype=c.prototype,i.prototype=new l},b.extend=function(){var i,c,l={};for(i=0;i<arguments.length;i++)for(c in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],c)&&l[c]===void 0&&(l[c]=arguments[i][c]);return l},b.prepareContent=function(i,c,l,y,x){return o.Promise.resolve(c).then(function(k){return s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new o.Promise(function(v,C){var z=new FileReader;z.onload=function(U){v(U.target.result)},z.onerror=function(U){C(U.target.error)},z.readAsArrayBuffer(k)}):k}).then(function(k){var v=b.getTypeOf(k);return v?(v==="arraybuffer"?k=b.transformTo("uint8array",k):v==="string"&&(x?k=a.decode(k):l&&y!==!0&&(k=function(C){return _(C,s.uint8array?new Uint8Array(C.length):new Array(C.length))}(k))),k):o.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,S,b){var s=u("./reader/readerFor"),a=u("./utils"),r=u("./signature"),o=u("./zipEntry"),h=u("./support");function _(m){this.files=[],this.loadOptions=m}_.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(m)+")")}},isSignature:function(m,f){var n=this.reader.index;this.reader.setIndex(m);var p=this.reader.readString(4)===f;return this.reader.setIndex(n),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),f=h.uint8array?"uint8array":"array",n=a.transformTo(f,m);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,f,n,p=this.zip64EndOfCentralSize-44;0<p;)m=this.reader.readInt(2),f=this.reader.readInt(4),n=this.reader.readData(f),this.zip64ExtensibleData[m]={id:m,length:f,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,f;for(m=0;m<this.files.length;m++)f=this.files[m],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(m=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var f=m;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var p=f-n;if(0<p)this.isSignature(f,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,S,b){var s=u("./reader/readerFor"),a=u("./utils"),r=u("./compressedObject"),o=u("./crc32"),h=u("./utf8"),_=u("./compressions"),m=u("./support");function f(n,p){this.options=n,this.loadOptions=p}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var p,i;if(n.skip(22),this.fileNameLength=n.readInt(2),i=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(c){for(var l in _)if(Object.prototype.hasOwnProperty.call(_,l)&&_[l].magic===c)return _[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,p,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var p=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(p),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var p,i,c,l=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<l;)p=n.readInt(2),i=n.readInt(2),c=n.readData(i),this.extraFields[p]={id:p,length:i,value:c};n.setIndex(l)},handleUTF8:function(){var n=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var i=a.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var l=a.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var p=s(n.value);return p.readInt(1)!==1||o(this.fileName)!==p.readInt(4)?null:h.utf8decode(p.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var p=s(n.value);return p.readInt(1)!==1||o(this.fileComment)!==p.readInt(4)?null:h.utf8decode(p.readData(n.length-5))}return null}},S.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,S,b){function s(p,i,c){this.name=p,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=i,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var a=u("./stream/StreamHelper"),r=u("./stream/DataWorker"),o=u("./utf8"),h=u("./compressedObject"),_=u("./stream/GenericWorker");s.prototype={internalStream:function(p){var i=null,c="string";try{if(!p)throw new Error("No output type specified.");var l=(c=p.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),i=this._decompressWorker();var y=!this._dataBinary;y&&!l&&(i=i.pipe(new o.Utf8EncodeWorker)),!y&&l&&(i=i.pipe(new o.Utf8DecodeWorker))}catch(x){(i=new _("error")).error(x)}return new a(i,c,"")},async:function(p,i){return this.internalStream(p).accumulate(i)},nodeStream:function(p,i){return this.internalStream(p||"nodebuffer").toNodejsStream(i)},_compressWorker:function(p,i){if(this._data instanceof h&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new o.Utf8EncodeWorker)),h.createWorkerFrom(c,p,i)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof _?this._data:new r(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<m.length;n++)s.prototype[m[n]]=f;S.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,S,b){(function(s){var a,r,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var h=0,_=new o(p),m=s.document.createTextNode("");_.observe(m,{characterData:!0}),a=function(){m.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var i=s.document.createElement("script");i.onreadystatechange=function(){p(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},s.document.documentElement.appendChild(i)}:function(){setTimeout(p,0)};else{var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}var n=[];function p(){var i,c;r=!0;for(var l=n.length;l;){for(c=n,n=[],i=-1;++i<l;)c[i]();l=n.length}r=!1}S.exports=function(i){n.push(i)!==1||r||a()}}).call(this,typeof Ot<"u"?Ot:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,S,b){var s=u("immediate");function a(){}var r={},o=["REJECTED"],h=["FULFILLED"],_=["PENDING"];function m(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,l!==a&&i(this,l)}function f(l,y,x){this.promise=l,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function n(l,y,x){s(function(){var k;try{k=y(x)}catch(v){return r.reject(l,v)}k===l?r.reject(l,new TypeError("Cannot resolve promise with itself")):r.resolve(l,k)})}function p(l){var y=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof y=="function")return function(){y.apply(l,arguments)}}function i(l,y){var x=!1;function k(z){x||(x=!0,r.reject(l,z))}function v(z){x||(x=!0,r.resolve(l,z))}var C=c(function(){y(v,k)});C.status==="error"&&k(C.value)}function c(l,y){var x={};try{x.value=l(y),x.status="success"}catch(k){x.status="error",x.value=k}return x}(S.exports=m).prototype.finally=function(l){if(typeof l!="function")return this;var y=this.constructor;return this.then(function(x){return y.resolve(l()).then(function(){return x})},function(x){return y.resolve(l()).then(function(){throw x})})},m.prototype.catch=function(l){return this.then(null,l)},m.prototype.then=function(l,y){if(typeof l!="function"&&this.state===h||typeof y!="function"&&this.state===o)return this;var x=new this.constructor(a);return this.state!==_?n(x,this.state===h?l:y,this.outcome):this.queue.push(new f(x,l,y)),x},f.prototype.callFulfilled=function(l){r.resolve(this.promise,l)},f.prototype.otherCallFulfilled=function(l){n(this.promise,this.onFulfilled,l)},f.prototype.callRejected=function(l){r.reject(this.promise,l)},f.prototype.otherCallRejected=function(l){n(this.promise,this.onRejected,l)},r.resolve=function(l,y){var x=c(p,y);if(x.status==="error")return r.reject(l,x.value);var k=x.value;if(k)i(l,k);else{l.state=h,l.outcome=y;for(var v=-1,C=l.queue.length;++v<C;)l.queue[v].callFulfilled(y)}return l},r.reject=function(l,y){l.state=o,l.outcome=y;for(var x=-1,k=l.queue.length;++x<k;)l.queue[x].callRejected(y);return l},m.resolve=function(l){return l instanceof this?l:r.resolve(new this(a),l)},m.reject=function(l){var y=new this(a);return r.reject(y,l)},m.all=function(l){var y=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=l.length,k=!1;if(!x)return this.resolve([]);for(var v=new Array(x),C=0,z=-1,U=new this(a);++z<x;)B(l[z],z);return U;function B(F,X){y.resolve(F).then(function(w){v[X]=w,++C!==x||k||(k=!0,r.resolve(U,v))},function(w){k||(k=!0,r.reject(U,w))})}},m.race=function(l){var y=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=l.length,k=!1;if(!x)return this.resolve([]);for(var v=-1,C=new this(a);++v<x;)z=l[v],y.resolve(z).then(function(U){k||(k=!0,r.resolve(C,U))},function(U){k||(k=!0,r.reject(C,U))});var z;return C}},{immediate:36}],38:[function(u,S,b){var s={};(0,u("./lib/utils/common").assign)(s,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),S.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,S,b){var s=u("./zlib/deflate"),a=u("./utils/common"),r=u("./utils/strings"),o=u("./zlib/messages"),h=u("./zlib/zstream"),_=Object.prototype.toString,m=0,f=-1,n=0,p=8;function i(l){if(!(this instanceof i))return new i(l);this.options=a.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},l||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var x=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(x!==m)throw new Error(o[x]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var k;if(k=typeof y.dictionary=="string"?r.string2buf(y.dictionary):_.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(x=s.deflateSetDictionary(this.strm,k))!==m)throw new Error(o[x]);this._dict_set=!0}}function c(l,y){var x=new i(y);if(x.push(l,!0),x.err)throw x.msg||o[x.err];return x.result}i.prototype.push=function(l,y){var x,k,v=this.strm,C=this.options.chunkSize;if(this.ended)return!1;k=y===~~y?y:y===!0?4:0,typeof l=="string"?v.input=r.string2buf(l):_.call(l)==="[object ArrayBuffer]"?v.input=new Uint8Array(l):v.input=l,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new a.Buf8(C),v.next_out=0,v.avail_out=C),(x=s.deflate(v,k))!==1&&x!==m)return this.onEnd(x),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(v.output,v.next_out))):this.onData(a.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&x!==1);return k===4?(x=s.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===m):k!==2||(this.onEnd(m),!(v.avail_out=0))},i.prototype.onData=function(l){this.chunks.push(l)},i.prototype.onEnd=function(l){l===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},b.Deflate=i,b.deflate=c,b.deflateRaw=function(l,y){return(y=y||{}).raw=!0,c(l,y)},b.gzip=function(l,y){return(y=y||{}).gzip=!0,c(l,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,S,b){var s=u("./zlib/inflate"),a=u("./utils/common"),r=u("./utils/strings"),o=u("./zlib/constants"),h=u("./zlib/messages"),_=u("./zlib/zstream"),m=u("./zlib/gzheader"),f=Object.prototype.toString;function n(i){if(!(this instanceof n))return new n(i);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},i||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||i&&i.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var l=s.inflateInit2(this.strm,c.windowBits);if(l!==o.Z_OK)throw new Error(h[l]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function p(i,c){var l=new n(c);if(l.push(i,!0),l.err)throw l.msg||h[l.err];return l.result}n.prototype.push=function(i,c){var l,y,x,k,v,C,z=this.strm,U=this.options.chunkSize,B=this.options.dictionary,F=!1;if(this.ended)return!1;y=c===~~c?c:c===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof i=="string"?z.input=r.binstring2buf(i):f.call(i)==="[object ArrayBuffer]"?z.input=new Uint8Array(i):z.input=i,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new a.Buf8(U),z.next_out=0,z.avail_out=U),(l=s.inflate(z,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&B&&(C=typeof B=="string"?r.string2buf(B):f.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,l=s.inflateSetDictionary(this.strm,C)),l===o.Z_BUF_ERROR&&F===!0&&(l=o.Z_OK,F=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&l!==o.Z_STREAM_END&&(z.avail_in!==0||y!==o.Z_FINISH&&y!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=r.utf8border(z.output,z.next_out),k=z.next_out-x,v=r.buf2string(z.output,x),z.next_out=k,z.avail_out=U-k,k&&a.arraySet(z.output,z.output,x,k,0),this.onData(v)):this.onData(a.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(F=!0)}while((0<z.avail_in||z.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(y=o.Z_FINISH),y===o.Z_FINISH?(l=s.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):y!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(z.avail_out=0))},n.prototype.onData=function(i){this.chunks.push(i)},n.prototype.onEnd=function(i){i===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},b.Inflate=n,b.inflate=p,b.inflateRaw=function(i,c){return(c=c||{}).raw=!0,p(i,c)},b.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,S,b){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(o){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var _=h.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var m in _)_.hasOwnProperty(m)&&(o[m]=_[m])}}return o},b.shrinkBuf=function(o,h){return o.length===h?o:o.subarray?o.subarray(0,h):(o.length=h,o)};var a={arraySet:function(o,h,_,m,f){if(h.subarray&&o.subarray)o.set(h.subarray(_,_+m),f);else for(var n=0;n<m;n++)o[f+n]=h[_+n]},flattenChunks:function(o){var h,_,m,f,n,p;for(h=m=0,_=o.length;h<_;h++)m+=o[h].length;for(p=new Uint8Array(m),h=f=0,_=o.length;h<_;h++)n=o[h],p.set(n,f),f+=n.length;return p}},r={arraySet:function(o,h,_,m,f){for(var n=0;n<m;n++)o[f+n]=h[_+n]},flattenChunks:function(o){return[].concat.apply([],o)}};b.setTyped=function(o){o?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,a)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,r))},b.setTyped(s)},{}],42:[function(u,S,b){var s=u("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var o=new s.Buf8(256),h=0;h<256;h++)o[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function _(m,f){if(f<65537&&(m.subarray&&r||!m.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(m,f));for(var n="",p=0;p<f;p++)n+=String.fromCharCode(m[p]);return n}o[254]=o[254]=1,b.string2buf=function(m){var f,n,p,i,c,l=m.length,y=0;for(i=0;i<l;i++)(64512&(n=m.charCodeAt(i)))==55296&&i+1<l&&(64512&(p=m.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),i++),y+=n<128?1:n<2048?2:n<65536?3:4;for(f=new s.Buf8(y),i=c=0;c<y;i++)(64512&(n=m.charCodeAt(i)))==55296&&i+1<l&&(64512&(p=m.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),i++),n<128?f[c++]=n:(n<2048?f[c++]=192|n>>>6:(n<65536?f[c++]=224|n>>>12:(f[c++]=240|n>>>18,f[c++]=128|n>>>12&63),f[c++]=128|n>>>6&63),f[c++]=128|63&n);return f},b.buf2binstring=function(m){return _(m,m.length)},b.binstring2buf=function(m){for(var f=new s.Buf8(m.length),n=0,p=f.length;n<p;n++)f[n]=m.charCodeAt(n);return f},b.buf2string=function(m,f){var n,p,i,c,l=f||m.length,y=new Array(2*l);for(n=p=0;n<l;)if((i=m[n++])<128)y[p++]=i;else if(4<(c=o[i]))y[p++]=65533,n+=c-1;else{for(i&=c===2?31:c===3?15:7;1<c&&n<l;)i=i<<6|63&m[n++],c--;1<c?y[p++]=65533:i<65536?y[p++]=i:(i-=65536,y[p++]=55296|i>>10&1023,y[p++]=56320|1023&i)}return _(y,p)},b.utf8border=function(m,f){var n;for((f=f||m.length)>m.length&&(f=m.length),n=f-1;0<=n&&(192&m[n])==128;)n--;return n<0||n===0?f:n+o[m[n]]>f?n:f}},{"./common":41}],43:[function(u,S,b){S.exports=function(s,a,r,o){for(var h=65535&s|0,_=s>>>16&65535|0,m=0;r!==0;){for(r-=m=2e3<r?2e3:r;_=_+(h=h+a[o++]|0)|0,--m;);h%=65521,_%=65521}return h|_<<16|0}},{}],44:[function(u,S,b){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,S,b){var s=function(){for(var a,r=[],o=0;o<256;o++){a=o;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;r[o]=a}return r}();S.exports=function(a,r,o,h){var _=s,m=h+o;a^=-1;for(var f=h;f<m;f++)a=a>>>8^_[255&(a^r[f])];return-1^a}},{}],46:[function(u,S,b){var s,a=u("../utils/common"),r=u("./trees"),o=u("./adler32"),h=u("./crc32"),_=u("./messages"),m=0,f=4,n=0,p=-2,i=-1,c=4,l=2,y=8,x=9,k=286,v=30,C=19,z=2*k+1,U=15,B=3,F=258,X=F+B+1,w=42,D=113,e=1,O=2,nt=3,N=4;function ot(t,P){return t.msg=_[P],P}function G(t){return(t<<1)-(4<t?9:0)}function rt(t){for(var P=t.length;0<=--P;)t[P]=0}function T(t){var P=t.state,R=P.pending;R>t.avail_out&&(R=t.avail_out),R!==0&&(a.arraySet(t.output,P.pending_buf,P.pending_out,R,t.next_out),t.next_out+=R,P.pending_out+=R,t.total_out+=R,t.avail_out-=R,P.pending-=R,P.pending===0&&(P.pending_out=0))}function E(t,P){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,T(t.strm)}function tt(t,P){t.pending_buf[t.pending++]=P}function V(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function M(t,P){var R,g,d=t.max_chain_length,A=t.strstart,Z=t.prev_length,L=t.nice_match,I=t.strstart>t.w_size-X?t.strstart-(t.w_size-X):0,j=t.window,J=t.w_mask,$=t.prev,et=t.strstart+F,ht=j[A+Z-1],ut=j[A+Z];t.prev_length>=t.good_match&&(d>>=2),L>t.lookahead&&(L=t.lookahead);do if(j[(R=P)+Z]===ut&&j[R+Z-1]===ht&&j[R]===j[A]&&j[++R]===j[A+1]){A+=2,R++;do;while(j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&j[++A]===j[++R]&&A<et);if(g=F-(et-A),A=et-F,Z<g){if(t.match_start=P,L<=(Z=g))break;ht=j[A+Z-1],ut=j[A+Z]}}while((P=$[P&J])>I&&--d!=0);return Z<=t.lookahead?Z:t.lookahead}function vt(t){var P,R,g,d,A,Z,L,I,j,J,$=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=$+($-X)){for(a.arraySet(t.window,t.window,$,$,0),t.match_start-=$,t.strstart-=$,t.block_start-=$,P=R=t.hash_size;g=t.head[--P],t.head[P]=$<=g?g-$:0,--R;);for(P=R=$;g=t.prev[--P],t.prev[P]=$<=g?g-$:0,--R;);d+=$}if(t.strm.avail_in===0)break;if(Z=t.strm,L=t.window,I=t.strstart+t.lookahead,j=d,J=void 0,J=Z.avail_in,j<J&&(J=j),R=J===0?0:(Z.avail_in-=J,a.arraySet(L,Z.input,Z.next_in,J,I),Z.state.wrap===1?Z.adler=o(Z.adler,L,J,I):Z.state.wrap===2&&(Z.adler=h(Z.adler,L,J,I)),Z.next_in+=J,Z.total_in+=J,J),t.lookahead+=R,t.lookahead+t.insert>=B)for(A=t.strstart-t.insert,t.ins_h=t.window[A],t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+B-1])&t.hash_mask,t.prev[A&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=A,A++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<X&&t.strm.avail_in!==0)}function xt(t,P){for(var R,g;;){if(t.lookahead<X){if(vt(t),t.lookahead<X&&P===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),R!==0&&t.strstart-R<=t.w_size-X&&(t.match_length=M(t,R)),t.match_length>=B)if(g=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else g=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(g&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,P===f?(E(t,!0),t.strm.avail_out===0?nt:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:O}function lt(t,P){for(var R,g,d;;){if(t.lookahead<X){if(vt(t),t.lookahead<X&&P===m)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,R!==0&&t.prev_length<t.max_lazy_match&&t.strstart-R<=t.w_size-X&&(t.match_length=M(t,R),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-B,g=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,g&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((g=r._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(g=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,P===f?(E(t,!0),t.strm.avail_out===0?nt:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:O}function ct(t,P,R,g,d){this.good_length=t,this.max_lazy=P,this.nice_length=R,this.max_chain=g,this.func=d}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*z),this.dyn_dtree=new a.Buf16(2*(2*v+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(U+1),this.heap=new a.Buf16(2*k+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*k+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?w:D,t.adler=P.wrap===2?0:1,P.last_flush=m,r._tr_init(P),n):ot(t,p)}function Et(t){var P=gt(t);return P===n&&function(R){R.window_size=2*R.w_size,rt(R.head),R.max_lazy_match=s[R.level].max_lazy,R.good_match=s[R.level].good_length,R.nice_match=s[R.level].nice_length,R.max_chain_length=s[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=B-1,R.match_available=0,R.ins_h=0}(t.state),P}function Ct(t,P,R,g,d,A){if(!t)return p;var Z=1;if(P===i&&(P=6),g<0?(Z=0,g=-g):15<g&&(Z=2,g-=16),d<1||x<d||R!==y||g<8||15<g||P<0||9<P||A<0||c<A)return ot(t,p);g===8&&(g=9);var L=new bt;return(t.state=L).strm=t,L.wrap=Z,L.gzhead=null,L.w_bits=g,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=d+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+B-1)/B),L.window=new a.Buf8(2*L.w_size),L.head=new a.Buf16(L.hash_size),L.prev=new a.Buf16(L.w_size),L.lit_bufsize=1<<d+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new a.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=P,L.strategy=A,L.method=R,Et(t)}s=[new ct(0,0,0,0,function(t,P){var R=65535;for(R>t.pending_buf_size-5&&(R=t.pending_buf_size-5);;){if(t.lookahead<=1){if(vt(t),t.lookahead===0&&P===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var g=t.block_start+R;if((t.strstart===0||t.strstart>=g)&&(t.lookahead=t.strstart-g,t.strstart=g,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-X&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,P===f?(E(t,!0),t.strm.avail_out===0?nt:N):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new ct(4,4,8,4,xt),new ct(4,5,16,8,xt),new ct(4,6,32,32,xt),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],b.deflateInit=function(t,P){return Ct(t,P,y,15,8,0)},b.deflateInit2=Ct,b.deflateReset=Et,b.deflateResetKeep=gt,b.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=P,n):p},b.deflate=function(t,P){var R,g,d,A;if(!t||!t.state||5<P||P<0)return t?ot(t,p):p;if(g=t.state,!t.output||!t.input&&t.avail_in!==0||g.status===666&&P!==f)return ot(t,t.avail_out===0?-5:p);if(g.strm=t,R=g.last_flush,g.last_flush=P,g.status===w)if(g.wrap===2)t.adler=0,tt(g,31),tt(g,139),tt(g,8),g.gzhead?(tt(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),tt(g,255&g.gzhead.time),tt(g,g.gzhead.time>>8&255),tt(g,g.gzhead.time>>16&255),tt(g,g.gzhead.time>>24&255),tt(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),tt(g,255&g.gzhead.os),g.gzhead.extra&&g.gzhead.extra.length&&(tt(g,255&g.gzhead.extra.length),tt(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(t.adler=h(t.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(tt(g,0),tt(g,0),tt(g,0),tt(g,0),tt(g,0),tt(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),tt(g,3),g.status=D);else{var Z=y+(g.w_bits-8<<4)<<8;Z|=(2<=g.strategy||g.level<2?0:g.level<6?1:g.level===6?2:3)<<6,g.strstart!==0&&(Z|=32),Z+=31-Z%31,g.status=D,V(g,Z),g.strstart!==0&&(V(g,t.adler>>>16),V(g,65535&t.adler)),t.adler=1}if(g.status===69)if(g.gzhead.extra){for(d=g.pending;g.gzindex<(65535&g.gzhead.extra.length)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),T(t),d=g.pending,g.pending!==g.pending_buf_size));)tt(g,255&g.gzhead.extra[g.gzindex]),g.gzindex++;g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(g.status===73)if(g.gzhead.name){d=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),T(t),d=g.pending,g.pending===g.pending_buf_size)){A=1;break}A=g.gzindex<g.gzhead.name.length?255&g.gzhead.name.charCodeAt(g.gzindex++):0,tt(g,A)}while(A!==0);g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),A===0&&(g.gzindex=0,g.status=91)}else g.status=91;if(g.status===91)if(g.gzhead.comment){d=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),T(t),d=g.pending,g.pending===g.pending_buf_size)){A=1;break}A=g.gzindex<g.gzhead.comment.length?255&g.gzhead.comment.charCodeAt(g.gzindex++):0,tt(g,A)}while(A!==0);g.gzhead.hcrc&&g.pending>d&&(t.adler=h(t.adler,g.pending_buf,g.pending-d,d)),A===0&&(g.status=103)}else g.status=103;if(g.status===103&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&T(t),g.pending+2<=g.pending_buf_size&&(tt(g,255&t.adler),tt(g,t.adler>>8&255),t.adler=0,g.status=D)):g.status=D),g.pending!==0){if(T(t),t.avail_out===0)return g.last_flush=-1,n}else if(t.avail_in===0&&G(P)<=G(R)&&P!==f)return ot(t,-5);if(g.status===666&&t.avail_in!==0)return ot(t,-5);if(t.avail_in!==0||g.lookahead!==0||P!==m&&g.status!==666){var L=g.strategy===2?function(I,j){for(var J;;){if(I.lookahead===0&&(vt(I),I.lookahead===0)){if(j===m)return e;break}if(I.match_length=0,J=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,J&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,j===f?(E(I,!0),I.strm.avail_out===0?nt:N):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:O}(g,P):g.strategy===3?function(I,j){for(var J,$,et,ht,ut=I.window;;){if(I.lookahead<=F){if(vt(I),I.lookahead<=F&&j===m)return e;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=B&&0<I.strstart&&($=ut[et=I.strstart-1])===ut[++et]&&$===ut[++et]&&$===ut[++et]){ht=I.strstart+F;do;while($===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&$===ut[++et]&&et<ht);I.match_length=F-(ht-et),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=B?(J=r._tr_tally(I,1,I.match_length-B),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(J=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),J&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,j===f?(E(I,!0),I.strm.avail_out===0?nt:N):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:O}(g,P):s[g.level].func(g,P);if(L!==nt&&L!==N||(g.status=666),L===e||L===nt)return t.avail_out===0&&(g.last_flush=-1),n;if(L===O&&(P===1?r._tr_align(g):P!==5&&(r._tr_stored_block(g,0,0,!1),P===3&&(rt(g.head),g.lookahead===0&&(g.strstart=0,g.block_start=0,g.insert=0))),T(t),t.avail_out===0))return g.last_flush=-1,n}return P!==f?n:g.wrap<=0?1:(g.wrap===2?(tt(g,255&t.adler),tt(g,t.adler>>8&255),tt(g,t.adler>>16&255),tt(g,t.adler>>24&255),tt(g,255&t.total_in),tt(g,t.total_in>>8&255),tt(g,t.total_in>>16&255),tt(g,t.total_in>>24&255)):(V(g,t.adler>>>16),V(g,65535&t.adler)),T(t),0<g.wrap&&(g.wrap=-g.wrap),g.pending!==0?n:1)},b.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==w&&P!==69&&P!==73&&P!==91&&P!==103&&P!==D&&P!==666?ot(t,p):(t.state=null,P===D?ot(t,-3):n):p},b.deflateSetDictionary=function(t,P){var R,g,d,A,Z,L,I,j,J=P.length;if(!t||!t.state||(A=(R=t.state).wrap)===2||A===1&&R.status!==w||R.lookahead)return p;for(A===1&&(t.adler=o(t.adler,P,J,0)),R.wrap=0,J>=R.w_size&&(A===0&&(rt(R.head),R.strstart=0,R.block_start=0,R.insert=0),j=new a.Buf8(R.w_size),a.arraySet(j,P,J-R.w_size,R.w_size,0),P=j,J=R.w_size),Z=t.avail_in,L=t.next_in,I=t.input,t.avail_in=J,t.next_in=0,t.input=P,vt(R);R.lookahead>=B;){for(g=R.strstart,d=R.lookahead-(B-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[g+B-1])&R.hash_mask,R.prev[g&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=g,g++,--d;);R.strstart=g,R.lookahead=B-1,vt(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=B-1,R.match_available=0,t.next_in=L,t.input=I,t.avail_in=Z,R.wrap=A,n},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,S,b){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,S,b){S.exports=function(s,a){var r,o,h,_,m,f,n,p,i,c,l,y,x,k,v,C,z,U,B,F,X,w,D,e,O;r=s.state,o=s.next_in,e=s.input,h=o+(s.avail_in-5),_=s.next_out,O=s.output,m=_-(a-s.avail_out),f=_+(s.avail_out-257),n=r.dmax,p=r.wsize,i=r.whave,c=r.wnext,l=r.window,y=r.hold,x=r.bits,k=r.lencode,v=r.distcode,C=(1<<r.lenbits)-1,z=(1<<r.distbits)-1;t:do{x<15&&(y+=e[o++]<<x,x+=8,y+=e[o++]<<x,x+=8),U=k[y&C];e:for(;;){if(y>>>=B=U>>>24,x-=B,(B=U>>>16&255)===0)O[_++]=65535&U;else{if(!(16&B)){if(!(64&B)){U=k[(65535&U)+(y&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}s.msg="invalid literal/length code",r.mode=30;break t}F=65535&U,(B&=15)&&(x<B&&(y+=e[o++]<<x,x+=8),F+=y&(1<<B)-1,y>>>=B,x-=B),x<15&&(y+=e[o++]<<x,x+=8,y+=e[o++]<<x,x+=8),U=v[y&z];n:for(;;){if(y>>>=B=U>>>24,x-=B,!(16&(B=U>>>16&255))){if(!(64&B)){U=v[(65535&U)+(y&(1<<B)-1)];continue n}s.msg="invalid distance code",r.mode=30;break t}if(X=65535&U,x<(B&=15)&&(y+=e[o++]<<x,(x+=8)<B&&(y+=e[o++]<<x,x+=8)),n<(X+=y&(1<<B)-1)){s.msg="invalid distance too far back",r.mode=30;break t}if(y>>>=B,x-=B,(B=_-m)<X){if(i<(B=X-B)&&r.sane){s.msg="invalid distance too far back",r.mode=30;break t}if(D=l,(w=0)===c){if(w+=p-B,B<F){for(F-=B;O[_++]=l[w++],--B;);w=_-X,D=O}}else if(c<B){if(w+=p+c-B,(B-=c)<F){for(F-=B;O[_++]=l[w++],--B;);if(w=0,c<F){for(F-=B=c;O[_++]=l[w++],--B;);w=_-X,D=O}}}else if(w+=c-B,B<F){for(F-=B;O[_++]=l[w++],--B;);w=_-X,D=O}for(;2<F;)O[_++]=D[w++],O[_++]=D[w++],O[_++]=D[w++],F-=3;F&&(O[_++]=D[w++],1<F&&(O[_++]=D[w++]))}else{for(w=_-X;O[_++]=O[w++],O[_++]=O[w++],O[_++]=O[w++],2<(F-=3););F&&(O[_++]=O[w++],1<F&&(O[_++]=O[w++]))}break}}break}}while(o<h&&_<f);o-=F=x>>3,y&=(1<<(x-=F<<3))-1,s.next_in=o,s.next_out=_,s.avail_in=o<h?h-o+5:5-(o-h),s.avail_out=_<f?f-_+257:257-(_-f),r.hold=y,r.bits=x}},{}],49:[function(u,S,b){var s=u("../utils/common"),a=u("./adler32"),r=u("./crc32"),o=u("./inffast"),h=u("./inftrees"),_=1,m=2,f=0,n=-2,p=1,i=852,c=592;function l(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(w){var D;return w&&w.state?(D=w.state,w.total_in=w.total_out=D.total=0,w.msg="",D.wrap&&(w.adler=1&D.wrap),D.mode=p,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new s.Buf32(i),D.distcode=D.distdyn=new s.Buf32(c),D.sane=1,D.back=-1,f):n}function k(w){var D;return w&&w.state?((D=w.state).wsize=0,D.whave=0,D.wnext=0,x(w)):n}function v(w,D){var e,O;return w&&w.state?(O=w.state,D<0?(e=0,D=-D):(e=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?n:(O.window!==null&&O.wbits!==D&&(O.window=null),O.wrap=e,O.wbits=D,k(w))):n}function C(w,D){var e,O;return w?(O=new y,(w.state=O).window=null,(e=v(w,D))!==f&&(w.state=null),e):n}var z,U,B=!0;function F(w){if(B){var D;for(z=new s.Buf32(512),U=new s.Buf32(32),D=0;D<144;)w.lens[D++]=8;for(;D<256;)w.lens[D++]=9;for(;D<280;)w.lens[D++]=7;for(;D<288;)w.lens[D++]=8;for(h(_,w.lens,0,288,z,0,w.work,{bits:9}),D=0;D<32;)w.lens[D++]=5;h(m,w.lens,0,32,U,0,w.work,{bits:5}),B=!1}w.lencode=z,w.lenbits=9,w.distcode=U,w.distbits=5}function X(w,D,e,O){var nt,N=w.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new s.Buf8(N.wsize)),O>=N.wsize?(s.arraySet(N.window,D,e-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(O<(nt=N.wsize-N.wnext)&&(nt=O),s.arraySet(N.window,D,e-O,nt,N.wnext),(O-=nt)?(s.arraySet(N.window,D,e-O,O,0),N.wnext=O,N.whave=N.wsize):(N.wnext+=nt,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=nt))),0}b.inflateReset=k,b.inflateReset2=v,b.inflateResetKeep=x,b.inflateInit=function(w){return C(w,15)},b.inflateInit2=C,b.inflate=function(w,D){var e,O,nt,N,ot,G,rt,T,E,tt,V,M,vt,xt,lt,ct,bt,gt,Et,Ct,t,P,R,g,d=0,A=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return n;(e=w.state).mode===12&&(e.mode=13),ot=w.next_out,nt=w.output,rt=w.avail_out,N=w.next_in,O=w.input,G=w.avail_in,T=e.hold,E=e.bits,tt=G,V=rt,P=f;t:for(;;)switch(e.mode){case p:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(2&e.wrap&&T===35615){A[e.check=0]=255&T,A[1]=T>>>8&255,e.check=r(e.check,A,2,0),E=T=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&T)<<8)+(T>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&T)!=8){w.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(T>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&T?10:12,E=T=0;break;case 2:for(;E<16;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(e.flags=T,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=T>>8&1),512&e.flags&&(A[0]=255&T,A[1]=T>>>8&255,e.check=r(e.check,A,2,0)),E=T=0,e.mode=3;case 3:for(;E<32;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.head&&(e.head.time=T),512&e.flags&&(A[0]=255&T,A[1]=T>>>8&255,A[2]=T>>>16&255,A[3]=T>>>24&255,e.check=r(e.check,A,4,0)),E=T=0,e.mode=4;case 4:for(;E<16;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.head&&(e.head.xflags=255&T,e.head.os=T>>8),512&e.flags&&(A[0]=255&T,A[1]=T>>>8&255,e.check=r(e.check,A,2,0)),E=T=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.length=T,e.head&&(e.head.extra_len=T),512&e.flags&&(A[0]=255&T,A[1]=T>>>8&255,e.check=r(e.check,A,2,0)),E=T=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(G<(M=e.length)&&(M=G),M&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,O,N,M,t)),512&e.flags&&(e.check=r(e.check,O,M,N)),G-=M,N+=M,e.length-=M),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(G===0)break t;for(M=0;t=O[N+M++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&M<G;);if(512&e.flags&&(e.check=r(e.check,O,M,N)),G-=M,N+=M,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(G===0)break t;for(M=0;t=O[N+M++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&M<G;);if(512&e.flags&&(e.check=r(e.check,O,M,N)),G-=M,N+=M,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(T!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}E=T=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}w.adler=e.check=l(T),E=T=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=T,e.bits=E,2;w.adler=e.check=1,e.mode=12;case 12:if(D===5||D===6)break t;case 13:if(e.last){T>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}switch(e.last=1&T,E-=1,3&(T>>>=1)){case 0:e.mode=14;break;case 1:if(F(e),e.mode=20,D!==6)break;T>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}T>>>=2,E-=2;break;case 14:for(T>>>=7&E,E-=7&E;E<32;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if((65535&T)!=(T>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&T,E=T=0,e.mode=15,D===6)break t;case 15:e.mode=16;case 16:if(M=e.length){if(G<M&&(M=G),rt<M&&(M=rt),M===0)break t;s.arraySet(nt,O,N,M,ot),G-=M,N+=M,rt-=M,ot+=M,e.length-=M;break}e.mode=12;break;case 17:for(;E<14;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(e.nlen=257+(31&T),T>>>=5,E-=5,e.ndist=1+(31&T),T>>>=5,E-=5,e.ncode=4+(15&T),T>>>=4,E-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.lens[Z[e.have++]]=7&T,T>>>=3,E-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,R={bits:e.lenbits},P=h(0,e.lens,0,19,e.lencode,0,e.work,R),e.lenbits=R.bits,P){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ct=(d=e.lencode[T&(1<<e.lenbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(bt<16)T>>>=lt,E-=lt,e.lens[e.have++]=bt;else{if(bt===16){for(g=lt+2;E<g;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(T>>>=lt,E-=lt,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],M=3+(3&T),T>>>=2,E-=2}else if(bt===17){for(g=lt+3;E<g;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}E-=lt,t=0,M=3+(7&(T>>>=lt)),T>>>=3,E-=3}else{for(g=lt+7;E<g;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}E-=lt,t=0,M=11+(127&(T>>>=lt)),T>>>=7,E-=7}if(e.have+M>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;M--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,R={bits:e.lenbits},P=h(_,e.lens,0,e.nlen,e.lencode,0,e.work,R),e.lenbits=R.bits,P){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,R={bits:e.distbits},P=h(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,R),e.distbits=R.bits,P){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,D===6)break t;case 20:e.mode=21;case 21:if(6<=G&&258<=rt){w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=T,e.bits=E,o(w,V),ot=w.next_out,nt=w.output,rt=w.avail_out,N=w.next_in,O=w.input,G=w.avail_in,T=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;ct=(d=e.lencode[T&(1<<e.lenbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(ct&&!(240&ct)){for(gt=lt,Et=ct,Ct=bt;ct=(d=e.lencode[Ct+((T&(1<<gt+Et)-1)>>gt)])>>>16&255,bt=65535&d,!(gt+(lt=d>>>24)<=E);){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}T>>>=gt,E-=gt,e.back+=gt}if(T>>>=lt,E-=lt,e.back+=lt,e.length=bt,ct===0){e.mode=26;break}if(32&ct){e.back=-1,e.mode=12;break}if(64&ct){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&ct,e.mode=22;case 22:if(e.extra){for(g=e.extra;E<g;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.length+=T&(1<<e.extra)-1,T>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;ct=(d=e.distcode[T&(1<<e.distbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(!(240&ct)){for(gt=lt,Et=ct,Ct=bt;ct=(d=e.distcode[Ct+((T&(1<<gt+Et)-1)>>gt)])>>>16&255,bt=65535&d,!(gt+(lt=d>>>24)<=E);){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}T>>>=gt,E-=gt,e.back+=gt}if(T>>>=lt,E-=lt,e.back+=lt,64&ct){w.msg="invalid distance code",e.mode=30;break}e.offset=bt,e.extra=15&ct,e.mode=24;case 24:if(e.extra){for(g=e.extra;E<g;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}e.offset+=T&(1<<e.extra)-1,T>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(rt===0)break t;if(M=V-rt,e.offset>M){if((M=e.offset-M)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}vt=M>e.wnext?(M-=e.wnext,e.wsize-M):e.wnext-M,M>e.length&&(M=e.length),xt=e.window}else xt=nt,vt=ot-e.offset,M=e.length;for(rt<M&&(M=rt),rt-=M,e.length-=M;nt[ot++]=xt[vt++],--M;);e.length===0&&(e.mode=21);break;case 26:if(rt===0)break t;nt[ot++]=e.length,rt--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(G===0)break t;G--,T|=O[N++]<<E,E+=8}if(V-=rt,w.total_out+=V,e.total+=V,V&&(w.adler=e.check=e.flags?r(e.check,nt,V,ot-V):a(e.check,nt,V,ot-V)),V=rt,(e.flags?T:l(T))!==e.check){w.msg="incorrect data check",e.mode=30;break}E=T=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(G===0)break t;G--,T+=O[N++]<<E,E+=8}if(T!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}E=T=0}e.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return n}return w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=T,e.bits=E,(e.wsize||V!==w.avail_out&&e.mode<30&&(e.mode<27||D!==4))&&X(w,w.output,w.next_out,V-w.avail_out)?(e.mode=31,-4):(tt-=w.avail_in,V-=w.avail_out,w.total_in+=tt,w.total_out+=V,e.total+=V,e.wrap&&V&&(w.adler=e.check=e.flags?r(e.check,nt,V,w.next_out-V):a(e.check,nt,V,w.next_out-V)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(tt==0&&V===0||D===4)&&P===f&&(P=-5),P)},b.inflateEnd=function(w){if(!w||!w.state)return n;var D=w.state;return D.window&&(D.window=null),w.state=null,f},b.inflateGetHeader=function(w,D){var e;return w&&w.state&&2&(e=w.state).wrap?((e.head=D).done=!1,f):n},b.inflateSetDictionary=function(w,D){var e,O=D.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?n:e.mode===11&&a(1,D,O,0)!==e.check?-3:X(w,D,O,O)?(e.mode=31,-4):(e.havedict=1,f):n},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,S,b){var s=u("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(_,m,f,n,p,i,c,l){var y,x,k,v,C,z,U,B,F,X=l.bits,w=0,D=0,e=0,O=0,nt=0,N=0,ot=0,G=0,rt=0,T=0,E=null,tt=0,V=new s.Buf16(16),M=new s.Buf16(16),vt=null,xt=0;for(w=0;w<=15;w++)V[w]=0;for(D=0;D<n;D++)V[m[f+D]]++;for(nt=X,O=15;1<=O&&V[O]===0;O--);if(O<nt&&(nt=O),O===0)return p[i++]=20971520,p[i++]=20971520,l.bits=1,0;for(e=1;e<O&&V[e]===0;e++);for(nt<e&&(nt=e),w=G=1;w<=15;w++)if(G<<=1,(G-=V[w])<0)return-1;if(0<G&&(_===0||O!==1))return-1;for(M[1]=0,w=1;w<15;w++)M[w+1]=M[w]+V[w];for(D=0;D<n;D++)m[f+D]!==0&&(c[M[m[f+D]]++]=D);if(z=_===0?(E=vt=c,19):_===1?(E=a,tt-=257,vt=r,xt-=257,256):(E=o,vt=h,-1),w=e,C=i,ot=D=T=0,k=-1,v=(rt=1<<(N=nt))-1,_===1&&852<rt||_===2&&592<rt)return 1;for(;;){for(U=w-ot,F=c[D]<z?(B=0,c[D]):c[D]>z?(B=vt[xt+c[D]],E[tt+c[D]]):(B=96,0),y=1<<w-ot,e=x=1<<N;p[C+(T>>ot)+(x-=y)]=U<<24|B<<16|F|0,x!==0;);for(y=1<<w-1;T&y;)y>>=1;if(y!==0?(T&=y-1,T+=y):T=0,D++,--V[w]==0){if(w===O)break;w=m[f+c[D]]}if(nt<w&&(T&v)!==k){for(ot===0&&(ot=nt),C+=e,G=1<<(N=w-ot);N+ot<O&&!((G-=V[N+ot])<=0);)N++,G<<=1;if(rt+=1<<N,_===1&&852<rt||_===2&&592<rt)return 1;p[k=T&v]=nt<<24|N<<16|C-i|0}}return T!==0&&(p[C+T]=w-ot<<24|64<<16|0),l.bits=nt,0}},{"../utils/common":41}],51:[function(u,S,b){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,S,b){var s=u("../utils/common"),a=0,r=1;function o(d){for(var A=d.length;0<=--A;)d[A]=0}var h=0,_=29,m=256,f=m+1+_,n=30,p=19,i=2*f+1,c=15,l=16,y=7,x=256,k=16,v=17,C=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(f+2));o(X);var w=new Array(2*n);o(w);var D=new Array(512);o(D);var e=new Array(256);o(e);var O=new Array(_);o(O);var nt,N,ot,G=new Array(n);function rt(d,A,Z,L,I){this.static_tree=d,this.extra_bits=A,this.extra_base=Z,this.elems=L,this.max_length=I,this.has_stree=d&&d.length}function T(d,A){this.dyn_tree=d,this.max_code=0,this.stat_desc=A}function E(d){return d<256?D[d]:D[256+(d>>>7)]}function tt(d,A){d.pending_buf[d.pending++]=255&A,d.pending_buf[d.pending++]=A>>>8&255}function V(d,A,Z){d.bi_valid>l-Z?(d.bi_buf|=A<<d.bi_valid&65535,tt(d,d.bi_buf),d.bi_buf=A>>l-d.bi_valid,d.bi_valid+=Z-l):(d.bi_buf|=A<<d.bi_valid&65535,d.bi_valid+=Z)}function M(d,A,Z){V(d,Z[2*A],Z[2*A+1])}function vt(d,A){for(var Z=0;Z|=1&d,d>>>=1,Z<<=1,0<--A;);return Z>>>1}function xt(d,A,Z){var L,I,j=new Array(c+1),J=0;for(L=1;L<=c;L++)j[L]=J=J+Z[L-1]<<1;for(I=0;I<=A;I++){var $=d[2*I+1];$!==0&&(d[2*I]=vt(j[$]++,$))}}function lt(d){var A;for(A=0;A<f;A++)d.dyn_ltree[2*A]=0;for(A=0;A<n;A++)d.dyn_dtree[2*A]=0;for(A=0;A<p;A++)d.bl_tree[2*A]=0;d.dyn_ltree[2*x]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function ct(d){8<d.bi_valid?tt(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function bt(d,A,Z,L){var I=2*A,j=2*Z;return d[I]<d[j]||d[I]===d[j]&&L[A]<=L[Z]}function gt(d,A,Z){for(var L=d.heap[Z],I=Z<<1;I<=d.heap_len&&(I<d.heap_len&&bt(A,d.heap[I+1],d.heap[I],d.depth)&&I++,!bt(A,L,d.heap[I],d.depth));)d.heap[Z]=d.heap[I],Z=I,I<<=1;d.heap[Z]=L}function Et(d,A,Z){var L,I,j,J,$=0;if(d.last_lit!==0)for(;L=d.pending_buf[d.d_buf+2*$]<<8|d.pending_buf[d.d_buf+2*$+1],I=d.pending_buf[d.l_buf+$],$++,L===0?M(d,I,A):(M(d,(j=e[I])+m+1,A),(J=z[j])!==0&&V(d,I-=O[j],J),M(d,j=E(--L),Z),(J=U[j])!==0&&V(d,L-=G[j],J)),$<d.last_lit;);M(d,x,A)}function Ct(d,A){var Z,L,I,j=A.dyn_tree,J=A.stat_desc.static_tree,$=A.stat_desc.has_stree,et=A.stat_desc.elems,ht=-1;for(d.heap_len=0,d.heap_max=i,Z=0;Z<et;Z++)j[2*Z]!==0?(d.heap[++d.heap_len]=ht=Z,d.depth[Z]=0):j[2*Z+1]=0;for(;d.heap_len<2;)j[2*(I=d.heap[++d.heap_len]=ht<2?++ht:0)]=1,d.depth[I]=0,d.opt_len--,$&&(d.static_len-=J[2*I+1]);for(A.max_code=ht,Z=d.heap_len>>1;1<=Z;Z--)gt(d,j,Z);for(I=et;Z=d.heap[1],d.heap[1]=d.heap[d.heap_len--],gt(d,j,1),L=d.heap[1],d.heap[--d.heap_max]=Z,d.heap[--d.heap_max]=L,j[2*I]=j[2*Z]+j[2*L],d.depth[I]=(d.depth[Z]>=d.depth[L]?d.depth[Z]:d.depth[L])+1,j[2*Z+1]=j[2*L+1]=I,d.heap[1]=I++,gt(d,j,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(ut,At){var Kt,It,Wt,_t,Nt,Mt,Tt=At.dyn_tree,ee=At.max_code,we=At.stat_desc.static_tree,ke=At.stat_desc.has_stree,xe=At.stat_desc.extra_bits,ne=At.stat_desc.extra_base,Dt=At.stat_desc.max_length,Gt=0;for(_t=0;_t<=c;_t++)ut.bl_count[_t]=0;for(Tt[2*ut.heap[ut.heap_max]+1]=0,Kt=ut.heap_max+1;Kt<i;Kt++)Dt<(_t=Tt[2*Tt[2*(It=ut.heap[Kt])+1]+1]+1)&&(_t=Dt,Gt++),Tt[2*It+1]=_t,ee<It||(ut.bl_count[_t]++,Nt=0,ne<=It&&(Nt=xe[It-ne]),Mt=Tt[2*It],ut.opt_len+=Mt*(_t+Nt),ke&&(ut.static_len+=Mt*(we[2*It+1]+Nt)));if(Gt!==0){do{for(_t=Dt-1;ut.bl_count[_t]===0;)_t--;ut.bl_count[_t]--,ut.bl_count[_t+1]+=2,ut.bl_count[Dt]--,Gt-=2}while(0<Gt);for(_t=Dt;_t!==0;_t--)for(It=ut.bl_count[_t];It!==0;)ee<(Wt=ut.heap[--Kt])||(Tt[2*Wt+1]!==_t&&(ut.opt_len+=(_t-Tt[2*Wt+1])*Tt[2*Wt],Tt[2*Wt+1]=_t),It--)}}(d,A),xt(j,ht,d.bl_count)}function t(d,A,Z){var L,I,j=-1,J=A[1],$=0,et=7,ht=4;for(J===0&&(et=138,ht=3),A[2*(Z+1)+1]=65535,L=0;L<=Z;L++)I=J,J=A[2*(L+1)+1],++$<et&&I===J||($<ht?d.bl_tree[2*I]+=$:I!==0?(I!==j&&d.bl_tree[2*I]++,d.bl_tree[2*k]++):$<=10?d.bl_tree[2*v]++:d.bl_tree[2*C]++,j=I,ht=($=0)===J?(et=138,3):I===J?(et=6,3):(et=7,4))}function P(d,A,Z){var L,I,j=-1,J=A[1],$=0,et=7,ht=4;for(J===0&&(et=138,ht=3),L=0;L<=Z;L++)if(I=J,J=A[2*(L+1)+1],!(++$<et&&I===J)){if($<ht)for(;M(d,I,d.bl_tree),--$!=0;);else I!==0?(I!==j&&(M(d,I,d.bl_tree),$--),M(d,k,d.bl_tree),V(d,$-3,2)):$<=10?(M(d,v,d.bl_tree),V(d,$-3,3)):(M(d,C,d.bl_tree),V(d,$-11,7));j=I,ht=($=0)===J?(et=138,3):I===J?(et=6,3):(et=7,4)}}o(G);var R=!1;function g(d,A,Z,L){V(d,(h<<1)+(L?1:0),3),function(I,j,J,$){ct(I),$&&(tt(I,J),tt(I,~J)),s.arraySet(I.pending_buf,I.window,j,J,I.pending),I.pending+=J}(d,A,Z,!0)}b._tr_init=function(d){R||(function(){var A,Z,L,I,j,J=new Array(c+1);for(I=L=0;I<_-1;I++)for(O[I]=L,A=0;A<1<<z[I];A++)e[L++]=I;for(e[L-1]=I,I=j=0;I<16;I++)for(G[I]=j,A=0;A<1<<U[I];A++)D[j++]=I;for(j>>=7;I<n;I++)for(G[I]=j<<7,A=0;A<1<<U[I]-7;A++)D[256+j++]=I;for(Z=0;Z<=c;Z++)J[Z]=0;for(A=0;A<=143;)X[2*A+1]=8,A++,J[8]++;for(;A<=255;)X[2*A+1]=9,A++,J[9]++;for(;A<=279;)X[2*A+1]=7,A++,J[7]++;for(;A<=287;)X[2*A+1]=8,A++,J[8]++;for(xt(X,f+1,J),A=0;A<n;A++)w[2*A+1]=5,w[2*A]=vt(A,5);nt=new rt(X,z,m+1,f,c),N=new rt(w,U,0,n,c),ot=new rt(new Array(0),B,0,p,y)}(),R=!0),d.l_desc=new T(d.dyn_ltree,nt),d.d_desc=new T(d.dyn_dtree,N),d.bl_desc=new T(d.bl_tree,ot),d.bi_buf=0,d.bi_valid=0,lt(d)},b._tr_stored_block=g,b._tr_flush_block=function(d,A,Z,L){var I,j,J=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function($){var et,ht=4093624447;for(et=0;et<=31;et++,ht>>>=1)if(1&ht&&$.dyn_ltree[2*et]!==0)return a;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return r;for(et=32;et<m;et++)if($.dyn_ltree[2*et]!==0)return r;return a}(d)),Ct(d,d.l_desc),Ct(d,d.d_desc),J=function($){var et;for(t($,$.dyn_ltree,$.l_desc.max_code),t($,$.dyn_dtree,$.d_desc.max_code),Ct($,$.bl_desc),et=p-1;3<=et&&$.bl_tree[2*F[et]+1]===0;et--);return $.opt_len+=3*(et+1)+5+5+4,et}(d),I=d.opt_len+3+7>>>3,(j=d.static_len+3+7>>>3)<=I&&(I=j)):I=j=Z+5,Z+4<=I&&A!==-1?g(d,A,Z,L):d.strategy===4||j===I?(V(d,2+(L?1:0),3),Et(d,X,w)):(V(d,4+(L?1:0),3),function($,et,ht,ut){var At;for(V($,et-257,5),V($,ht-1,5),V($,ut-4,4),At=0;At<ut;At++)V($,$.bl_tree[2*F[At]+1],3);P($,$.dyn_ltree,et-1),P($,$.dyn_dtree,ht-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,J+1),Et(d,d.dyn_ltree,d.dyn_dtree)),lt(d),L&&ct(d)},b._tr_tally=function(d,A,Z){return d.pending_buf[d.d_buf+2*d.last_lit]=A>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&A,d.pending_buf[d.l_buf+d.last_lit]=255&Z,d.last_lit++,A===0?d.dyn_ltree[2*Z]++:(d.matches++,A--,d.dyn_ltree[2*(e[Z]+m+1)]++,d.dyn_dtree[2*E(A)]++),d.last_lit===d.lit_bufsize-1},b._tr_align=function(d){V(d,2,3),M(d,x,X),function(A){A.bi_valid===16?(tt(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(u,S,b){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,S,b){(function(s){(function(a,r){if(!a.setImmediate){var o,h,_,m,f=1,n={},p=!1,i=a.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(a);c=c&&c.setTimeout?c:a,o={}.toString.call(a.process)==="[object process]"?function(k){process.nextTick(function(){y(k)})}:function(){if(a.postMessage&&!a.importScripts){var k=!0,v=a.onmessage;return a.onmessage=function(){k=!1},a.postMessage("","*"),a.onmessage=v,k}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",x,!1):a.attachEvent("onmessage",x),function(k){a.postMessage(m+k,"*")}):a.MessageChannel?((_=new MessageChannel).port1.onmessage=function(k){y(k.data)},function(k){_.port2.postMessage(k)}):i&&"onreadystatechange"in i.createElement("script")?(h=i.documentElement,function(k){var v=i.createElement("script");v.onreadystatechange=function(){y(k),v.onreadystatechange=null,h.removeChild(v),v=null},h.appendChild(v)}):function(k){setTimeout(y,0,k)},c.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var v=new Array(arguments.length-1),C=0;C<v.length;C++)v[C]=arguments[C+1];var z={callback:k,args:v};return n[f]=z,o(f),f++},c.clearImmediate=l}function l(k){delete n[k]}function y(k){if(p)setTimeout(y,0,k);else{var v=n[k];if(v){p=!0;try{(function(C){var z=C.callback,U=C.args;switch(U.length){case 0:z();break;case 1:z(U[0]);break;case 2:z(U[0],U[1]);break;case 3:z(U[0],U[1],U[2]);break;default:z.apply(r,U)}})(v)}finally{l(k),p=!1}}}}function x(k){k.source===a&&typeof k.data=="string"&&k.data.indexOf(m)===0&&y(+k.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ot<"u"?Ot:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pr);const fe=Ht;var qt={},mr={get exports(){return qt},set exports(K){qt=K}};(function(K,H){(function(u,S){S()})(Ot,function(){function u(h,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function S(h,_,m){var f=new XMLHttpRequest;f.open("GET",h),f.responseType="blob",f.onload=function(){o(f.response,_,m)},f.onerror=function(){console.error("could not download file")},f.send()}function b(h){var _=new XMLHttpRequest;_.open("HEAD",h,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(_)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ot=="object"&&Ot.global===Ot?Ot:void 0,r=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(h,_,m){var f=a.URL||a.webkitURL,n=document.createElement("a");_=_||h.name||"download",n.download=_,n.rel="noopener",typeof h=="string"?(n.href=h,n.origin===location.origin?s(n):b(n.href)?S(h,_,m):s(n,n.target="_blank")):(n.href=f.createObjectURL(h),setTimeout(function(){f.revokeObjectURL(n.href)},4e4),setTimeout(function(){s(n)},0))}:"msSaveOrOpenBlob"in navigator?function(h,_,m){if(_=_||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(u(h,m),_);else if(b(h))S(h,_,m);else{var f=document.createElement("a");f.href=h,f.target="_blank",setTimeout(function(){s(f)})}}:function(h,_,m,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof h=="string")return S(h,_,m);var n=h.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||n&&p||r)&&typeof FileReader<"u"){var c=new FileReader;c.onloadend=function(){var x=c.result;x=i?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},c.readAsDataURL(h)}else{var l=a.URL||a.webkitURL,y=l.createObjectURL(h);f?f.location=y:location.href=y,f=null,setTimeout(function(){l.revokeObjectURL(y)},4e4)}});a.saveAs=o.saveAs=o,K.exports=o})})(mr);const vr=qt,gr=Te("save",()=>{const K=wt(null);function H(a){K.value=a,localStorage.setItem("save",JSON.stringify({save:K.value}))}function u(){try{const{save:a}=JSON.parse(localStorage.getItem("save"));return K.value=a,!0}catch{return K.value=null,!1}}function S(){localStorage.removeItem("save"),K.value=null}async function b(){const a=JSON.stringify(K.value),r=fe();r.file("save.txt",a);const o=await r.generateAsync({type:"blob",compression:"DEFLATE"});vr.saveAs(o,"save.SCTReplay")}async function s(a){var o;const r=await fe.loadAsync(a);K.value=JSON.parse(await((o=r.file("save.txt"))==null?void 0:o.async("string"))||"{}")}return{save:K,SaveStorage:H,LoadStorage:u,CleanStorage:S,Download:b,Upload:s}});const _r=Oe({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:K=>typeof K=="boolean"||[1e3,1024].includes(K)},...Fe({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:K=>Be(K).every(H=>H!=null&&typeof H=="object")},...Le({clearable:!0})},emits:{"click:control":K=>!0,"update:modelValue":K=>!0},setup(K,H){let{attrs:u,emit:S,slots:b}=H;const{t:s}=Re(),a=Xt(K,"modelValue"),r=ft(()=>typeof K.showSize!="boolean"?K.showSize:void 0),o=ft(()=>(a.value??[]).reduce((v,C)=>{let{size:z=0}=C;return v+z},0)),h=ft(()=>ae(o.value,r.value)),_=ft(()=>(a.value??[]).map(v=>{const{name:C="",size:z=0}=v;return K.showSize?`${C} (${ae(z,r.value)})`:C})),m=ft(()=>{var v;const C=((v=a.value)==null?void 0:v.length)??0;return K.showSize?s(K.counterSizeString,C,h.value):s(K.counterString,C)}),f=wt(),n=wt(),p=wt(!1),i=wt(),c=ft(()=>K.messages.length?K.messages:K.persistentHint?K.hint:"");function l(){if(i.value!==document.activeElement){var v;(v=i.value)==null||v.focus()}p.value||(p.value=!0)}function y(v){ie(K["onClick:prepend"],v),x(v)}function x(v){var C;(C=i.value)==null||C.click(),S("click:control",v)}function k(v){v.stopPropagation(),l(),me(()=>{a.value=[],ie(K["onClick:clear"],v)})}return Jt(a,v=>{(!Array.isArray(v)||!v.length)&&i.value&&(i.value.value="")}),Qt(()=>{const v=!!(b.counter||K.counter),C=!!(v||b.details),[z,U]=Ke(u),[{modelValue:B,...F}]=Ne(K),[X]=Ge(K);return q(Ve,Rt({ref:f,modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,class:"v-file-input","onClick:prepend":y,"onClick:append":K["onClick:append"]},z,F,{focused:p.value,messages:c.value}),{...b,default:w=>{let{id:D,isDisabled:e,isDirty:O,isReadonly:nt,isValid:N}=w;return q(je,Rt({ref:n,"prepend-icon":K.prependIcon,"onClick:control":x,"onClick:clear":k,"onClick:prependInner":K["onClick:prependInner"],"onClick:appendInner":K["onClick:appendInner"]},X,{id:D.value,active:O.value||p.value,dirty:O.value,focused:p.value,error:N.value===!1}),{...b,default:ot=>{var G;let{props:{class:rt,...T}}=ot;return q(dt,null,[q("input",Rt({ref:i,type:"file",readonly:nt.value,disabled:e.value,multiple:K.multiple,name:K.name,onClick:E=>{E.stopPropagation(),l()},onChange:E=>{if(!E.target)return;const tt=E.target;a.value=[...tt.files??[]]},onFocus:l,onBlur:()=>p.value=!1},T,U),null),q("div",{class:rt},[!!((G=a.value)!=null&&G.length)&&(b.selection?b.selection({fileNames:_.value,totalBytes:o.value,totalBytesReadable:h.value}):K.chips?_.value.map(E=>q($e,{key:E,size:"small",color:K.color},{default:()=>[E]})):_.value.join(", "))])])}})},details:C?w=>{var D,e;return q(dt,null,[(D=b.details)==null?void 0:D.call(b,w),v&&q(dt,null,[q("span",null,null),q(Me,{active:!!((e=a.value)!=null&&e.length),value:m.value},b.counter)])])}:void 0})}),te({},f,n,i)}}),yr={class:"d-flex flex-column"},br={class:"d-flex flex-column"},wr={class:"d-flex flex-column"},kr={class:"d-flex flex-column"},Sr=Bt({__name:"LocalGame",props:{config:null},setup(K){const H=K,u=Yt(),S=We(),b=gr();b.LoadStorage();const s=new Ye,a=new qe(0,s);s.init(H.config),s.game.start();const r=wt({canUndo:!1,canRedo:!1}),o=wt(s.game.getState()),h=ft(()=>o.value.player[0]);s.server.notify.push(k=>{o.value=k}),s.saveStateChanged=()=>{r.value=s.getState()};function _(){S.back()}document.onkeydown=k=>{var v,C;if(!(k.shiftKey||k.altKey)){if(k.ctrlKey){switch(k.key){case"z":r.value.canUndo&&s.undo();break;case"y":r.value.canRedo&&s.redo();break}return}switch(k.key){case"w":a.autoPost({msg:"$upgrade"});break;case"z":a.autoPost({msg:"$finish"});break;case"c":a.autoPost({msg:(v=a.getPlayer())!=null&&v.locked?"$unlock":"$lock"});break;case"r":a.autoPost({msg:"$refresh"});break;default:{const z=o.value.player[a.pos];if(!z||z.selected.area==="none")break;for(const U of((C=z[z.selected.area][z.selected.place])==null?void 0:C.actions)||[])if(k.key===U.acckey){a.post(U.msg);break}}}}};const m=wt(!1),f=wt(""),n=ft(()=>o.value.config.ActivePack.map(k=>De[k]).reduce((k,v)=>k.concat(v),[]).map(k=>Ut[k]).map((k,v)=>({card:k,find:k.pinyin.indexOf(f.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({card:k})=>k).slice(0,10)),p=wt(!1),i=wt(""),c=ft(()=>o.value.config.ActiveUnit.map(k=>Pe[k]).map((k,v)=>({unit:k,find:k.pinyin.indexOf(i.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({unit:k})=>k).slice(0,10)),l=wt(!1),y=wt([]);function x(){b.Upload(y.value[0]),l.value=!1}return(k,v)=>(Y(),st(dt,null,[q(hr,{class:"MiddleScale",state:o.value,client:W(a)},{default:at(()=>{var C,z,U,B;return[Q("div",yr,[q(mt,{variant:"flat",onClick:v[0]||(v[0]=F=>_())},{default:at(()=>[pt(" 返回 ")]),_:1}),q(mt,{variant:"flat",onClick:v[1]||(v[1]=F=>m.value=!0),disabled:((C=W(h))==null?void 0:C.status)!=="normal"},{default:at(()=>[pt(" 卡牌 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",disabled:((z=W(h))==null?void 0:z.selected.area)!=="present"||((U=W(h))==null?void 0:U.status)!=="normal",onClick:v[2]||(v[2]=F=>p.value=!0)},{default:at(()=>[pt(" 单位 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",disabled:((B=W(h))==null?void 0:B.status)!=="normal",onClick:v[3]||(v[3]=F=>W(a).autoPost({msg:"$cheat",type:"resource"}))},{default:at(()=>[pt(" 资源 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",class:"mt-auto",onClick:v[4]||(v[4]=F=>W(u).toggleFullScreen())},{default:at(()=>[pt(it(W(u).isFullScreen?"窗口":"全屏"),1)]),_:1})]),Q("div",br,[q(mt,{variant:"flat",disabled:!r.value.canUndo,onClick:v[5]||(v[5]=F=>W(s).undo())},{default:at(()=>[pt(" 撤销 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",disabled:!r.value.canRedo,onClick:v[6]||(v[6]=F=>W(s).redo())},{default:at(()=>[pt(" 重做 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",onClick:v[7]||(v[7]=F=>W(b).SaveStorage(W(s).save))},{default:at(()=>[pt(" 保存 ")]),_:1}),q(mt,{variant:"flat",disabled:!W(b).save,onClick:v[8]||(v[8]=F=>W(b).save?W(s).load(W(b).save):void 0)},{default:at(()=>[pt(" 读取 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",disabled:!W(b).save,onClick:v[9]||(v[9]=F=>W(b).CleanStorage())},{default:at(()=>[pt(" 清除 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",disabled:!W(b).save,onClick:v[10]||(v[10]=F=>W(b).Download())},{default:at(()=>[pt(" 导出 ")]),_:1},8,["disabled"]),q(mt,{variant:"flat",onClick:v[11]||(v[11]=F=>l.value=!0)},{default:at(()=>[pt(" 导入 ")]),_:1})])]}),_:1},8,["state","client"]),q(Zt,{modelValue:m.value,"onUpdate:modelValue":v[14]||(v[14]=C=>m.value=C)},{default:at(()=>[q(zt,null,{default:at(()=>[q(Vt,null,{default:at(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:f.value,"onUpdate:modelValue":v[12]||(v[12]=C=>f.value=C),onKeyup:v[13]||(v[13]=se(C=>W(n).length>0&&W(a).autoPost({msg:"$cheat",type:"card",cardt:W(n)[0].name}),["enter"]))},null,8,["density","modelValue"]),Q("div",wr,[(Y(!0),st(dt,null,yt(W(n),(C,z)=>(Y(),kt(mt,{variant:"flat",class:Ft({enterSelect:z===0}),key:`GCChoice-${z}`,onClick:U=>W(a).autoPost({msg:"$cheat",type:"card",cardt:C.name})},{default:at(()=>[pt(it(C.pinyin)+" "+it(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q(Zt,{modelValue:p.value,"onUpdate:modelValue":v[17]||(v[17]=C=>p.value=C)},{default:at(()=>[q(zt,null,{default:at(()=>[q(Vt,null,{default:at(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:i.value,"onUpdate:modelValue":v[15]||(v[15]=C=>i.value=C),onKeyup:v[16]||(v[16]=se(C=>{var z;return W(c).length>0&&W(a).autoPost({msg:"$cheat",type:"unit",units:[W(c)[0].name],place:((z=W(h))==null?void 0:z.selected.place)??0})},["enter"]))},null,8,["density","modelValue"]),Q("div",kr,[(Y(!0),st(dt,null,yt(W(c),(C,z)=>(Y(),kt(mt,{variant:"flat",class:Ft({enterSelect:z===0}),key:`GUChoice-${z}`,onClick:U=>{var B;return W(a).autoPost({msg:"$cheat",type:"unit",units:[C.name],place:((B=W(h))==null?void 0:B.selected.place)??0})}},{default:at(()=>[pt(it(C.pinyin)+" "+it(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q(Zt,{modelValue:l.value,"onUpdate:modelValue":v[20]||(v[20]=C=>l.value=C)},{default:at(()=>[q(zt,null,{default:at(()=>[q(Je,null,{default:at(()=>[pt(" 导入 ")]),_:1}),q(Vt,null,{default:at(()=>[q(_r,{modelValue:y.value,"onUpdate:modelValue":v[18]||(v[18]=C=>y.value=C),accept:".SCTReplay"},null,8,["modelValue"])]),_:1}),q(He,null,{default:at(()=>[q(ve,{color:"primary",disabled:y.value.length!==1,onClick:v[19]||(v[19]=C=>x())},{default:at(()=>[pt(" 确定 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Sr as default};
