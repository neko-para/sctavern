import{u as C,W as b,_ as S,a as o,C as k}from"./save-64be535f.js";import{d as $,r as f,c as w,j as s,s as t,ab as l,ah as L,a5 as V,o as y,aK as r,ad as d,u as B}from"./index-55be30ac.js";import"./forwardRefs-9a5fea92.js";const N=r("span",{class:"Label mx-auto"},"菜单",-1),R={class:"d-flex"},U={class:"d-flex flex-column"},G={class:"d-flex flex-column"},E=$({__name:"LocalGame",props:{config:null},setup(_){const m=_,p=B(),n=C();n.LoadStorage();const a=new b,g=new k(0,a);a.init(m.config),a.game.start();const v=f({canUndo:!1,canRedo:!1}),u=f(a.game.getState());a.server.notify.push(c=>{u.value=c}),a.saveStateChanged=()=>{v.value=a.getState()};function x(){p.back()}return(c,e)=>(y(),w(V,null,[s(S,{state:u.value,client:t(g)},null,8,["state","client"]),s(L,{class:"Debug d-flex flex-column"},{default:l(()=>[N,r("div",R,[r("div",U,[s(o,{variant:"elevated",onClick:e[0]||(e[0]=i=>x())},{default:l(()=>[d(" 返回 ")]),_:1})]),r("div",G,[s(o,{variant:"elevated",disabled:!v.value.canUndo,onClick:e[1]||(e[1]=i=>t(a).undo())},{default:l(()=>[d(" 撤销 ")]),_:1},8,["disabled"]),s(o,{variant:"elevated",disabled:!v.value.canRedo,onClick:e[2]||(e[2]=i=>t(a).redo())},{default:l(()=>[d(" 重做 ")]),_:1},8,["disabled"]),s(o,{variant:"elevated",onClick:e[3]||(e[3]=i=>t(n).SaveStorage(t(a).save))},{default:l(()=>[d(" 保存 ")]),_:1}),s(o,{variant:"elevated",disabled:!t(n).save,onClick:e[4]||(e[4]=i=>t(n).save?t(a).load(t(n).save):void 0)},{default:l(()=>[d(" 读取 ")]),_:1},8,["disabled"]),s(o,{variant:"elevated",disabled:!t(n).save,onClick:e[5]||(e[5]=i=>t(n).CleanStorage())},{default:l(()=>[d(" 清除 ")]),_:1},8,["disabled"])])])]),_:1})],64))}});export{E as default};
