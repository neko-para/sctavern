import{aE as ne,$ as xe,a2 as Se,aF as Ce,aG as Gt,M as Bt,N as qt,O as At,P as it,R as W,Q as Y,U as X,aH as he,T as st,c as ft,h as q,aI as Zt,aJ as rt,K as dt,W as bt,L as pt,Y as Ct,aK as Ut,i as pe,u as Yt,r as wt,ap as Ee,F as re,f as Xt,l as Rt,s as me,H as Ie,g as ze,aL as Te,a as Oe,q as Be,J as Re,aM as ae,j as Ke,av as ie,aN as se,a0 as We,aO as De,aP as Pe}from"./index-39f435d6.js";import{P as ve,O as Ot,B as _e,C as Ze,D as ge,H as Qt,F as ye,i as Ue,G as be,c as Fe,S as Le,f as Ne,T as Ge,U as je,M as $e,W as Me,e as Ve,X as Vt,N as oe,Y as Je,Q as He}from"./VOverlay-cad0c7e9.js";class qe{constructor(H,u,S=!1){this.pos=H,this.wrapper=u,this.observer=S}post(H){this.observer||this.wrapper.game.input({...H})}autoPost(H){this.post({...H,player:this.pos})}getPlayer(){return this.wrapper.game.player[this.pos]}}class le{constructor(){this.notify=[]}emit(H){this.notify.forEach(u=>u(H))}}class Ye{constructor(){this.server=new le,this.server.notify.push(()=>{this.loading||this.autoSave()}),this.game=new ne({Pack:["核心"],Seed:1,Role:["白板"],Mutation:[],Pve:!1,PoolPack:xe,ActivePack:Se,ActiveUnit:Ce.map(H=>H)},this.server),this.save={old:[Gt.serialize(this.game)],new:[]},this.loading=!1,this.saveStateChanged=()=>{}}unbind(){this.game.$ignore$Server=new le}bind(){this.game.$ignore$Server=this.server,this.loading=!0,this.server.emit(this.game.getState()),this.loading=!1}init(H){this.unbind(),this.game=new ne(H,this.server),this.save={old:[Gt.serialize(this.game)],new:[]},this.saveStateChanged()}load(H){this.save=H,this.loadActive()}loadActive(){this.unbind(),this.game=Gt.deserialize(this.save.old[this.save.old.length-1]),this.bind(),this.saveStateChanged()}undo(){this.save.old.length>1&&(this.save.new.push(this.save.old.pop()),this.loadActive())}redo(){this.save.new.length>0&&(this.save.old.push(this.save.new.pop()),this.loadActive())}getState(){return{canRedo:this.save.new.length>0,canUndo:this.save.old.length>1}}autoSave(){this.save.new=[],this.save.old.push(Gt.serialize(this.game)),this.saveStateChanged()}}const Xe=["_acc"],gt=Bt({__name:"AutoButton",props:{variant:{default:"elevated"},accelerator:{default:null}},setup(B){const H=qt();return(u,S)=>(Y(),At(ve,{variant:B.variant,size:W(H).isMobile?"x-small":"large"},{default:it(()=>[X("span",{_acc:B.accelerator?`[${B.accelerator}]`:""},[he(u.$slots,"default")],8,Xe)]),_:3},8,["variant","size"]))}}),Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAMAAAAcqPc3AAABiVBMVEUAAAAAAP8AgIAAVapAQIAzZpkrVYAkSZIgYJ8zZpkuXYsnYokwYI8tWpYrVZUpXI8kW5IsWI0pWpQoWI8nXZMsV5IpWpErW5InWZAnWJMrWpIoWZIpWpIoWpAqW5MpWpEoWZIrXJAqWpEoWpIoWZArW5IqWpAqWZEpW5AoWZIoW5EqWpIqWZApWpEpWpAoW5EoWpIpWpAoW5AqWZIqW5EpWZApW5EoWpAqWZEoWZEoW5ApWpIoWZEoW5EqWpApWZEpWpEoWpEpWpAoWpIqWZEqW5EpWpApW5AqWZIpWpEoWpAoW5EpWpEpW5EqWpEpW5EpW5EpWpIpW5EpWpEpWpEoWpAqWpEpWZIpWZEpWpEqWpApW5EpWpIpWpEpW5EoWpEpWpEpWpEpWpEoWZEpWpEpWpEpWZEpWpIpW5EqWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEoWpEpWZEpWpEpWpEpW5EpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpH///9iquSlAAAAgXRSTlMAAQIDBAUGBwgKCw0QERgZHB0fICEjJSouNDY/REdJSk1OT1JTVFVWV1laW1xdXl9gY2VnaGprbG1yc3d4eXp7fX+DhYaHiIqMkJGSlJWZo6mqtLu8vb6/wsPExcbHyMrMzs/Q0dLT1NbX2Nna3N7f4OPk5ebn6uzu7/Hz9/j5+vygaELFAAAAAWJLR0SCi7P/RAAAATRJREFUGBltwQc3QmEABuC3IknIyEhGqWyykln2zsgudclIiJIV4v3n7ndzTufgeZCn3y7Bf+a5hH9Uf3x91uAvu9/ib0OeNiiFAoHA/qENjXshSTjWAbBQsWuqHzOXb1LRDGCVQnTYTWYM7hAFP4BEoH2G5GNTgpw6I7ni2HlQodZXZh6n7J0/vHVGXz0MsPI3BwoBWHkiMe9Eoh2CNV26y7wDQ9IOoaWr6jXbPkHB5/jImJytECrUR5ODxgyFt8r+ibC6Agobb3sjzJFcV3RCoY7Sc3EWoxA7jw/xUg2hgymdtyRG4Vo/rb1nJ2SaOEeAVua0AYO8KQAwwKQOiJDMkjxVQXvHPqA4xWcp3EXZMmWukPTERBE8L7L1YHprcc4wu7CRulijbBSK2h4NclTdDRC+AT2KgPJ9IL5pAAAAAElFTkSuQmCC",tn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAfCAMAAADZe72GAAABQVBMVEUAAAD//wD//wD/qlW/v0DMzDPV1Svb20no0UbVv0DYxDvhwzzjxjnkyUPZzEDbzj3eyEPfykDbyEDcyj7fx0DgyT7hyzzbzELgxz7byjveyTzgyz7gxz3cyDzdyUDeyz3cyj7eyT/eyj7fyj3fx0DgyD/cyT7fykDgyz/fyD3fyT3eyj7eyj3fyT7fyj3eyT7fyD/dyj/eyT3fyD7dyT3fyT/dyj7dyD3eyT7fyT7eyj7eyT3eyT7eyD/fyT7fyT3eyT7dyT7dyT/eyT7eyT7eyT3eyT7eyj7eyD3eyT7eyT3eyD7eyT7eyT/eyT7eyT7eyT7eyT7fyT3eyT7eyT3dyT7eyj7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7///8gDrLIAAAAaXRSTlMAAQIDBAUGBwsMDRESExQVFxgcHSAhIiMpKy8xMjM0Njo9Pj9AQUJISU9QVlxfYGNmaWxvcXZ4eXt/i5Kco6Wmqq6vsrS3uLq7wcPJztDT1trb3N/g5OXn6Orr7PDx8vP09vj5+vv8/f6Lin9bAAAAAWJLR0RqJWKVDgAAAP9JREFUGBldwQc7QgEAhtG3CGWUSLKbCNmSEdmR2SCblu///wFX6tF1DgxaMfNHMAukMAvWvJgEtYtJSJqnVUh69dEiJCnr4k9Iyq/MUudzAWEpAUMdGLov2iEsbcBExoPhYQHCUgqsHzd2IHcEEakyiqOsBFAogL8kFTdPpJwFx2cJsK1VZdhZ6iWuZ6CnPy7DFpZYRddgL76NP8mQuZO0B+4vRU/VtAhMTluO1VB2wtwYUyU1JMHxWL2tqaE6AstqsQ0cyJA7LMtw2QVcSUp2si4p78HwLp3bICDlvPx4UWUYiOnMSV1W+4A1vdrGr7SigMdNU0J9mAzc888MJt/I0kvypbVLxQAAAABJRU5ErkJggg==",en="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAMAAABrajdMAAAB4FBMVEUAAAD/AP+AAICAQICZM5mAK4CSJJKAIJ+OHI6AM5mLLouAK5WJJ4mAJJKHLZaOK46GKJSMJoyGJJKFLJCFKY+JJ5OEJo6JJJKIK5GMKZSLJ5OHK46KKZGGKJSJJ5CGJpOJLI+GK5KIKo6FKZGIKJOLJ5CIK5KHKpKKKY+HK5CJK5KGKpCJKZKIKJGGJ5OKKpKIKZCKKJKHKI+HKZKHKJKHK5GIKpOKKJCIKJKJK5CIKpGJKJKHKJCHKZCIKJGJKpKIKpCJKZGIKZCHKJGIKpKIKZKIKZGJKJCIKZGJKZKIKJGIKpGIKZGHKZKIKpCJKZGIKZKJKZGIKpCHKZGIKJKHKpGIKpGIKJGJKpKIKpGIKZGHKJCHKpKIKZGJKZGIKJCJKpGIKZGIKZGIKJGHKZGIKZKIKZGIKpGIKZGJKZKIKZGIKJGIKZCIKZGJKJGIKpKIKJCIKpGIKZKIKZGJKpCIKZGJKZKIKZGIKJGIKZCIKZKIKZGIKZGIKZGIKZGIKZGIKZGIKZKIKZGIKpGIKZGIKZGHKZGIKZGIKJGIKZGIKZGIKZGIKJCIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZH///8QAlFtAAAAnnRSTlMAAQIEBQYHCAkKCwwNDhESExQVFxkaGxweHyEkJSYnKCkqKywtLi8xMjU2Nzg6Oz0+P0BERkhJTE1OT1JTV1pbXF1eZmdpa2xvcHJ0dnd6e3x9gYSFhoeLjI2OkZOWl5iZnJ2eoKGjpaeoqautrre4vb6/wcTFxsnKy83O0tbY2drb3N3e3+Dh4+Tm5+nq6+zt7vDx8/T29/n6+/z9/ohh8dsAAAABYktHRJ/otZOdAAABlElEQVQYGW3BiVuLAQDH8d/aotiGvM7S4ajJFcnRtCiRtbByLJIVQ1RDJiTLkavNkWzW2vdvtbee8Xoen48samr1X7aRe25Zudr6boeaHdqQiRsq119O7yS8OaIJnhfvDsjC8Yi5Y3oGFzb/MrTME4qOle9lWJvS2dNV++mSad0oMC4HqZ5J4lI/I3aXpKaGfa2xzOVBloyN5nhS1qI8o1+rM/yR8V480S2pZnaxvQOINm9tuA8kbe6ZgF2lr+ZeAtl2mXqBhzOcbFKo16lxCGpbNHF3lf0tEP9ZEVHdzlvGez6vcH8CgroBWVdl15AUI29A3bw+9S6sq0DP9ZxHO+b95+GcHhDQpcOKYXosdbQUlYFfEcKqkhfTgkfyGU+nYUjHWQjWd6YwXZFUUs9ElGSxBil4sVJ5BxJuZ46zKoqw7IMhU8VwYyf82CW1fiHv+3YtsfnamL2TTh6S1vqn+FqngvXfquVjcWCjpNpKFazRwRIZQPpmtSz29G2R4xp5H4/KqjExnwKmzpTqX+5AOBL0yOo3LpiexziX8A0AAAAASUVORK5CYII=",nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAAAmJLR0QA/4ePzL8AAAImSURBVDjLhZRNSFVREMdPlNGiTYWFm77EKErEVUgLIUWqRYvAIDLRO7+5+jT7AAmqjSDlppIwKItaWFFpaGXLhFYVJD2KzBZKRfaNditFK3RavPte7/kUz2z+cH5zZs6cmeNc2tJierXdz3ZzLd1IN4Zh/KGVFbOC/kquMRmiMQvkaMWidDBDD/IrBYzboJSmoFLEqxnBuD1gg3POudL53MJ4xpqqnJiLdvnZXh5vMUwv+1myhUkmpMo5V71a8ulngFppZATDeC31NDGKYUQ5pC2Y3IgsoczxlVPVyznG2KxJDMg2LSRK4AgwvuB7a7kzAzhOg7+ejlhtHAHv+IQR1UKvRPuSUbktm6SR8XghHQHH/Sx+YhgdVTkcCDN/zlbdy1CS83dHwFBlJo8TYU/IKm0h4hXwCMPo8fKk/j9sDDMVwmMYH70CamNvqW2yX+u0MBmO26ifwXmMCGcxjH4txrgqF6fBcoT3GGVeHkaEcxhGJ0+ZYhcT02A/l3KM3/RiRPRCPJrel7tJF9Qz2obRKYcT6US4lNAPE2rEEUijn8FgylNEuJLQn3mRBDOmu4mmwtoWqknJl9Oh/ub8zfIkCWtmBMPneryby5fJGwyjW9c559w8yvkQ1mSp1mAINxMX/IFpn1eS1P41i2liAtOT7MC0ImwdwxjWuoYF6aOVre3h+fu0C8P4S2tl5qxDK0W8xNjDPYweP3eOz6B0odTrdpp1Z/reP9LLBjo3QdHHAAAAAElFTkSuQmCC",rn={T:Qe,P:tn,Z:en,N:nn},an={class:"raceIconRoot align-center justify-center"},sn=["src"],Ft=Bt({__name:"RaceIcon",props:{race:null},setup(B){return(H,u)=>(Y(),st("div",an,[X("img",{src:W(rn)[B.race]},null,8,sn)]))}});const on={class:"d-flex"},ln={class:"Label ml-1"},un={class:"Label ml-auto mr-1"},cn={class:"d-flex mt-auto"},ue=Bt({__name:"StoreItem",props:{state:null,client:null,place:null},setup(B){const H=B,u=ft(()=>H.state.player[H.client.pos]?.store[H.place]||null),S=ft(()=>H.state.player[H.client.pos]?.selected||{area:"none",place:-1}),b={enter:"购买",combine:"三连",stage:"暂存"},o=ft(()=>S.value.area==="store"&&S.value.place===H.place);return(i,n)=>(Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start KeyCard",{selected:W(o),unselected:!W(o)}]),color:W(u)&&H.state.player[H.client.pos]?.locked?"cyan":"",onClick:n[0]||(n[0]=s=>B.client.autoPost(W(u)?{msg:"$select",area:"store",place:B.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>[W(u)?(Y(),st(dt,{key:0},[X("div",on,[q(Ft,{race:W(Zt)[W(u).card].race},null,8,["race"]),X("span",ln,rt(W(u).card),1),X("span",un,rt(W(Zt)[W(u).card].level),1)]),X("div",cn,[(Y(!0),st(dt,null,bt(W(u)?.actions||[],(s,f)=>(Y(),At(gt,{variant:"text",key:`SA-${f}`,disabled:!s.enable,onClick:y=>B.client.post(s.msg)},{default:it(()=>[pt(rt(b[s.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]),_:1},8,["color","class"]))}}),dn={class:"d-flex"},fn={class:"Label ml-1"},hn={class:"Label ml-auto mr-1"},pn={class:"d-flex mt-auto"},ce=Bt({__name:"HandItem",props:{state:null,client:null,place:null},setup(B){const H=B,u=ft(()=>H.state.player[H.client.pos]?.hand[H.place]||null),S=ft(()=>H.state.player[H.client.pos]?.selected||{area:"none",place:-1}),b={enter:"进场",combine:"三连",sell:"出售"},o=ft(()=>S.value.area==="hand"&&S.value.place===H.place);return(i,n)=>(Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start KeyCard",{selected:W(o),unselected:!W(o)}]),onClick:n[0]||(n[0]=s=>B.client.autoPost(W(u)?{msg:"$select",area:"hand",place:B.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>[W(u)?(Y(),st(dt,{key:0},[X("div",dn,[q(Ft,{race:W(Zt)[W(u).card].race},null,8,["race"]),X("span",fn,rt(W(u).card),1),X("span",hn,rt(W(Zt)[W(u).card].level),1)]),X("div",pn,[(Y(!0),st(dt,null,bt(W(u)?.actions||[],(s,f)=>(Y(),At(gt,{variant:"text",key:`HA-${f}`,disabled:!s.enable,onClick:y=>B.client.post(s.msg)},{default:it(()=>[pt(rt(b[s.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]),_:1},8,["class"]))}}),mn={class:"d-flex flex-column"},Pt=Bt({__name:"AutoSpan",props:{text:null},setup(B){return(H,u)=>(Y(),st("div",mn,[(Y(!0),st(dt,null,bt(B.text,(S,b)=>(Y(),st("div",{class:"d-flex flex-column ASRow",key:`S-${b}`},[(Y(!0),st(dt,null,bt(S.split(`
`),(o,i)=>(Y(),st("span",{class:"Info",key:`SS-${b}-${i}`},rt(o),1))),128))]))),128))]))}});const $t=pe()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,..._e({origin:"center center",scrollStrategy:"block",transition:{component:Ze},zIndex:2400})},emits:{"update:modelValue":B=>!0},setup(B,H){let{slots:u}=H;const S=Yt(B,"modelValue"),{scopeId:b}=ge(),o=wt();function i(n){var s,f;const y=n.relatedTarget,_=n.target;if(y!==_&&(s=o.value)!=null&&s.contentEl&&(f=o.value)!=null&&f.globalTop&&![document,o.value.contentEl].includes(_)&&!o.value.contentEl.contains(_)){const p=[...o.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(a=>!a.hasAttribute("disabled")&&!a.matches('[tabindex="-1"]'));if(!p.length)return;const r=p[0],h=p[p.length-1];y===r?h.focus():r.focus()}}return Ee&&re(()=>S.value&&B.retainFocus,n=>{n?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0}),re(S,async n=>{if(await me(),n){var s;(s=o.value.contentEl)==null||s.focus({preventScroll:!0})}else{var f;(f=o.value.activatorEl)==null||f.focus({preventScroll:!0})}}),Xt(()=>{const[n]=ye(B);return q(be,Rt({ref:o,class:["v-dialog",{"v-dialog--fullscreen":B.fullscreen,"v-dialog--scrollable":B.scrollable}]},n,{modelValue:S.value,"onUpdate:modelValue":s=>S.value=s,"aria-role":"dialog","aria-modal":"true",activatorProps:Rt({"aria-haspopup":"dialog","aria-expanded":String(S.value)},B.activatorProps)},b),{activator:u.activator,default:function(){for(var s,f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return q(Ue,{root:!0},{default:()=>[(s=u.default)==null?void 0:s.call(u,...y)]})}})}),Qt({},o)}});const vn=pe()({name:"VTooltip",props:{id:String,text:String,...Ie(_e({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":B=>!0},setup(B,H){let{slots:u}=H;const S=Yt(B,"modelValue"),{scopeId:b}=ge(),o=ze(),i=ft(()=>B.id||`v-tooltip-${o}`),n=wt(),s=ft(()=>B.location.split(" ").length>1?B.location:B.location+" center"),f=ft(()=>B.origin==="auto"||B.origin==="overlap"||B.origin.split(" ").length>1||B.location.split(" ").length>1?B.origin:B.origin+" center"),y=ft(()=>B.transition?B.transition:S.value?"scale-transition":"fade-transition");return Xt(()=>{const[_]=ye(B);return q(be,Rt({ref:n,class:["v-tooltip"],id:i.value},_,{modelValue:S.value,"onUpdate:modelValue":p=>S.value=p,transition:y.value,absolute:!0,location:s.value,origin:f.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:Rt({"aria-describedby":i.value},B.activatorProps),_disableGlobalStack:!0},b),{activator:u.activator,default:function(){for(var p,r=arguments.length,h=new Array(r),a=0;a<r;a++)h[a]=arguments[a];return((p=u.default)==null?void 0:p.call(u,...h))??B.text}})}),Qt({},n)}}),_n={class:"d-flex flex-column DescCol overflow-y-auto"},gn={class:"Label"},yn={class:"d-flex"},bn={class:"Label"},wn={class:"Label ml-auto"},kn={class:"d-flex flex-column mt-2 overflow-y-auto"},An={class:"d-flex flex-column UnitCol"},xn={class:"Label"},Sn={class:"d-flex flex-column UpgrCol"},Cn={class:"Label"},En={class:"d-flex"},In={class:"Label"},zn={class:"d-flex"},Tn={class:"Label"},On={class:"Label ml-auto mr-1"},Bn={class:"d-flex flex-column mt-auto"},Rn={key:0,class:"d-flex justify-space-between Info"},Kn={class:"d-flex flex-column"},Wn={class:"d-flex flex-column justify-end"},Dn={class:"d-flex justify-space-between"},Pn={class:"d-flex flex-column"},Zn={class:"Info"},Un={key:1,class:"mt-auto"},Fn={class:"d-flex"},Ln=Bt({__name:"PresentItem",props:{state:null,client:null,place:null},setup(B){const H=B,u=qt(),S=ft(()=>H.state.player[H.client.pos]?.present[H.place]||null),b=ft(()=>{const _=S.value?.card?.color||"normal";return _!=="normal"?_==="gold"?"yellow":_:""}),o=ft(()=>H.state.player[H.client.pos]?.selected||{area:"none",place:-1}),i={upgrade:"升级",sell:"出售",insert:"这里",deploy:"这里"},n=wt(!1);function s(_){const p={};return _.forEach(r=>{p[r]=(p[r]||0)+1}),Object.keys(p).map(r=>`${r}	${p[r]}`)}const f=ft(()=>s(S.value?.card?.units||[])),y=ft(()=>o.value.area==="present"&&o.value.place===H.place);return(_,p)=>(Y(),At(Ot,{class:Ut(["d-flex flex-column align-self-start PresCard",{selected:W(y),unselected:!W(y)}]),color:W(b),onClick:p[2]||(p[2]=r=>B.client.autoPost(W(S)?.card?{msg:"$select",area:"present",place:B.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>[W(S)?(Y(),st(dt,{key:0},[W(S).card?(Y(),st(dt,{key:0},[q($t,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=r=>n.value=r),class:"w-75"},{default:it(()=>[q(Ot,{class:"d-flex flex-row InfoCard pa-2 justify-space-between"},{default:it(()=>[X("div",_n,[X("span",gn,rt(W(S).card.name),1),X("div",yn,[q(Ft,{race:W(S).card.race},null,8,["race"]),X("span",bn,rt(W(S).card.level),1),X("span",wn,rt(W(S).card.value),1)]),X("div",kn,[q(Pt,{text:W(S).card.descs},null,8,["text"]),q(Pt,{class:"mt-2",text:W(S).card.notes},null,8,["text"])])]),X("div",An,[X("span",xn," 单位 "+rt(W(S).card.units.length)+" / "+rt(W(S).card.config.MaxUnit),1),q(Pt,{class:"overflow-y-auto",text:W(f)},null,8,["text"])]),X("div",Sn,[X("span",Cn," 升级 "+rt(W(S).card.upgrades.length)+" / "+rt(W(S).card.config.MaxUpgrade),1),q(Pt,{text:W(S).card.upgrades},null,8,["text"])])]),_:1})]),_:1},8,["modelValue"]),X("div",En,[q(gt,{variant:"text",onClick:p[1]||(p[1]=r=>n.value=!0)},{default:it(()=>[pt(" 信息 ")]),_:1})]),X("span",In,rt(W(S).card.name),1),X("div",zn,[q(Ft,{race:W(S).card.race},null,8,["race"]),X("span",Tn,rt(W(S).card.level),1),X("span",On,rt(W(S).card.value),1)]),q(Pt,{text:W(S).card.notes},null,8,["text"]),X("div",Bn,[W(u).isMobile?Ct("",!0):(Y(),st("div",Rn,[X("div",Kn,[(Y(!0),st(dt,null,bt(W(f).slice(0,5),(r,h)=>(Y(),st("span",{key:`Unit-${h}`},rt(r),1))),128))]),X("div",Wn,[(Y(!0),st(dt,null,bt(W(S).card.upgrades,(r,h)=>(Y(),st("span",{key:`Upgrade-${h}`},rt(r),1))),128))])])),X("div",Dn,[q(vn,{location:"top"},{activator:it(({props:r})=>[X("span",Rt({class:"Info"},r),rt(W(S).card.units.length)+" / "+rt(W(S).card.config.MaxUnit),17)]),default:it(()=>[X("div",Pn,[(Y(!0),st(dt,null,bt(W(f),(r,h)=>(Y(),st("span",{class:"Info",key:`UnitTip-${h}`},rt(r),1))),128))])]),_:1}),X("span",Zn,rt(W(S).card.upgrades.length)+" / "+rt(W(S).card.config.MaxUpgrade),1)])])],64)):(Y(),st("div",Un)),X("div",Fn,[(Y(!0),st(dt,null,bt(W(S).actions||[],(r,h)=>(Y(),At(gt,{variant:"text",key:`PA-${h}`,disabled:!r.enable,onClick:a=>B.client.post(r.msg)},{default:it(()=>[pt(rt(i[r.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]),_:1},8,["color","class"]))}});const Nn={key:0,class:"d-flex"},Gn={class:"Label ml-1"},jn={class:"Label ml-auto mr-1"},$n={key:1,class:"Label"},Mn={key:2,class:"Label"},Vn={key:3,class:"Label"},de=Bt({__name:"DiscoverItem",props:{state:null,client:null,place:null},setup(B){const H=B,u=ft(()=>H.state.player[H.client.pos]?.discover?.item[H.place]||null);return(S,b)=>(Y(),At(Ot,{class:"d-flex flex-column align-self-start KeyCard",onClick:b[0]||(b[0]=o=>B.client.autoPost({msg:"$choice",category:"discover",place:B.place}))},{default:it(()=>[W(u)?(Y(),st(dt,{key:0},[W(u).type==="card"?(Y(),st("div",Nn,[q(Ft,{race:W(u).card.race},null,8,["race"]),X("span",Gn,rt(W(u).card.name),1),X("span",jn,rt(W(u).card.level),1)])):W(u).type==="upgrade"?(Y(),st("span",$n,rt(W(u).upgrade.name),1)):W(u).type==="prophesy"?(Y(),st("span",Mn,rt(W(u).prophesy.name),1)):(Y(),st("span",Vn,rt(W(u).str),1))],64)):Ct("",!0)]),_:1}))}}),Jn={class:"d-flex flex-column justify-center"},Hn={class:"d-flex"},qn={class:"ml-auto"},Yn=X("hr",null,null,-1),Xn={key:0,class:"d-flex"},Qn={class:"d-flex flex-column"},tr={class:"Info"},er={class:"Info"},nr={class:"HandContainer"},rr={class:"ml-1"},ar={class:"d-flex flex-column"},ir={class:"StoreContainer"},sr={class:"mt-1"},or={key:0,class:"mt-1"},lr={key:0,class:"d-flex mt-1 DiscoverContainer"},ur={class:"mt-1"},cr={key:0,class:"mt-1 mb-1"},dr={class:"d-flex mt-auto mb-1"},fr={class:"PresentContainer"},hr=Bt({__name:"GameInstance",props:{state:null,client:null},setup(B){const H=B,u=ft(()=>H.state.player[H.client.pos]),S=ft(()=>{const o=u.value?.role;return{upgrade:"升级",refresh:"刷新",lock:"锁定",unlock:"解锁",finish:"结束",ability:o?o.ability+(o.progress?` ${o.progress.cur} / ${o.progress.max}`:""):"魂姿"}}),b=wt(!0);return(o,i)=>(Y(),st("div",Jn,[X("div",Hn,[q(Ot,{class:"ControlPanel d-flex flex-column"},{default:it(()=>[X("div",qn,[q(gt,{variant:"flat",onClick:i[0]||(i[0]=n=>b.value=!b.value)},{default:it(()=>[pt(" 菜单 ")]),_:1})]),b.value?(Y(),st(dt,{key:0},[Yn,b.value?(Y(),st("div",Xn,[he(o.$slots,"default")])):Ct("",!0)],64)):Ct("",!0)]),_:3}),X("div",Qn,[X("span",tr," 回合 "+rt(B.state.round)+" 等级 "+rt(W(u)?.level)+" 生命 "+rt(W(u)?.life)+" 价值 "+rt(W(u)?.present.map(n=>n.card?.value||0).reduce((n,s)=>n+s,0)),1),X("span",er," 升级 "+rt(W(u)?.upgrade_cost)+" 晶矿 "+rt(W(u)?.mineral)+" / "+rt(W(u)?.mineral_max)+" 瓦斯 "+rt(W(u)?.gas)+" / "+rt(W(u)?.gas_max),1),X("div",nr,[X("div",null,[(Y(),st(dt,null,bt(3,n=>q(ce,{class:"mt-1",key:`Hand${n-1}`,state:B.state,client:B.client,place:n-1},null,8,["state","client","place"])),64))]),X("div",rr,[(Y(),st(dt,null,bt(3,n=>q(ce,{class:"mt-1",key:`Hand${n+2}`,state:B.state,client:B.client,place:n+2},null,8,["state","client","place"])),64))])])]),X("div",ar,[X("div",ir,[X("div",sr,[(Y(!0),st(dt,null,bt(W(u)?.store.slice(0,3)||[],(n,s)=>(Y(),At(ue,{class:"ml-2",key:`Store${s}`,state:B.state,client:B.client,place:s},null,8,["state","client","place"]))),128))]),(W(u)?.store.length||0)>3?(Y(),st("div",or,[(Y(!0),st(dt,null,bt(W(u)?.store.slice(3)||[],(n,s)=>(Y(),At(ue,{class:"ml-2",key:`Store${s+3}`,state:B.state,client:B.client,place:s+3},null,8,["state","client","place"]))),128))])):Ct("",!0)]),W(u)?.status==="discover"&&W(u).discover?(Y(),st("div",lr,[X("div",ur,[(Y(!0),st(dt,null,bt(W(u)?.discover?.item.slice(0,3)||[],(n,s)=>(Y(),At(de,{class:"ml-2",key:`Discover${s}`,state:B.state,client:B.client,place:s},null,8,["state","client","place"]))),128))]),W(u)?.discover?.item.length>3?(Y(),st("div",cr,[(Y(!0),st(dt,null,bt(W(u)?.discover?.item.slice(3)||[],(n,s)=>(Y(),At(de,{class:"ml-2",key:`Discover${s+3}`,state:B.state,client:B.client,place:s+3},null,8,["state","client","place"]))),128)),W(u)?.discover?.extra?(Y(),At(gt,{key:0,class:"ml-2",onClick:i[1]||(i[1]=n=>B.client.autoPost({msg:"$choice",category:"discover",place:-1}))},{default:it(()=>[pt(rt(W(u)?.discover?.extra),1)]),_:1})):Ct("",!0)])):Ct("",!0)])):Ct("",!0),X("div",dr,[(Y(!0),st(dt,null,bt(W(u)?.action||[],(n,s)=>(Y(),At(gt,{class:"ml-2",variant:"elevated",key:`GA-${s}`,disabled:!n.enable,onClick:f=>B.client.post(n.msg)},{default:it(()=>[pt(rt(W(S)[n.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])])]),X("div",fr,[(Y(),st(dt,null,bt(7,n=>q(Ln,{class:"mt-1",key:`Present${n-1}`,state:B.state,client:B.client,place:n-1},null,8,["state","client","place"])),64))])]))}});var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jt={},pr={get exports(){return Jt},set exports(B){Jt=B}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(B,H){(function(u){B.exports=u()})(function(){return function u(S,b,o){function i(f,y){if(!b[f]){if(!S[f]){var _=typeof jt=="function"&&jt;if(!y&&_)return _(f,!0);if(n)return n(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var r=b[f]={exports:{}};S[f][0].call(r.exports,function(h){var a=S[f][1][h];return i(a||h)},r,r.exports,u,S,b,o)}return b[f].exports}for(var n=typeof jt=="function"&&jt,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(u,S,b){var o=u("./utils"),i=u("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(s){for(var f,y,_,p,r,h,a,d=[],l=0,g=s.length,A=g,k=o.getTypeOf(s)!=="string";l<s.length;)A=g-l,_=k?(f=s[l++],y=l<g?s[l++]:0,l<g?s[l++]:0):(f=s.charCodeAt(l++),y=l<g?s.charCodeAt(l++):0,l<g?s.charCodeAt(l++):0),p=f>>2,r=(3&f)<<4|y>>4,h=1<A?(15&y)<<2|_>>6:64,a=2<A?63&_:64,d.push(n.charAt(p)+n.charAt(r)+n.charAt(h)+n.charAt(a));return d.join("")},b.decode=function(s){var f,y,_,p,r,h,a=0,d=0,l="data:";if(s.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var g,A=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===n.charAt(64)&&A--,s.charAt(s.length-2)===n.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=i.uint8array?new Uint8Array(0|A):new Array(0|A);a<s.length;)f=n.indexOf(s.charAt(a++))<<2|(p=n.indexOf(s.charAt(a++)))>>4,y=(15&p)<<4|(r=n.indexOf(s.charAt(a++)))>>2,_=(3&r)<<6|(h=n.indexOf(s.charAt(a++))),g[d++]=f,r!==64&&(g[d++]=y),h!==64&&(g[d++]=_);return g}},{"./support":30,"./utils":32}],2:[function(u,S,b){var o=u("./external"),i=u("./stream/DataWorker"),n=u("./stream/Crc32Probe"),s=u("./stream/DataLengthProbe");function f(y,_,p,r,h){this.compressedSize=y,this.uncompressedSize=_,this.crc32=p,this.compression=r,this.compressedContent=h}f.prototype={getContentWorker:function(){var y=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),_=this;return y.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(y,_,p){return y.pipe(new n).pipe(new s("uncompressedSize")).pipe(_.compressWorker(p)).pipe(new s("compressedSize")).withStreamInfo("compression",_)},S.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,S,b){var o=u("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},b.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,S,b){var o=u("./utils"),i=function(){for(var n,s=[],f=0;f<256;f++){n=f;for(var y=0;y<8;y++)n=1&n?3988292384^n>>>1:n>>>1;s[f]=n}return s}();S.exports=function(n,s){return n!==void 0&&n.length?o.getTypeOf(n)!=="string"?function(f,y,_,p){var r=i,h=p+_;f^=-1;for(var a=p;a<h;a++)f=f>>>8^r[255&(f^y[a])];return-1^f}(0|s,n,n.length,0):function(f,y,_,p){var r=i,h=p+_;f^=-1;for(var a=p;a<h;a++)f=f>>>8^r[255&(f^y.charCodeAt(a))];return-1^f}(0|s,n,n.length,0):0}},{"./utils":32}],5:[function(u,S,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(u,S,b){var o=null;o=typeof Promise<"u"?Promise:u("lie"),S.exports={Promise:o}},{lie:37}],7:[function(u,S,b){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=u("pako"),n=u("./utils"),s=u("./stream/GenericWorker"),f=o?"uint8array":"array";function y(_,p){s.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=p,this.meta={}}b.magic="\b\0",n.inherits(y,s),y.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(f,_.data),!1)},y.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(p){_.push({data:p,meta:_.meta})}},b.compressWorker=function(_){return new y("Deflate",_)},b.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,S,b){function o(r,h){var a,d="";for(a=0;a<h;a++)d+=String.fromCharCode(255&r),r>>>=8;return d}function i(r,h,a,d,l,g){var A,k,m=r.file,C=r.compression,O=g!==f.utf8encode,F=n.transformTo("string",g(m.name)),R=n.transformTo("string",f.utf8encode(m.name)),j=m.comment,et=n.transformTo("string",g(j)),w=n.transformTo("string",f.utf8encode(j)),K=R.length!==m.name.length,e=w.length!==j.length,P="",at="",L="",ot=m.dir,N=m.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};h&&!a||(nt.crc32=r.crc32,nt.compressedSize=r.compressedSize,nt.uncompressedSize=r.uncompressedSize);var z=0;h&&(z|=8),O||!K&&!e||(z|=2048);var E=0,Q=0;ot&&(E|=16),l==="UNIX"?(Q=798,E|=function(M,mt){var kt=M;return M||(kt=mt?16893:33204),(65535&kt)<<16}(m.unixPermissions,ot)):(Q=20,E|=function(M){return 63&(M||0)}(m.dosPermissions)),A=N.getUTCHours(),A<<=6,A|=N.getUTCMinutes(),A<<=5,A|=N.getUTCSeconds()/2,k=N.getUTCFullYear()-1980,k<<=4,k|=N.getUTCMonth()+1,k<<=5,k|=N.getUTCDate(),K&&(at=o(1,1)+o(y(F),4)+R,P+="up"+o(at.length,2)+at),e&&(L=o(1,1)+o(y(et),4)+w,P+="uc"+o(L.length,2)+L);var V="";return V+=`
\0`,V+=o(z,2),V+=C.magic,V+=o(A,2),V+=o(k,2),V+=o(nt.crc32,4),V+=o(nt.compressedSize,4),V+=o(nt.uncompressedSize,4),V+=o(F.length,2),V+=o(P.length,2),{fileRecord:_.LOCAL_FILE_HEADER+V+F+P,dirRecord:_.CENTRAL_FILE_HEADER+o(Q,2)+V+o(et.length,2)+"\0\0\0\0"+o(E,4)+o(d,4)+F+P+et}}var n=u("../utils"),s=u("../stream/GenericWorker"),f=u("../utf8"),y=u("../crc32"),_=u("../signature");function p(r,h,a,d){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=h,this.zipPlatform=a,this.encodeFileName=d,this.streamFiles=r,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(p,s),p.prototype.push=function(r){var h=r.meta.percent||0,a=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(r):(this.bytesWritten+=r.data.length,s.prototype.push.call(this,{data:r.data,meta:{currentFile:this.currentFile,percent:a?(h+100*(a-d-1))/a:100}}))},p.prototype.openedSource=function(r){this.currentSourceOffset=this.bytesWritten,this.currentFile=r.file.name;var h=this.streamFiles&&!r.file.dir;if(h){var a=i(r,h,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(r){this.accumulate=!1;var h=this.streamFiles&&!r.file.dir,a=i(r,h,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),h)this.push({data:function(d){return _.DATA_DESCRIPTOR+o(d.crc32,4)+o(d.compressedSize,4)+o(d.uncompressedSize,4)}(r),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var r=this.bytesWritten,h=0;h<this.dirRecords.length;h++)this.push({data:this.dirRecords[h],meta:{percent:100}});var a=this.bytesWritten-r,d=function(l,g,A,k,m){var C=n.transformTo("string",m(k));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(l,2)+o(l,2)+o(g,4)+o(A,4)+o(C.length,2)+C}(this.dirRecords.length,a,r,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(r){this._sources.push(r);var h=this;return r.on("data",function(a){h.processChunk(a)}),r.on("end",function(){h.closedSource(h.previous.streamInfo),h._sources.length?h.prepareNextSource():h.end()}),r.on("error",function(a){h.error(a)}),this},p.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(r){var h=this._sources;if(!s.prototype.error.call(this,r))return!1;for(var a=0;a<h.length;a++)try{h[a].error(r)}catch{}return!0},p.prototype.lock=function(){s.prototype.lock.call(this);for(var r=this._sources,h=0;h<r.length;h++)r[h].lock()},S.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,S,b){var o=u("../compressions"),i=u("./ZipFileWorker");b.generateWorker=function(n,s,f){var y=new i(s.streamFiles,f,s.platform,s.encodeFileName),_=0;try{n.forEach(function(p,r){_++;var h=function(g,A){var k=g||A,m=o[k];if(!m)throw new Error(k+" is not a valid compression method !");return m}(r.options.compression,s.compression),a=r.options.compressionOptions||s.compressionOptions||{},d=r.dir,l=r.date;r._compressWorker(h,a).withStreamInfo("file",{name:p,dir:d,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(y)}),y.entriesCount=_}catch(p){y.error(p)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,S,b){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var n in this)typeof this[n]!="function"&&(i[n]=this[n]);return i}}(o.prototype=u("./object")).loadAsync=u("./load"),o.support=u("./support"),o.defaults=u("./defaults"),o.version="3.10.1",o.loadAsync=function(i,n){return new o().loadAsync(i,n)},o.external=u("./external"),S.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,S,b){var o=u("./utils"),i=u("./external"),n=u("./utf8"),s=u("./zipEntries"),f=u("./stream/Crc32Probe"),y=u("./nodejsUtils");function _(p){return new i.Promise(function(r,h){var a=p.decompressed.getContentWorker().pipe(new f);a.on("error",function(d){h(d)}).on("end",function(){a.streamInfo.crc32!==p.decompressed.crc32?h(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}S.exports=function(p,r){var h=this;return r=o.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),y.isNode&&y.isStream(p)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",p,!0,r.optimizedBinaryString,r.base64).then(function(a){var d=new s(r);return d.load(a),d}).then(function(a){var d=[i.Promise.resolve(a)],l=a.files;if(r.checkCRC32)for(var g=0;g<l.length;g++)d.push(_(l[g]));return i.Promise.all(d)}).then(function(a){for(var d=a.shift(),l=d.files,g=0;g<l.length;g++){var A=l[g],k=A.fileNameStr,m=o.resolve(A.fileNameStr);h.file(m,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:r.createFolders}),A.dir||(h.file(m).unsafeOriginalName=k)}return d.zipComment.length&&(h.comment=d.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,S,b){var o=u("../utils"),i=u("../stream/GenericWorker");function n(s,f){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(n,i),n.prototype._bindStream=function(s){var f=this;(this._stream=s).pause(),s.on("data",function(y){f.push({data:y,meta:{percent:0}})}).on("error",function(y){f.isPaused?this.generatedError=y:f.error(y)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},n.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,S,b){var o=u("readable-stream").Readable;function i(n,s,f){o.call(this,s),this._helper=n;var y=this;n.on("data",function(_,p){y.push(_)||y._helper.pause(),f&&f(p)}).on("error",function(_){y.emit("error",_)}).on("end",function(){y.push(null)})}u("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},S.exports=i},{"../utils":32,"readable-stream":16}],14:[function(u,S,b){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(u,S,b){function o(m,C,O){var F,R=n.getTypeOf(C),j=n.extend(O||{},y);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(m=l(m)),j.createFolders&&(F=d(m))&&g.call(this,F,!0);var et=R==="string"&&j.binary===!1&&j.base64===!1;O&&O.binary!==void 0||(j.binary=!et),(C instanceof _&&C.uncompressedSize===0||j.dir||!C||C.length===0)&&(j.base64=!1,j.binary=!0,C="",j.compression="STORE",R="string");var w=null;w=C instanceof _||C instanceof s?C:h.isNode&&h.isStream(C)?new a(m,C):n.prepareContent(m,C,j.binary,j.optimizedBinaryString,j.base64);var K=new p(m,w,j);this.files[m]=K}var i=u("./utf8"),n=u("./utils"),s=u("./stream/GenericWorker"),f=u("./stream/StreamHelper"),y=u("./defaults"),_=u("./compressedObject"),p=u("./zipObject"),r=u("./generate"),h=u("./nodejsUtils"),a=u("./nodejs/NodejsStreamInputAdapter"),d=function(m){m.slice(-1)==="/"&&(m=m.substring(0,m.length-1));var C=m.lastIndexOf("/");return 0<C?m.substring(0,C):""},l=function(m){return m.slice(-1)!=="/"&&(m+="/"),m},g=function(m,C){return C=C!==void 0?C:y.createFolders,m=l(m),this.files[m]||o.call(this,m,null,{dir:!0,createFolders:C}),this.files[m]};function A(m){return Object.prototype.toString.call(m)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(m){var C,O,F;for(C in this.files)F=this.files[C],(O=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&m(O,F)},filter:function(m){var C=[];return this.forEach(function(O,F){m(O,F)&&C.push(F)}),C},file:function(m,C,O){if(arguments.length!==1)return m=this.root+m,o.call(this,m,C,O),this;if(A(m)){var F=m;return this.filter(function(j,et){return!et.dir&&F.test(j)})}var R=this.files[this.root+m];return R&&!R.dir?R:null},folder:function(m){if(!m)return this;if(A(m))return this.filter(function(R,j){return j.dir&&m.test(R)});var C=this.root+m,O=g.call(this,C),F=this.clone();return F.root=O.name,F},remove:function(m){m=this.root+m;var C=this.files[m];if(C||(m.slice(-1)!=="/"&&(m+="/"),C=this.files[m]),C&&!C.dir)delete this.files[m];else for(var O=this.filter(function(R,j){return j.name.slice(0,m.length)===m}),F=0;F<O.length;F++)delete this.files[O[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(m){var C,O={};try{if((O=n.extend(m||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");n.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var F=O.comment||this.comment||"";C=r.generateWorker(this,O,F)}catch(R){(C=new s("error")).error(R)}return new f(C,O.type||"string",O.mimeType)},generateAsync:function(m,C){return this.generateInternalStream(m).accumulate(C)},generateNodeStream:function(m,C){return(m=m||{}).type||(m.type="nodebuffer"),this.generateInternalStream(m).toNodejsStream(C)}};S.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,S,b){S.exports=u("stream")},{stream:void 0}],17:[function(u,S,b){var o=u("./DataReader");function i(n){o.call(this,n);for(var s=0;s<this.data.length;s++)n[s]=255&n[s]}u("../utils").inherits(i,o),i.prototype.byteAt=function(n){return this.data[this.zero+n]},i.prototype.lastIndexOfSignature=function(n){for(var s=n.charCodeAt(0),f=n.charCodeAt(1),y=n.charCodeAt(2),_=n.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===s&&this.data[p+1]===f&&this.data[p+2]===y&&this.data[p+3]===_)return p-this.zero;return-1},i.prototype.readAndCheckSignature=function(n){var s=n.charCodeAt(0),f=n.charCodeAt(1),y=n.charCodeAt(2),_=n.charCodeAt(3),p=this.readData(4);return s===p[0]&&f===p[1]&&y===p[2]&&_===p[3]},i.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},S.exports=i},{"../utils":32,"./DataReader":18}],18:[function(u,S,b){var o=u("../utils");function i(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var s,f=0;for(this.checkOffset(n),s=this.index+n-1;s>=this.index;s--)f=(f<<8)+this.byteAt(s);return this.index+=n,f},readString:function(n){return o.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},S.exports=i},{"../utils":32}],19:[function(u,S,b){var o=u("./Uint8ArrayReader");function i(n){o.call(this,n)}u("../utils").inherits(i,o),i.prototype.readData=function(n){this.checkOffset(n);var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},S.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,S,b){var o=u("./DataReader");function i(n){o.call(this,n)}u("../utils").inherits(i,o),i.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},i.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},i.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},i.prototype.readData=function(n){this.checkOffset(n);var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},S.exports=i},{"../utils":32,"./DataReader":18}],21:[function(u,S,b){var o=u("./ArrayReader");function i(n){o.call(this,n)}u("../utils").inherits(i,o),i.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},S.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(u,S,b){var o=u("../utils"),i=u("../support"),n=u("./ArrayReader"),s=u("./StringReader"),f=u("./NodeBufferReader"),y=u("./Uint8ArrayReader");S.exports=function(_){var p=o.getTypeOf(_);return o.checkSupport(p),p!=="string"||i.uint8array?p==="nodebuffer"?new f(_):i.uint8array?new y(o.transformTo("uint8array",_)):new n(o.transformTo("array",_)):new s(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,S,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,S,b){var o=u("./GenericWorker"),i=u("../utils");function n(s){o.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(n,o),n.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},S.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(u,S,b){var o=u("./GenericWorker"),i=u("../crc32");function n(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(n,o),n.prototype.processChunk=function(s){this.streamInfo.crc32=i(s.data,this.streamInfo.crc32||0),this.push(s)},S.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,S,b){var o=u("../utils"),i=u("./GenericWorker");function n(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}o.inherits(n,i),n.prototype.processChunk=function(s){if(s){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+s.data.length}i.prototype.processChunk.call(this,s)},S.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(u,S,b){var o=u("../utils"),i=u("./GenericWorker");function n(s){i.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(y){f.dataIsReady=!0,f.data=y,f.max=y&&y.length||0,f.type=o.getTypeOf(y),f.isPaused||f._tickAndRepeat()},function(y){f.error(y)})}o.inherits(n,i),n.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,f);break;case"uint8array":s=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":s=this.data.slice(this.index,f)}return this.index=f,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(u,S,b){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,n){return this._listeners[i].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,n){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,n)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var n=this;return i.on("data",function(s){n.processChunk(s)}),i.on("end",function(){n.end()}),i.on("error",function(s){n.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,n){return this.extraStreamInfo[i]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},S.exports=o},{}],29:[function(u,S,b){var o=u("../utils"),i=u("./ConvertWorker"),n=u("./GenericWorker"),s=u("../base64"),f=u("../support"),y=u("../external"),_=null;if(f.nodestream)try{_=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(h,a){return new y.Promise(function(d,l){var g=[],A=h._internalType,k=h._outputType,m=h._mimeType;h.on("data",function(C,O){g.push(C),a&&a(O)}).on("error",function(C){g=[],l(C)}).on("end",function(){try{var C=function(O,F,R){switch(O){case"blob":return o.newBlob(o.transformTo("arraybuffer",F),R);case"base64":return s.encode(F);default:return o.transformTo(O,F)}}(k,function(O,F){var R,j=0,et=null,w=0;for(R=0;R<F.length;R++)w+=F[R].length;switch(O){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(et=new Uint8Array(w),R=0;R<F.length;R++)et.set(F[R],j),j+=F[R].length;return et;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+O+"'")}}(A,g),m);d(C)}catch(O){l(O)}g=[]}).resume()})}function r(h,a,d){var l=a;switch(a){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=a,this._mimeType=d,o.checkSupport(l),this._worker=h.pipe(new i(l)),h.lock()}catch(g){this._worker=new n("error"),this._worker.error(g)}}r.prototype={accumulate:function(h){return p(this,h)},on:function(h,a){var d=this;return h==="data"?this._worker.on(h,function(l){a.call(d,l.data,l.meta)}):this._worker.on(h,function(){o.delay(a,arguments,d)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},h)}},S.exports=r},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,S,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var o=new ArrayBuffer(0);try{b.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),b.blob=i.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!u("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(u,S,b){for(var o=u("./utils"),i=u("./support"),n=u("./nodejsUtils"),s=u("./stream/GenericWorker"),f=new Array(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;f[254]=f[254]=1;function _(){s.call(this,"utf-8 decode"),this.leftOver=null}function p(){s.call(this,"utf-8 encode")}b.utf8encode=function(r){return i.nodebuffer?n.newBufferFrom(r,"utf-8"):function(h){var a,d,l,g,A,k=h.length,m=0;for(g=0;g<k;g++)(64512&(d=h.charCodeAt(g)))==55296&&g+1<k&&(64512&(l=h.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(l-56320),g++),m+=d<128?1:d<2048?2:d<65536?3:4;for(a=i.uint8array?new Uint8Array(m):new Array(m),g=A=0;A<m;g++)(64512&(d=h.charCodeAt(g)))==55296&&g+1<k&&(64512&(l=h.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(l-56320),g++),d<128?a[A++]=d:(d<2048?a[A++]=192|d>>>6:(d<65536?a[A++]=224|d>>>12:(a[A++]=240|d>>>18,a[A++]=128|d>>>12&63),a[A++]=128|d>>>6&63),a[A++]=128|63&d);return a}(r)},b.utf8decode=function(r){return i.nodebuffer?o.transformTo("nodebuffer",r).toString("utf-8"):function(h){var a,d,l,g,A=h.length,k=new Array(2*A);for(a=d=0;a<A;)if((l=h[a++])<128)k[d++]=l;else if(4<(g=f[l]))k[d++]=65533,a+=g-1;else{for(l&=g===2?31:g===3?15:7;1<g&&a<A;)l=l<<6|63&h[a++],g--;1<g?k[d++]=65533:l<65536?k[d++]=l:(l-=65536,k[d++]=55296|l>>10&1023,k[d++]=56320|1023&l)}return k.length!==d&&(k.subarray?k=k.subarray(0,d):k.length=d),o.applyFromCharCode(k)}(r=o.transformTo(i.uint8array?"uint8array":"array",r))},o.inherits(_,s),_.prototype.processChunk=function(r){var h=o.transformTo(i.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=h;(h=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),h.set(a,this.leftOver.length)}else h=this.leftOver.concat(h);this.leftOver=null}var d=function(g,A){var k;for((A=A||g.length)>g.length&&(A=g.length),k=A-1;0<=k&&(192&g[k])==128;)k--;return k<0||k===0?A:k+f[g[k]]>A?k:A}(h),l=h;d!==h.length&&(i.uint8array?(l=h.subarray(0,d),this.leftOver=h.subarray(d,h.length)):(l=h.slice(0,d),this.leftOver=h.slice(d,h.length))),this.push({data:b.utf8decode(l),meta:r.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=_,o.inherits(p,s),p.prototype.processChunk=function(r){this.push({data:b.utf8encode(r.data),meta:r.meta})},b.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,S,b){var o=u("./support"),i=u("./base64"),n=u("./nodejsUtils"),s=u("./external");function f(a){return a}function y(a,d){for(var l=0;l<a.length;++l)d[l]=255&a.charCodeAt(l);return d}u("setimmediate"),b.newBlob=function(a,d){b.checkSupport("blob");try{return new Blob([a],{type:d})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(a),l.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(a,d,l){var g=[],A=0,k=a.length;if(k<=l)return String.fromCharCode.apply(null,a);for(;A<k;)d==="array"||d==="nodebuffer"?g.push(String.fromCharCode.apply(null,a.slice(A,Math.min(A+l,k)))):g.push(String.fromCharCode.apply(null,a.subarray(A,Math.min(A+l,k)))),A+=l;return g.join("")},stringifyByChar:function(a){for(var d="",l=0;l<a.length;l++)d+=String.fromCharCode(a[l]);return d},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function p(a){var d=65536,l=b.getTypeOf(a),g=!0;if(l==="uint8array"?g=_.applyCanBeUsed.uint8array:l==="nodebuffer"&&(g=_.applyCanBeUsed.nodebuffer),g)for(;1<d;)try{return _.stringifyByChunk(a,l,d)}catch{d=Math.floor(d/2)}return _.stringifyByChar(a)}function r(a,d){for(var l=0;l<a.length;l++)d[l]=a[l];return d}b.applyFromCharCode=p;var h={};h.string={string:f,array:function(a){return y(a,new Array(a.length))},arraybuffer:function(a){return h.string.uint8array(a).buffer},uint8array:function(a){return y(a,new Uint8Array(a.length))},nodebuffer:function(a){return y(a,n.allocBuffer(a.length))}},h.array={string:p,array:f,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(a)}},h.arraybuffer={string:function(a){return p(new Uint8Array(a))},array:function(a){return r(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:f,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(new Uint8Array(a))}},h.uint8array={string:p,array:function(a){return r(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:f,nodebuffer:function(a){return n.newBufferFrom(a)}},h.nodebuffer={string:p,array:function(a){return r(a,new Array(a.length))},arraybuffer:function(a){return h.nodebuffer.uint8array(a).buffer},uint8array:function(a){return r(a,new Uint8Array(a.length))},nodebuffer:f},b.transformTo=function(a,d){if(d=d||"",!a)return d;b.checkSupport(a);var l=b.getTypeOf(d);return h[l][a](d)},b.resolve=function(a){for(var d=a.split("/"),l=[],g=0;g<d.length;g++){var A=d[g];A==="."||A===""&&g!==0&&g!==d.length-1||(A===".."?l.pop():l.push(A))}return l.join("/")},b.getTypeOf=function(a){return typeof a=="string"?"string":Object.prototype.toString.call(a)==="[object Array]"?"array":o.nodebuffer&&n.isBuffer(a)?"nodebuffer":o.uint8array&&a instanceof Uint8Array?"uint8array":o.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(a){if(!o[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(a){var d,l,g="";for(l=0;l<(a||"").length;l++)g+="\\x"+((d=a.charCodeAt(l))<16?"0":"")+d.toString(16).toUpperCase();return g},b.delay=function(a,d,l){setImmediate(function(){a.apply(l||null,d||[])})},b.inherits=function(a,d){function l(){}l.prototype=d.prototype,a.prototype=new l},b.extend=function(){var a,d,l={};for(a=0;a<arguments.length;a++)for(d in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],d)&&l[d]===void 0&&(l[d]=arguments[a][d]);return l},b.prepareContent=function(a,d,l,g,A){return s.Promise.resolve(d).then(function(k){return o.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new s.Promise(function(m,C){var O=new FileReader;O.onload=function(F){m(F.target.result)},O.onerror=function(F){C(F.target.error)},O.readAsArrayBuffer(k)}):k}).then(function(k){var m=b.getTypeOf(k);return m?(m==="arraybuffer"?k=b.transformTo("uint8array",k):m==="string"&&(A?k=i.decode(k):l&&g!==!0&&(k=function(C){return y(C,o.uint8array?new Uint8Array(C.length):new Array(C.length))}(k))),k):s.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,S,b){var o=u("./reader/readerFor"),i=u("./utils"),n=u("./signature"),s=u("./zipEntry"),f=u("./support");function y(_){this.files=[],this.loadOptions=_}y.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(p)+", expected "+i.pretty(_)+")")}},isSignature:function(_,p){var r=this.reader.index;this.reader.setIndex(_);var h=this.reader.readString(4)===p;return this.reader.setIndex(r),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),p=f.uint8array?"uint8array":"array",r=i.transformTo(p,_);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,p,r,h=this.zip64EndOfCentralSize-44;0<h;)_=this.reader.readInt(2),p=this.reader.readInt(4),r=this.reader.readData(p),this.zip64ExtensibleData[_]={id:_,length:p,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,p;for(_=0;_<this.files.length;_++)p=this.files[_],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(_=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var p=_;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var h=p-r;if(0<h)this.isSignature(p,n.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(_){this.reader=o(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,S,b){var o=u("./reader/readerFor"),i=u("./utils"),n=u("./compressedObject"),s=u("./crc32"),f=u("./utf8"),y=u("./compressions"),_=u("./support");function p(r,h){this.options=r,this.loadOptions=h}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(r){var h,a;if(r.skip(22),this.fileNameLength=r.readInt(2),a=r.readInt(2),this.fileName=r.readData(this.fileNameLength),r.skip(a),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((h=function(d){for(var l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&y[l].magic===d)return y[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,h,r.readData(this.compressedSize))},readCentralPart:function(r){this.versionMadeBy=r.readInt(2),r.skip(2),this.bitFlag=r.readInt(2),this.compressionMethod=r.readString(2),this.date=r.readDate(),this.crc32=r.readInt(4),this.compressedSize=r.readInt(4),this.uncompressedSize=r.readInt(4);var h=r.readInt(2);if(this.extraFieldsLength=r.readInt(2),this.fileCommentLength=r.readInt(2),this.diskNumberStart=r.readInt(2),this.internalFileAttributes=r.readInt(2),this.externalFileAttributes=r.readInt(4),this.localHeaderOffset=r.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");r.skip(h),this.readExtraFields(r),this.parseZIP64ExtraField(r),this.fileComment=r.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var r=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),r==0&&(this.dosPermissions=63&this.externalFileAttributes),r==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var r=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(r){var h,a,d,l=r.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});r.index+4<l;)h=r.readInt(2),a=r.readInt(2),d=r.readData(a),this.extraFields[h]={id:h,length:a,value:d};r.setIndex(l)},handleUTF8:function(){var r=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var h=this.findExtraFieldUnicodePath();if(h!==null)this.fileNameStr=h;else{var a=i.transformTo(r,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var l=i.transformTo(r,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var r=this.extraFields[28789];if(r){var h=o(r.value);return h.readInt(1)!==1||s(this.fileName)!==h.readInt(4)?null:f.utf8decode(h.readData(r.length-5))}return null},findExtraFieldUnicodeComment:function(){var r=this.extraFields[25461];if(r){var h=o(r.value);return h.readInt(1)!==1||s(this.fileComment)!==h.readInt(4)?null:f.utf8decode(h.readData(r.length-5))}return null}},S.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,S,b){function o(h,a,d){this.name=h,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=a,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var i=u("./stream/StreamHelper"),n=u("./stream/DataWorker"),s=u("./utf8"),f=u("./compressedObject"),y=u("./stream/GenericWorker");o.prototype={internalStream:function(h){var a=null,d="string";try{if(!h)throw new Error("No output type specified.");var l=(d=h.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),a=this._decompressWorker();var g=!this._dataBinary;g&&!l&&(a=a.pipe(new s.Utf8EncodeWorker)),!g&&l&&(a=a.pipe(new s.Utf8DecodeWorker))}catch(A){(a=new y("error")).error(A)}return new i(a,d,"")},async:function(h,a){return this.internalStream(h).accumulate(a)},nodeStream:function(h,a){return this.internalStream(h||"nodebuffer").toNodejsStream(a)},_compressWorker:function(h,a){if(this._data instanceof f&&this._data.compression.magic===h.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new s.Utf8EncodeWorker)),f.createWorkerFrom(d,h,a)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof y?this._data:new n(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},r=0;r<_.length;r++)o.prototype[_[r]]=p;S.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,S,b){(function(o){var i,n,s=o.MutationObserver||o.WebKitMutationObserver;if(s){var f=0,y=new s(h),_=o.document.createTextNode("");y.observe(_,{characterData:!0}),i=function(){_.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var a=o.document.createElement("script");a.onreadystatechange=function(){h(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},o.document.documentElement.appendChild(a)}:function(){setTimeout(h,0)};else{var p=new o.MessageChannel;p.port1.onmessage=h,i=function(){p.port2.postMessage(0)}}var r=[];function h(){var a,d;n=!0;for(var l=r.length;l;){for(d=r,r=[],a=-1;++a<l;)d[a]();l=r.length}n=!1}S.exports=function(a){r.push(a)!==1||n||i()}}).call(this,typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,S,b){var o=u("immediate");function i(){}var n={},s=["REJECTED"],f=["FULFILLED"],y=["PENDING"];function _(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,l!==i&&a(this,l)}function p(l,g,A){this.promise=l,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function r(l,g,A){o(function(){var k;try{k=g(A)}catch(m){return n.reject(l,m)}k===l?n.reject(l,new TypeError("Cannot resolve promise with itself")):n.resolve(l,k)})}function h(l){var g=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof g=="function")return function(){g.apply(l,arguments)}}function a(l,g){var A=!1;function k(O){A||(A=!0,n.reject(l,O))}function m(O){A||(A=!0,n.resolve(l,O))}var C=d(function(){g(m,k)});C.status==="error"&&k(C.value)}function d(l,g){var A={};try{A.value=l(g),A.status="success"}catch(k){A.status="error",A.value=k}return A}(S.exports=_).prototype.finally=function(l){if(typeof l!="function")return this;var g=this.constructor;return this.then(function(A){return g.resolve(l()).then(function(){return A})},function(A){return g.resolve(l()).then(function(){throw A})})},_.prototype.catch=function(l){return this.then(null,l)},_.prototype.then=function(l,g){if(typeof l!="function"&&this.state===f||typeof g!="function"&&this.state===s)return this;var A=new this.constructor(i);return this.state!==y?r(A,this.state===f?l:g,this.outcome):this.queue.push(new p(A,l,g)),A},p.prototype.callFulfilled=function(l){n.resolve(this.promise,l)},p.prototype.otherCallFulfilled=function(l){r(this.promise,this.onFulfilled,l)},p.prototype.callRejected=function(l){n.reject(this.promise,l)},p.prototype.otherCallRejected=function(l){r(this.promise,this.onRejected,l)},n.resolve=function(l,g){var A=d(h,g);if(A.status==="error")return n.reject(l,A.value);var k=A.value;if(k)a(l,k);else{l.state=f,l.outcome=g;for(var m=-1,C=l.queue.length;++m<C;)l.queue[m].callFulfilled(g)}return l},n.reject=function(l,g){l.state=s,l.outcome=g;for(var A=-1,k=l.queue.length;++A<k;)l.queue[A].callRejected(g);return l},_.resolve=function(l){return l instanceof this?l:n.resolve(new this(i),l)},_.reject=function(l){var g=new this(i);return n.reject(g,l)},_.all=function(l){var g=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=l.length,k=!1;if(!A)return this.resolve([]);for(var m=new Array(A),C=0,O=-1,F=new this(i);++O<A;)R(l[O],O);return F;function R(j,et){g.resolve(j).then(function(w){m[et]=w,++C!==A||k||(k=!0,n.resolve(F,m))},function(w){k||(k=!0,n.reject(F,w))})}},_.race=function(l){var g=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=l.length,k=!1;if(!A)return this.resolve([]);for(var m=-1,C=new this(i);++m<A;)O=l[m],g.resolve(O).then(function(F){k||(k=!0,n.resolve(C,F))},function(F){k||(k=!0,n.reject(C,F))});var O;return C}},{immediate:36}],38:[function(u,S,b){var o={};(0,u("./lib/utils/common").assign)(o,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),S.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,S,b){var o=u("./zlib/deflate"),i=u("./utils/common"),n=u("./utils/strings"),s=u("./zlib/messages"),f=u("./zlib/zstream"),y=Object.prototype.toString,_=0,p=-1,r=0,h=8;function a(l){if(!(this instanceof a))return new a(l);this.options=i.assign({level:p,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:r,to:""},l||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var A=o.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(A!==_)throw new Error(s[A]);if(g.header&&o.deflateSetHeader(this.strm,g.header),g.dictionary){var k;if(k=typeof g.dictionary=="string"?n.string2buf(g.dictionary):y.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(A=o.deflateSetDictionary(this.strm,k))!==_)throw new Error(s[A]);this._dict_set=!0}}function d(l,g){var A=new a(g);if(A.push(l,!0),A.err)throw A.msg||s[A.err];return A.result}a.prototype.push=function(l,g){var A,k,m=this.strm,C=this.options.chunkSize;if(this.ended)return!1;k=g===~~g?g:g===!0?4:0,typeof l=="string"?m.input=n.string2buf(l):y.call(l)==="[object ArrayBuffer]"?m.input=new Uint8Array(l):m.input=l,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new i.Buf8(C),m.next_out=0,m.avail_out=C),(A=o.deflate(m,k))!==1&&A!==_)return this.onEnd(A),!(this.ended=!0);m.avail_out!==0&&(m.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(i.shrinkBuf(m.output,m.next_out))):this.onData(i.shrinkBuf(m.output,m.next_out)))}while((0<m.avail_in||m.avail_out===0)&&A!==1);return k===4?(A=o.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===_):k!==2||(this.onEnd(_),!(m.avail_out=0))},a.prototype.onData=function(l){this.chunks.push(l)},a.prototype.onEnd=function(l){l===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},b.Deflate=a,b.deflate=d,b.deflateRaw=function(l,g){return(g=g||{}).raw=!0,d(l,g)},b.gzip=function(l,g){return(g=g||{}).gzip=!0,d(l,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,S,b){var o=u("./zlib/inflate"),i=u("./utils/common"),n=u("./utils/strings"),s=u("./zlib/constants"),f=u("./zlib/messages"),y=u("./zlib/zstream"),_=u("./zlib/gzheader"),p=Object.prototype.toString;function r(a){if(!(this instanceof r))return new r(a);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},a||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||a&&a.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var l=o.inflateInit2(this.strm,d.windowBits);if(l!==s.Z_OK)throw new Error(f[l]);this.header=new _,o.inflateGetHeader(this.strm,this.header)}function h(a,d){var l=new r(d);if(l.push(a,!0),l.err)throw l.msg||f[l.err];return l.result}r.prototype.push=function(a,d){var l,g,A,k,m,C,O=this.strm,F=this.options.chunkSize,R=this.options.dictionary,j=!1;if(this.ended)return!1;g=d===~~d?d:d===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof a=="string"?O.input=n.binstring2buf(a):p.call(a)==="[object ArrayBuffer]"?O.input=new Uint8Array(a):O.input=a,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new i.Buf8(F),O.next_out=0,O.avail_out=F),(l=o.inflate(O,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&R&&(C=typeof R=="string"?n.string2buf(R):p.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,l=o.inflateSetDictionary(this.strm,C)),l===s.Z_BUF_ERROR&&j===!0&&(l=s.Z_OK,j=!1),l!==s.Z_STREAM_END&&l!==s.Z_OK)return this.onEnd(l),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&l!==s.Z_STREAM_END&&(O.avail_in!==0||g!==s.Z_FINISH&&g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=n.utf8border(O.output,O.next_out),k=O.next_out-A,m=n.buf2string(O.output,A),O.next_out=k,O.avail_out=F-k,k&&i.arraySet(O.output,O.output,A,k,0),this.onData(m)):this.onData(i.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(j=!0)}while((0<O.avail_in||O.avail_out===0)&&l!==s.Z_STREAM_END);return l===s.Z_STREAM_END&&(g=s.Z_FINISH),g===s.Z_FINISH?(l=o.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(O.avail_out=0))},r.prototype.onData=function(a){this.chunks.push(a)},r.prototype.onEnd=function(a){a===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},b.Inflate=r,b.inflate=h,b.inflateRaw=function(a,d){return(d=d||{}).raw=!0,h(a,d)},b.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,S,b){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(s){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var y=f.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var _ in y)y.hasOwnProperty(_)&&(s[_]=y[_])}}return s},b.shrinkBuf=function(s,f){return s.length===f?s:s.subarray?s.subarray(0,f):(s.length=f,s)};var i={arraySet:function(s,f,y,_,p){if(f.subarray&&s.subarray)s.set(f.subarray(y,y+_),p);else for(var r=0;r<_;r++)s[p+r]=f[y+r]},flattenChunks:function(s){var f,y,_,p,r,h;for(f=_=0,y=s.length;f<y;f++)_+=s[f].length;for(h=new Uint8Array(_),f=p=0,y=s.length;f<y;f++)r=s[f],h.set(r,p),p+=r.length;return h}},n={arraySet:function(s,f,y,_,p){for(var r=0;r<_;r++)s[p+r]=f[y+r]},flattenChunks:function(s){return[].concat.apply([],s)}};b.setTyped=function(s){s?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,i)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,n))},b.setTyped(o)},{}],42:[function(u,S,b){var o=u("./common"),i=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var s=new o.Buf8(256),f=0;f<256;f++)s[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function y(_,p){if(p<65537&&(_.subarray&&n||!_.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(_,p));for(var r="",h=0;h<p;h++)r+=String.fromCharCode(_[h]);return r}s[254]=s[254]=1,b.string2buf=function(_){var p,r,h,a,d,l=_.length,g=0;for(a=0;a<l;a++)(64512&(r=_.charCodeAt(a)))==55296&&a+1<l&&(64512&(h=_.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(h-56320),a++),g+=r<128?1:r<2048?2:r<65536?3:4;for(p=new o.Buf8(g),a=d=0;d<g;a++)(64512&(r=_.charCodeAt(a)))==55296&&a+1<l&&(64512&(h=_.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(h-56320),a++),r<128?p[d++]=r:(r<2048?p[d++]=192|r>>>6:(r<65536?p[d++]=224|r>>>12:(p[d++]=240|r>>>18,p[d++]=128|r>>>12&63),p[d++]=128|r>>>6&63),p[d++]=128|63&r);return p},b.buf2binstring=function(_){return y(_,_.length)},b.binstring2buf=function(_){for(var p=new o.Buf8(_.length),r=0,h=p.length;r<h;r++)p[r]=_.charCodeAt(r);return p},b.buf2string=function(_,p){var r,h,a,d,l=p||_.length,g=new Array(2*l);for(r=h=0;r<l;)if((a=_[r++])<128)g[h++]=a;else if(4<(d=s[a]))g[h++]=65533,r+=d-1;else{for(a&=d===2?31:d===3?15:7;1<d&&r<l;)a=a<<6|63&_[r++],d--;1<d?g[h++]=65533:a<65536?g[h++]=a:(a-=65536,g[h++]=55296|a>>10&1023,g[h++]=56320|1023&a)}return y(g,h)},b.utf8border=function(_,p){var r;for((p=p||_.length)>_.length&&(p=_.length),r=p-1;0<=r&&(192&_[r])==128;)r--;return r<0||r===0?p:r+s[_[r]]>p?r:p}},{"./common":41}],43:[function(u,S,b){S.exports=function(o,i,n,s){for(var f=65535&o|0,y=o>>>16&65535|0,_=0;n!==0;){for(n-=_=2e3<n?2e3:n;y=y+(f=f+i[s++]|0)|0,--_;);f%=65521,y%=65521}return f|y<<16|0}},{}],44:[function(u,S,b){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,S,b){var o=function(){for(var i,n=[],s=0;s<256;s++){i=s;for(var f=0;f<8;f++)i=1&i?3988292384^i>>>1:i>>>1;n[s]=i}return n}();S.exports=function(i,n,s,f){var y=o,_=f+s;i^=-1;for(var p=f;p<_;p++)i=i>>>8^y[255&(i^n[p])];return-1^i}},{}],46:[function(u,S,b){var o,i=u("../utils/common"),n=u("./trees"),s=u("./adler32"),f=u("./crc32"),y=u("./messages"),_=0,p=4,r=0,h=-2,a=-1,d=4,l=2,g=8,A=9,k=286,m=30,C=19,O=2*k+1,F=15,R=3,j=258,et=j+R+1,w=42,K=113,e=1,P=2,at=3,L=4;function ot(t,D){return t.msg=y[D],D}function N(t){return(t<<1)-(4<t?9:0)}function nt(t){for(var D=t.length;0<=--D;)t[D]=0}function z(t){var D=t.state,T=D.pending;T>t.avail_out&&(T=t.avail_out),T!==0&&(i.arraySet(t.output,D.pending_buf,D.pending_out,T,t.next_out),t.next_out+=T,D.pending_out+=T,t.total_out+=T,t.avail_out-=T,D.pending-=T,D.pending===0&&(D.pending_out=0))}function E(t,D){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,D),t.block_start=t.strstart,z(t.strm)}function Q(t,D){t.pending_buf[t.pending++]=D}function V(t,D){t.pending_buf[t.pending++]=D>>>8&255,t.pending_buf[t.pending++]=255&D}function M(t,D){var T,v,c=t.max_chain_length,x=t.strstart,Z=t.prev_length,U=t.nice_match,I=t.strstart>t.w_size-et?t.strstart-(t.w_size-et):0,G=t.window,J=t.w_mask,$=t.prev,tt=t.strstart+j,ht=G[x+Z-1],ut=G[x+Z];t.prev_length>=t.good_match&&(c>>=2),U>t.lookahead&&(U=t.lookahead);do if(G[(T=D)+Z]===ut&&G[T+Z-1]===ht&&G[T]===G[x]&&G[++T]===G[x+1]){x+=2,T++;do;while(G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&G[++x]===G[++T]&&x<tt);if(v=j-(tt-x),x=tt-j,Z<v){if(t.match_start=D,U<=(Z=v))break;ht=G[x+Z-1],ut=G[x+Z]}}while((D=$[D&J])>I&&--c!=0);return Z<=t.lookahead?Z:t.lookahead}function mt(t){var D,T,v,c,x,Z,U,I,G,J,$=t.w_size;do{if(c=t.window_size-t.lookahead-t.strstart,t.strstart>=$+($-et)){for(i.arraySet(t.window,t.window,$,$,0),t.match_start-=$,t.strstart-=$,t.block_start-=$,D=T=t.hash_size;v=t.head[--D],t.head[D]=$<=v?v-$:0,--T;);for(D=T=$;v=t.prev[--D],t.prev[D]=$<=v?v-$:0,--T;);c+=$}if(t.strm.avail_in===0)break;if(Z=t.strm,U=t.window,I=t.strstart+t.lookahead,G=c,J=void 0,J=Z.avail_in,G<J&&(J=G),T=J===0?0:(Z.avail_in-=J,i.arraySet(U,Z.input,Z.next_in,J,I),Z.state.wrap===1?Z.adler=s(Z.adler,U,J,I):Z.state.wrap===2&&(Z.adler=f(Z.adler,U,J,I)),Z.next_in+=J,Z.total_in+=J,J),t.lookahead+=T,t.lookahead+t.insert>=R)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+R-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<R)););}while(t.lookahead<et&&t.strm.avail_in!==0)}function kt(t,D){for(var T,v;;){if(t.lookahead<et){if(mt(t),t.lookahead<et&&D===_)return e;if(t.lookahead===0)break}if(T=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),T!==0&&t.strstart-T<=t.w_size-et&&(t.match_length=M(t,T)),t.match_length>=R)if(v=n._tr_tally(t,t.strstart-t.match_start,t.match_length-R),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=R){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else v=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(v&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<R-1?t.strstart:R-1,D===p?(E(t,!0),t.strm.avail_out===0?at:L):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function lt(t,D){for(var T,v,c;;){if(t.lookahead<et){if(mt(t),t.lookahead<et&&D===_)return e;if(t.lookahead===0)break}if(T=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=R-1,T!==0&&t.prev_length<t.max_lazy_match&&t.strstart-T<=t.w_size-et&&(t.match_length=M(t,T),t.match_length<=5&&(t.strategy===1||t.match_length===R&&4096<t.strstart-t.match_start)&&(t.match_length=R-1)),t.prev_length>=R&&t.match_length<=t.prev_length){for(c=t.strstart+t.lookahead-R,v=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-R),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=c&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=R-1,t.strstart++,v&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((v=n._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(v=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<R-1?t.strstart:R-1,D===p?(E(t,!0),t.strm.avail_out===0?at:L):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function ct(t,D,T,v,c){this.good_length=t,this.max_lazy=D,this.nice_length=T,this.max_chain=v,this.func=c}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*O),this.dyn_dtree=new i.Buf16(2*(2*m+1)),this.bl_tree=new i.Buf16(2*(2*C+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(F+1),this.heap=new i.Buf16(2*k+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*k+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function vt(t){var D;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(D=t.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?w:K,t.adler=D.wrap===2?0:1,D.last_flush=_,n._tr_init(D),r):ot(t,h)}function Et(t){var D=vt(t);return D===r&&function(T){T.window_size=2*T.w_size,nt(T.head),T.max_lazy_match=o[T.level].max_lazy,T.good_match=o[T.level].good_length,T.nice_match=o[T.level].nice_length,T.max_chain_length=o[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=R-1,T.match_available=0,T.ins_h=0}(t.state),D}function St(t,D,T,v,c,x){if(!t)return h;var Z=1;if(D===a&&(D=6),v<0?(Z=0,v=-v):15<v&&(Z=2,v-=16),c<1||A<c||T!==g||v<8||15<v||D<0||9<D||x<0||d<x)return ot(t,h);v===8&&(v=9);var U=new yt;return(t.state=U).strm=t,U.wrap=Z,U.gzhead=null,U.w_bits=v,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=c+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+R-1)/R),U.window=new i.Buf8(2*U.w_size),U.head=new i.Buf16(U.hash_size),U.prev=new i.Buf16(U.w_size),U.lit_bufsize=1<<c+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new i.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=D,U.strategy=x,U.method=T,Et(t)}o=[new ct(0,0,0,0,function(t,D){var T=65535;for(T>t.pending_buf_size-5&&(T=t.pending_buf_size-5);;){if(t.lookahead<=1){if(mt(t),t.lookahead===0&&D===_)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var v=t.block_start+T;if((t.strstart===0||t.strstart>=v)&&(t.lookahead=t.strstart-v,t.strstart=v,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-et&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,D===p?(E(t,!0),t.strm.avail_out===0?at:L):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new ct(4,4,8,4,kt),new ct(4,5,16,8,kt),new ct(4,6,32,32,kt),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],b.deflateInit=function(t,D){return St(t,D,g,15,8,0)},b.deflateInit2=St,b.deflateReset=Et,b.deflateResetKeep=vt,b.deflateSetHeader=function(t,D){return t&&t.state?t.state.wrap!==2?h:(t.state.gzhead=D,r):h},b.deflate=function(t,D){var T,v,c,x;if(!t||!t.state||5<D||D<0)return t?ot(t,h):h;if(v=t.state,!t.output||!t.input&&t.avail_in!==0||v.status===666&&D!==p)return ot(t,t.avail_out===0?-5:h);if(v.strm=t,T=v.last_flush,v.last_flush=D,v.status===w)if(v.wrap===2)t.adler=0,Q(v,31),Q(v,139),Q(v,8),v.gzhead?(Q(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),Q(v,255&v.gzhead.time),Q(v,v.gzhead.time>>8&255),Q(v,v.gzhead.time>>16&255),Q(v,v.gzhead.time>>24&255),Q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Q(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(Q(v,255&v.gzhead.extra.length),Q(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(t.adler=f(t.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(Q(v,0),Q(v,0),Q(v,0),Q(v,0),Q(v,0),Q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Q(v,3),v.status=K);else{var Z=g+(v.w_bits-8<<4)<<8;Z|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(Z|=32),Z+=31-Z%31,v.status=K,V(v,Z),v.strstart!==0&&(V(v,t.adler>>>16),V(v,65535&t.adler)),t.adler=1}if(v.status===69)if(v.gzhead.extra){for(c=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),z(t),c=v.pending,v.pending!==v.pending_buf_size));)Q(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){c=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),z(t),c=v.pending,v.pending===v.pending_buf_size)){x=1;break}x=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,Q(v,x)}while(x!==0);v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),x===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){c=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),z(t),c=v.pending,v.pending===v.pending_buf_size)){x=1;break}x=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,Q(v,x)}while(x!==0);v.gzhead.hcrc&&v.pending>c&&(t.adler=f(t.adler,v.pending_buf,v.pending-c,c)),x===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&z(t),v.pending+2<=v.pending_buf_size&&(Q(v,255&t.adler),Q(v,t.adler>>8&255),t.adler=0,v.status=K)):v.status=K),v.pending!==0){if(z(t),t.avail_out===0)return v.last_flush=-1,r}else if(t.avail_in===0&&N(D)<=N(T)&&D!==p)return ot(t,-5);if(v.status===666&&t.avail_in!==0)return ot(t,-5);if(t.avail_in!==0||v.lookahead!==0||D!==_&&v.status!==666){var U=v.strategy===2?function(I,G){for(var J;;){if(I.lookahead===0&&(mt(I),I.lookahead===0)){if(G===_)return e;break}if(I.match_length=0,J=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,J&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,G===p?(E(I,!0),I.strm.avail_out===0?at:L):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:P}(v,D):v.strategy===3?function(I,G){for(var J,$,tt,ht,ut=I.window;;){if(I.lookahead<=j){if(mt(I),I.lookahead<=j&&G===_)return e;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=R&&0<I.strstart&&($=ut[tt=I.strstart-1])===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]){ht=I.strstart+j;do;while($===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&$===ut[++tt]&&tt<ht);I.match_length=j-(ht-tt),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=R?(J=n._tr_tally(I,1,I.match_length-R),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(J=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),J&&(E(I,!1),I.strm.avail_out===0))return e}return I.insert=0,G===p?(E(I,!0),I.strm.avail_out===0?at:L):I.last_lit&&(E(I,!1),I.strm.avail_out===0)?e:P}(v,D):o[v.level].func(v,D);if(U!==at&&U!==L||(v.status=666),U===e||U===at)return t.avail_out===0&&(v.last_flush=-1),r;if(U===P&&(D===1?n._tr_align(v):D!==5&&(n._tr_stored_block(v,0,0,!1),D===3&&(nt(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),z(t),t.avail_out===0))return v.last_flush=-1,r}return D!==p?r:v.wrap<=0?1:(v.wrap===2?(Q(v,255&t.adler),Q(v,t.adler>>8&255),Q(v,t.adler>>16&255),Q(v,t.adler>>24&255),Q(v,255&t.total_in),Q(v,t.total_in>>8&255),Q(v,t.total_in>>16&255),Q(v,t.total_in>>24&255)):(V(v,t.adler>>>16),V(v,65535&t.adler)),z(t),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?r:1)},b.deflateEnd=function(t){var D;return t&&t.state?(D=t.state.status)!==w&&D!==69&&D!==73&&D!==91&&D!==103&&D!==K&&D!==666?ot(t,h):(t.state=null,D===K?ot(t,-3):r):h},b.deflateSetDictionary=function(t,D){var T,v,c,x,Z,U,I,G,J=D.length;if(!t||!t.state||(x=(T=t.state).wrap)===2||x===1&&T.status!==w||T.lookahead)return h;for(x===1&&(t.adler=s(t.adler,D,J,0)),T.wrap=0,J>=T.w_size&&(x===0&&(nt(T.head),T.strstart=0,T.block_start=0,T.insert=0),G=new i.Buf8(T.w_size),i.arraySet(G,D,J-T.w_size,T.w_size,0),D=G,J=T.w_size),Z=t.avail_in,U=t.next_in,I=t.input,t.avail_in=J,t.next_in=0,t.input=D,mt(T);T.lookahead>=R;){for(v=T.strstart,c=T.lookahead-(R-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[v+R-1])&T.hash_mask,T.prev[v&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=v,v++,--c;);T.strstart=v,T.lookahead=R-1,mt(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=R-1,T.match_available=0,t.next_in=U,t.input=I,t.avail_in=Z,T.wrap=x,r},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,S,b){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,S,b){S.exports=function(o,i){var n,s,f,y,_,p,r,h,a,d,l,g,A,k,m,C,O,F,R,j,et,w,K,e,P;n=o.state,s=o.next_in,e=o.input,f=s+(o.avail_in-5),y=o.next_out,P=o.output,_=y-(i-o.avail_out),p=y+(o.avail_out-257),r=n.dmax,h=n.wsize,a=n.whave,d=n.wnext,l=n.window,g=n.hold,A=n.bits,k=n.lencode,m=n.distcode,C=(1<<n.lenbits)-1,O=(1<<n.distbits)-1;t:do{A<15&&(g+=e[s++]<<A,A+=8,g+=e[s++]<<A,A+=8),F=k[g&C];e:for(;;){if(g>>>=R=F>>>24,A-=R,(R=F>>>16&255)===0)P[y++]=65535&F;else{if(!(16&R)){if(!(64&R)){F=k[(65535&F)+(g&(1<<R)-1)];continue e}if(32&R){n.mode=12;break t}o.msg="invalid literal/length code",n.mode=30;break t}j=65535&F,(R&=15)&&(A<R&&(g+=e[s++]<<A,A+=8),j+=g&(1<<R)-1,g>>>=R,A-=R),A<15&&(g+=e[s++]<<A,A+=8,g+=e[s++]<<A,A+=8),F=m[g&O];n:for(;;){if(g>>>=R=F>>>24,A-=R,!(16&(R=F>>>16&255))){if(!(64&R)){F=m[(65535&F)+(g&(1<<R)-1)];continue n}o.msg="invalid distance code",n.mode=30;break t}if(et=65535&F,A<(R&=15)&&(g+=e[s++]<<A,(A+=8)<R&&(g+=e[s++]<<A,A+=8)),r<(et+=g&(1<<R)-1)){o.msg="invalid distance too far back",n.mode=30;break t}if(g>>>=R,A-=R,(R=y-_)<et){if(a<(R=et-R)&&n.sane){o.msg="invalid distance too far back",n.mode=30;break t}if(K=l,(w=0)===d){if(w+=h-R,R<j){for(j-=R;P[y++]=l[w++],--R;);w=y-et,K=P}}else if(d<R){if(w+=h+d-R,(R-=d)<j){for(j-=R;P[y++]=l[w++],--R;);if(w=0,d<j){for(j-=R=d;P[y++]=l[w++],--R;);w=y-et,K=P}}}else if(w+=d-R,R<j){for(j-=R;P[y++]=l[w++],--R;);w=y-et,K=P}for(;2<j;)P[y++]=K[w++],P[y++]=K[w++],P[y++]=K[w++],j-=3;j&&(P[y++]=K[w++],1<j&&(P[y++]=K[w++]))}else{for(w=y-et;P[y++]=P[w++],P[y++]=P[w++],P[y++]=P[w++],2<(j-=3););j&&(P[y++]=P[w++],1<j&&(P[y++]=P[w++]))}break}}break}}while(s<f&&y<p);s-=j=A>>3,g&=(1<<(A-=j<<3))-1,o.next_in=s,o.next_out=y,o.avail_in=s<f?f-s+5:5-(s-f),o.avail_out=y<p?p-y+257:257-(y-p),n.hold=g,n.bits=A}},{}],49:[function(u,S,b){var o=u("../utils/common"),i=u("./adler32"),n=u("./crc32"),s=u("./inffast"),f=u("./inftrees"),y=1,_=2,p=0,r=-2,h=1,a=852,d=592;function l(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(w){var K;return w&&w.state?(K=w.state,w.total_in=w.total_out=K.total=0,w.msg="",K.wrap&&(w.adler=1&K.wrap),K.mode=h,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new o.Buf32(a),K.distcode=K.distdyn=new o.Buf32(d),K.sane=1,K.back=-1,p):r}function k(w){var K;return w&&w.state?((K=w.state).wsize=0,K.whave=0,K.wnext=0,A(w)):r}function m(w,K){var e,P;return w&&w.state?(P=w.state,K<0?(e=0,K=-K):(e=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?r:(P.window!==null&&P.wbits!==K&&(P.window=null),P.wrap=e,P.wbits=K,k(w))):r}function C(w,K){var e,P;return w?(P=new g,(w.state=P).window=null,(e=m(w,K))!==p&&(w.state=null),e):r}var O,F,R=!0;function j(w){if(R){var K;for(O=new o.Buf32(512),F=new o.Buf32(32),K=0;K<144;)w.lens[K++]=8;for(;K<256;)w.lens[K++]=9;for(;K<280;)w.lens[K++]=7;for(;K<288;)w.lens[K++]=8;for(f(y,w.lens,0,288,O,0,w.work,{bits:9}),K=0;K<32;)w.lens[K++]=5;f(_,w.lens,0,32,F,0,w.work,{bits:5}),R=!1}w.lencode=O,w.lenbits=9,w.distcode=F,w.distbits=5}function et(w,K,e,P){var at,L=w.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new o.Buf8(L.wsize)),P>=L.wsize?(o.arraySet(L.window,K,e-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(P<(at=L.wsize-L.wnext)&&(at=P),o.arraySet(L.window,K,e-P,at,L.wnext),(P-=at)?(o.arraySet(L.window,K,e-P,P,0),L.wnext=P,L.whave=L.wsize):(L.wnext+=at,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=at))),0}b.inflateReset=k,b.inflateReset2=m,b.inflateResetKeep=A,b.inflateInit=function(w){return C(w,15)},b.inflateInit2=C,b.inflate=function(w,K){var e,P,at,L,ot,N,nt,z,E,Q,V,M,mt,kt,lt,ct,yt,vt,Et,St,t,D,T,v,c=0,x=new o.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return r;(e=w.state).mode===12&&(e.mode=13),ot=w.next_out,at=w.output,nt=w.avail_out,L=w.next_in,P=w.input,N=w.avail_in,z=e.hold,E=e.bits,Q=N,V=nt,D=p;t:for(;;)switch(e.mode){case h:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(2&e.wrap&&z===35615){x[e.check=0]=255&z,x[1]=z>>>8&255,e.check=n(e.check,x,2,0),E=z=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&z)<<8)+(z>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&z)!=8){w.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(z>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&z?10:12,E=z=0;break;case 2:for(;E<16;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(e.flags=z,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=z>>8&1),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=n(e.check,x,2,0)),E=z=0,e.mode=3;case 3:for(;E<32;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.head&&(e.head.time=z),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,x[2]=z>>>16&255,x[3]=z>>>24&255,e.check=n(e.check,x,4,0)),E=z=0,e.mode=4;case 4:for(;E<16;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.head&&(e.head.xflags=255&z,e.head.os=z>>8),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=n(e.check,x,2,0)),E=z=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.length=z,e.head&&(e.head.extra_len=z),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=n(e.check,x,2,0)),E=z=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(N<(M=e.length)&&(M=N),M&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),o.arraySet(e.head.extra,P,L,M,t)),512&e.flags&&(e.check=n(e.check,P,M,L)),N-=M,L+=M,e.length-=M),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(N===0)break t;for(M=0;t=P[L+M++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&M<N;);if(512&e.flags&&(e.check=n(e.check,P,M,L)),N-=M,L+=M,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(N===0)break t;for(M=0;t=P[L+M++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&M<N;);if(512&e.flags&&(e.check=n(e.check,P,M,L)),N-=M,L+=M,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(z!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}E=z=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}w.adler=e.check=l(z),E=z=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=ot,w.avail_out=nt,w.next_in=L,w.avail_in=N,e.hold=z,e.bits=E,2;w.adler=e.check=1,e.mode=12;case 12:if(K===5||K===6)break t;case 13:if(e.last){z>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}switch(e.last=1&z,E-=1,3&(z>>>=1)){case 0:e.mode=14;break;case 1:if(j(e),e.mode=20,K!==6)break;z>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}z>>>=2,E-=2;break;case 14:for(z>>>=7&E,E-=7&E;E<32;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if((65535&z)!=(z>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&z,E=z=0,e.mode=15,K===6)break t;case 15:e.mode=16;case 16:if(M=e.length){if(N<M&&(M=N),nt<M&&(M=nt),M===0)break t;o.arraySet(at,P,L,M,ot),N-=M,L+=M,nt-=M,ot+=M,e.length-=M;break}e.mode=12;break;case 17:for(;E<14;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(e.nlen=257+(31&z),z>>>=5,E-=5,e.ndist=1+(31&z),z>>>=5,E-=5,e.ncode=4+(15&z),z>>>=4,E-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.lens[Z[e.have++]]=7&z,z>>>=3,E-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,T={bits:e.lenbits},D=f(0,e.lens,0,19,e.lencode,0,e.work,T),e.lenbits=T.bits,D){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ct=(c=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,yt=65535&c,!((lt=c>>>24)<=E);){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(yt<16)z>>>=lt,E-=lt,e.lens[e.have++]=yt;else{if(yt===16){for(v=lt+2;E<v;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(z>>>=lt,E-=lt,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],M=3+(3&z),z>>>=2,E-=2}else if(yt===17){for(v=lt+3;E<v;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}E-=lt,t=0,M=3+(7&(z>>>=lt)),z>>>=3,E-=3}else{for(v=lt+7;E<v;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}E-=lt,t=0,M=11+(127&(z>>>=lt)),z>>>=7,E-=7}if(e.have+M>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;M--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,T={bits:e.lenbits},D=f(y,e.lens,0,e.nlen,e.lencode,0,e.work,T),e.lenbits=T.bits,D){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,T={bits:e.distbits},D=f(_,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,T),e.distbits=T.bits,D){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,K===6)break t;case 20:e.mode=21;case 21:if(6<=N&&258<=nt){w.next_out=ot,w.avail_out=nt,w.next_in=L,w.avail_in=N,e.hold=z,e.bits=E,s(w,V),ot=w.next_out,at=w.output,nt=w.avail_out,L=w.next_in,P=w.input,N=w.avail_in,z=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;ct=(c=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,yt=65535&c,!((lt=c>>>24)<=E);){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(ct&&!(240&ct)){for(vt=lt,Et=ct,St=yt;ct=(c=e.lencode[St+((z&(1<<vt+Et)-1)>>vt)])>>>16&255,yt=65535&c,!(vt+(lt=c>>>24)<=E);){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}z>>>=vt,E-=vt,e.back+=vt}if(z>>>=lt,E-=lt,e.back+=lt,e.length=yt,ct===0){e.mode=26;break}if(32&ct){e.back=-1,e.mode=12;break}if(64&ct){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&ct,e.mode=22;case 22:if(e.extra){for(v=e.extra;E<v;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.length+=z&(1<<e.extra)-1,z>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;ct=(c=e.distcode[z&(1<<e.distbits)-1])>>>16&255,yt=65535&c,!((lt=c>>>24)<=E);){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(!(240&ct)){for(vt=lt,Et=ct,St=yt;ct=(c=e.distcode[St+((z&(1<<vt+Et)-1)>>vt)])>>>16&255,yt=65535&c,!(vt+(lt=c>>>24)<=E);){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}z>>>=vt,E-=vt,e.back+=vt}if(z>>>=lt,E-=lt,e.back+=lt,64&ct){w.msg="invalid distance code",e.mode=30;break}e.offset=yt,e.extra=15&ct,e.mode=24;case 24:if(e.extra){for(v=e.extra;E<v;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}e.offset+=z&(1<<e.extra)-1,z>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(nt===0)break t;if(M=V-nt,e.offset>M){if((M=e.offset-M)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}mt=M>e.wnext?(M-=e.wnext,e.wsize-M):e.wnext-M,M>e.length&&(M=e.length),kt=e.window}else kt=at,mt=ot-e.offset,M=e.length;for(nt<M&&(M=nt),nt-=M,e.length-=M;at[ot++]=kt[mt++],--M;);e.length===0&&(e.mode=21);break;case 26:if(nt===0)break t;at[ot++]=e.length,nt--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(N===0)break t;N--,z|=P[L++]<<E,E+=8}if(V-=nt,w.total_out+=V,e.total+=V,V&&(w.adler=e.check=e.flags?n(e.check,at,V,ot-V):i(e.check,at,V,ot-V)),V=nt,(e.flags?z:l(z))!==e.check){w.msg="incorrect data check",e.mode=30;break}E=z=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(N===0)break t;N--,z+=P[L++]<<E,E+=8}if(z!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}E=z=0}e.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return r}return w.next_out=ot,w.avail_out=nt,w.next_in=L,w.avail_in=N,e.hold=z,e.bits=E,(e.wsize||V!==w.avail_out&&e.mode<30&&(e.mode<27||K!==4))&&et(w,w.output,w.next_out,V-w.avail_out)?(e.mode=31,-4):(Q-=w.avail_in,V-=w.avail_out,w.total_in+=Q,w.total_out+=V,e.total+=V,e.wrap&&V&&(w.adler=e.check=e.flags?n(e.check,at,V,w.next_out-V):i(e.check,at,V,w.next_out-V)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(Q==0&&V===0||K===4)&&D===p&&(D=-5),D)},b.inflateEnd=function(w){if(!w||!w.state)return r;var K=w.state;return K.window&&(K.window=null),w.state=null,p},b.inflateGetHeader=function(w,K){var e;return w&&w.state&&2&(e=w.state).wrap?((e.head=K).done=!1,p):r},b.inflateSetDictionary=function(w,K){var e,P=K.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?r:e.mode===11&&i(1,K,P,0)!==e.check?-3:et(w,K,P,P)?(e.mode=31,-4):(e.havedict=1,p):r},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,S,b){var o=u("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(y,_,p,r,h,a,d,l){var g,A,k,m,C,O,F,R,j,et=l.bits,w=0,K=0,e=0,P=0,at=0,L=0,ot=0,N=0,nt=0,z=0,E=null,Q=0,V=new o.Buf16(16),M=new o.Buf16(16),mt=null,kt=0;for(w=0;w<=15;w++)V[w]=0;for(K=0;K<r;K++)V[_[p+K]]++;for(at=et,P=15;1<=P&&V[P]===0;P--);if(P<at&&(at=P),P===0)return h[a++]=20971520,h[a++]=20971520,l.bits=1,0;for(e=1;e<P&&V[e]===0;e++);for(at<e&&(at=e),w=N=1;w<=15;w++)if(N<<=1,(N-=V[w])<0)return-1;if(0<N&&(y===0||P!==1))return-1;for(M[1]=0,w=1;w<15;w++)M[w+1]=M[w]+V[w];for(K=0;K<r;K++)_[p+K]!==0&&(d[M[_[p+K]]++]=K);if(O=y===0?(E=mt=d,19):y===1?(E=i,Q-=257,mt=n,kt-=257,256):(E=s,mt=f,-1),w=e,C=a,ot=K=z=0,k=-1,m=(nt=1<<(L=at))-1,y===1&&852<nt||y===2&&592<nt)return 1;for(;;){for(F=w-ot,j=d[K]<O?(R=0,d[K]):d[K]>O?(R=mt[kt+d[K]],E[Q+d[K]]):(R=96,0),g=1<<w-ot,e=A=1<<L;h[C+(z>>ot)+(A-=g)]=F<<24|R<<16|j|0,A!==0;);for(g=1<<w-1;z&g;)g>>=1;if(g!==0?(z&=g-1,z+=g):z=0,K++,--V[w]==0){if(w===P)break;w=_[p+d[K]]}if(at<w&&(z&m)!==k){for(ot===0&&(ot=at),C+=e,N=1<<(L=w-ot);L+ot<P&&!((N-=V[L+ot])<=0);)L++,N<<=1;if(nt+=1<<L,y===1&&852<nt||y===2&&592<nt)return 1;h[k=z&m]=at<<24|L<<16|C-a|0}}return z!==0&&(h[C+z]=w-ot<<24|64<<16|0),l.bits=at,0}},{"../utils/common":41}],51:[function(u,S,b){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,S,b){var o=u("../utils/common"),i=0,n=1;function s(c){for(var x=c.length;0<=--x;)c[x]=0}var f=0,y=29,_=256,p=_+1+y,r=30,h=19,a=2*p+1,d=15,l=16,g=7,A=256,k=16,m=17,C=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(p+2));s(et);var w=new Array(2*r);s(w);var K=new Array(512);s(K);var e=new Array(256);s(e);var P=new Array(y);s(P);var at,L,ot,N=new Array(r);function nt(c,x,Z,U,I){this.static_tree=c,this.extra_bits=x,this.extra_base=Z,this.elems=U,this.max_length=I,this.has_stree=c&&c.length}function z(c,x){this.dyn_tree=c,this.max_code=0,this.stat_desc=x}function E(c){return c<256?K[c]:K[256+(c>>>7)]}function Q(c,x){c.pending_buf[c.pending++]=255&x,c.pending_buf[c.pending++]=x>>>8&255}function V(c,x,Z){c.bi_valid>l-Z?(c.bi_buf|=x<<c.bi_valid&65535,Q(c,c.bi_buf),c.bi_buf=x>>l-c.bi_valid,c.bi_valid+=Z-l):(c.bi_buf|=x<<c.bi_valid&65535,c.bi_valid+=Z)}function M(c,x,Z){V(c,Z[2*x],Z[2*x+1])}function mt(c,x){for(var Z=0;Z|=1&c,c>>>=1,Z<<=1,0<--x;);return Z>>>1}function kt(c,x,Z){var U,I,G=new Array(d+1),J=0;for(U=1;U<=d;U++)G[U]=J=J+Z[U-1]<<1;for(I=0;I<=x;I++){var $=c[2*I+1];$!==0&&(c[2*I]=mt(G[$]++,$))}}function lt(c){var x;for(x=0;x<p;x++)c.dyn_ltree[2*x]=0;for(x=0;x<r;x++)c.dyn_dtree[2*x]=0;for(x=0;x<h;x++)c.bl_tree[2*x]=0;c.dyn_ltree[2*A]=1,c.opt_len=c.static_len=0,c.last_lit=c.matches=0}function ct(c){8<c.bi_valid?Q(c,c.bi_buf):0<c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf),c.bi_buf=0,c.bi_valid=0}function yt(c,x,Z,U){var I=2*x,G=2*Z;return c[I]<c[G]||c[I]===c[G]&&U[x]<=U[Z]}function vt(c,x,Z){for(var U=c.heap[Z],I=Z<<1;I<=c.heap_len&&(I<c.heap_len&&yt(x,c.heap[I+1],c.heap[I],c.depth)&&I++,!yt(x,U,c.heap[I],c.depth));)c.heap[Z]=c.heap[I],Z=I,I<<=1;c.heap[Z]=U}function Et(c,x,Z){var U,I,G,J,$=0;if(c.last_lit!==0)for(;U=c.pending_buf[c.d_buf+2*$]<<8|c.pending_buf[c.d_buf+2*$+1],I=c.pending_buf[c.l_buf+$],$++,U===0?M(c,I,x):(M(c,(G=e[I])+_+1,x),(J=O[G])!==0&&V(c,I-=P[G],J),M(c,G=E(--U),Z),(J=F[G])!==0&&V(c,U-=N[G],J)),$<c.last_lit;);M(c,A,x)}function St(c,x){var Z,U,I,G=x.dyn_tree,J=x.stat_desc.static_tree,$=x.stat_desc.has_stree,tt=x.stat_desc.elems,ht=-1;for(c.heap_len=0,c.heap_max=a,Z=0;Z<tt;Z++)G[2*Z]!==0?(c.heap[++c.heap_len]=ht=Z,c.depth[Z]=0):G[2*Z+1]=0;for(;c.heap_len<2;)G[2*(I=c.heap[++c.heap_len]=ht<2?++ht:0)]=1,c.depth[I]=0,c.opt_len--,$&&(c.static_len-=J[2*I+1]);for(x.max_code=ht,Z=c.heap_len>>1;1<=Z;Z--)vt(c,G,Z);for(I=tt;Z=c.heap[1],c.heap[1]=c.heap[c.heap_len--],vt(c,G,1),U=c.heap[1],c.heap[--c.heap_max]=Z,c.heap[--c.heap_max]=U,G[2*I]=G[2*Z]+G[2*U],c.depth[I]=(c.depth[Z]>=c.depth[U]?c.depth[Z]:c.depth[U])+1,G[2*Z+1]=G[2*U+1]=I,c.heap[1]=I++,vt(c,G,1),2<=c.heap_len;);c.heap[--c.heap_max]=c.heap[1],function(ut,xt){var Kt,It,Wt,_t,Lt,Mt,zt=xt.dyn_tree,te=xt.max_code,we=xt.stat_desc.static_tree,ke=xt.stat_desc.has_stree,Ae=xt.stat_desc.extra_bits,ee=xt.stat_desc.extra_base,Dt=xt.stat_desc.max_length,Nt=0;for(_t=0;_t<=d;_t++)ut.bl_count[_t]=0;for(zt[2*ut.heap[ut.heap_max]+1]=0,Kt=ut.heap_max+1;Kt<a;Kt++)Dt<(_t=zt[2*zt[2*(It=ut.heap[Kt])+1]+1]+1)&&(_t=Dt,Nt++),zt[2*It+1]=_t,te<It||(ut.bl_count[_t]++,Lt=0,ee<=It&&(Lt=Ae[It-ee]),Mt=zt[2*It],ut.opt_len+=Mt*(_t+Lt),ke&&(ut.static_len+=Mt*(we[2*It+1]+Lt)));if(Nt!==0){do{for(_t=Dt-1;ut.bl_count[_t]===0;)_t--;ut.bl_count[_t]--,ut.bl_count[_t+1]+=2,ut.bl_count[Dt]--,Nt-=2}while(0<Nt);for(_t=Dt;_t!==0;_t--)for(It=ut.bl_count[_t];It!==0;)te<(Wt=ut.heap[--Kt])||(zt[2*Wt+1]!==_t&&(ut.opt_len+=(_t-zt[2*Wt+1])*zt[2*Wt],zt[2*Wt+1]=_t),It--)}}(c,x),kt(G,ht,c.bl_count)}function t(c,x,Z){var U,I,G=-1,J=x[1],$=0,tt=7,ht=4;for(J===0&&(tt=138,ht=3),x[2*(Z+1)+1]=65535,U=0;U<=Z;U++)I=J,J=x[2*(U+1)+1],++$<tt&&I===J||($<ht?c.bl_tree[2*I]+=$:I!==0?(I!==G&&c.bl_tree[2*I]++,c.bl_tree[2*k]++):$<=10?c.bl_tree[2*m]++:c.bl_tree[2*C]++,G=I,ht=($=0)===J?(tt=138,3):I===J?(tt=6,3):(tt=7,4))}function D(c,x,Z){var U,I,G=-1,J=x[1],$=0,tt=7,ht=4;for(J===0&&(tt=138,ht=3),U=0;U<=Z;U++)if(I=J,J=x[2*(U+1)+1],!(++$<tt&&I===J)){if($<ht)for(;M(c,I,c.bl_tree),--$!=0;);else I!==0?(I!==G&&(M(c,I,c.bl_tree),$--),M(c,k,c.bl_tree),V(c,$-3,2)):$<=10?(M(c,m,c.bl_tree),V(c,$-3,3)):(M(c,C,c.bl_tree),V(c,$-11,7));G=I,ht=($=0)===J?(tt=138,3):I===J?(tt=6,3):(tt=7,4)}}s(N);var T=!1;function v(c,x,Z,U){V(c,(f<<1)+(U?1:0),3),function(I,G,J,$){ct(I),$&&(Q(I,J),Q(I,~J)),o.arraySet(I.pending_buf,I.window,G,J,I.pending),I.pending+=J}(c,x,Z,!0)}b._tr_init=function(c){T||(function(){var x,Z,U,I,G,J=new Array(d+1);for(I=U=0;I<y-1;I++)for(P[I]=U,x=0;x<1<<O[I];x++)e[U++]=I;for(e[U-1]=I,I=G=0;I<16;I++)for(N[I]=G,x=0;x<1<<F[I];x++)K[G++]=I;for(G>>=7;I<r;I++)for(N[I]=G<<7,x=0;x<1<<F[I]-7;x++)K[256+G++]=I;for(Z=0;Z<=d;Z++)J[Z]=0;for(x=0;x<=143;)et[2*x+1]=8,x++,J[8]++;for(;x<=255;)et[2*x+1]=9,x++,J[9]++;for(;x<=279;)et[2*x+1]=7,x++,J[7]++;for(;x<=287;)et[2*x+1]=8,x++,J[8]++;for(kt(et,p+1,J),x=0;x<r;x++)w[2*x+1]=5,w[2*x]=mt(x,5);at=new nt(et,O,_+1,p,d),L=new nt(w,F,0,r,d),ot=new nt(new Array(0),R,0,h,g)}(),T=!0),c.l_desc=new z(c.dyn_ltree,at),c.d_desc=new z(c.dyn_dtree,L),c.bl_desc=new z(c.bl_tree,ot),c.bi_buf=0,c.bi_valid=0,lt(c)},b._tr_stored_block=v,b._tr_flush_block=function(c,x,Z,U){var I,G,J=0;0<c.level?(c.strm.data_type===2&&(c.strm.data_type=function($){var tt,ht=4093624447;for(tt=0;tt<=31;tt++,ht>>>=1)if(1&ht&&$.dyn_ltree[2*tt]!==0)return i;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return n;for(tt=32;tt<_;tt++)if($.dyn_ltree[2*tt]!==0)return n;return i}(c)),St(c,c.l_desc),St(c,c.d_desc),J=function($){var tt;for(t($,$.dyn_ltree,$.l_desc.max_code),t($,$.dyn_dtree,$.d_desc.max_code),St($,$.bl_desc),tt=h-1;3<=tt&&$.bl_tree[2*j[tt]+1]===0;tt--);return $.opt_len+=3*(tt+1)+5+5+4,tt}(c),I=c.opt_len+3+7>>>3,(G=c.static_len+3+7>>>3)<=I&&(I=G)):I=G=Z+5,Z+4<=I&&x!==-1?v(c,x,Z,U):c.strategy===4||G===I?(V(c,2+(U?1:0),3),Et(c,et,w)):(V(c,4+(U?1:0),3),function($,tt,ht,ut){var xt;for(V($,tt-257,5),V($,ht-1,5),V($,ut-4,4),xt=0;xt<ut;xt++)V($,$.bl_tree[2*j[xt]+1],3);D($,$.dyn_ltree,tt-1),D($,$.dyn_dtree,ht-1)}(c,c.l_desc.max_code+1,c.d_desc.max_code+1,J+1),Et(c,c.dyn_ltree,c.dyn_dtree)),lt(c),U&&ct(c)},b._tr_tally=function(c,x,Z){return c.pending_buf[c.d_buf+2*c.last_lit]=x>>>8&255,c.pending_buf[c.d_buf+2*c.last_lit+1]=255&x,c.pending_buf[c.l_buf+c.last_lit]=255&Z,c.last_lit++,x===0?c.dyn_ltree[2*Z]++:(c.matches++,x--,c.dyn_ltree[2*(e[Z]+_+1)]++,c.dyn_dtree[2*E(x)]++),c.last_lit===c.lit_bufsize-1},b._tr_align=function(c){V(c,2,3),M(c,A,et),function(x){x.bi_valid===16?(Q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(c)}},{"../utils/common":41}],53:[function(u,S,b){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,S,b){(function(o){(function(i,n){if(!i.setImmediate){var s,f,y,_,p=1,r={},h=!1,a=i.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(i);d=d&&d.setTimeout?d:i,s={}.toString.call(i.process)==="[object process]"?function(k){process.nextTick(function(){g(k)})}:function(){if(i.postMessage&&!i.importScripts){var k=!0,m=i.onmessage;return i.onmessage=function(){k=!1},i.postMessage("","*"),i.onmessage=m,k}}()?(_="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",A,!1):i.attachEvent("onmessage",A),function(k){i.postMessage(_+k,"*")}):i.MessageChannel?((y=new MessageChannel).port1.onmessage=function(k){g(k.data)},function(k){y.port2.postMessage(k)}):a&&"onreadystatechange"in a.createElement("script")?(f=a.documentElement,function(k){var m=a.createElement("script");m.onreadystatechange=function(){g(k),m.onreadystatechange=null,f.removeChild(m),m=null},f.appendChild(m)}):function(k){setTimeout(g,0,k)},d.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var m=new Array(arguments.length-1),C=0;C<m.length;C++)m[C]=arguments[C+1];var O={callback:k,args:m};return r[p]=O,s(p),p++},d.clearImmediate=l}function l(k){delete r[k]}function g(k){if(h)setTimeout(g,0,k);else{var m=r[k];if(m){h=!0;try{(function(C){var O=C.callback,F=C.args;switch(F.length){case 0:O();break;case 1:O(F[0]);break;case 2:O(F[0],F[1]);break;case 3:O(F[0],F[1],F[2]);break;default:O.apply(n,F)}})(m)}finally{l(k),h=!1}}}}function A(k){k.source===i&&typeof k.data=="string"&&k.data.indexOf(_)===0&&g(+k.data.slice(_.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pr);const fe=Jt;var Ht={},mr={get exports(){return Ht},set exports(B){Ht=B}};(function(B,H){(function(u,S){S()})(Tt,function(){function u(f,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function S(f,y,_){var p=new XMLHttpRequest;p.open("GET",f),p.responseType="blob",p.onload=function(){s(p.response,y,_)},p.onerror=function(){console.error("could not download file")},p.send()}function b(f){var y=new XMLHttpRequest;y.open("HEAD",f,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(y)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Tt=="object"&&Tt.global===Tt?Tt:void 0,n=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(f,y,_){var p=i.URL||i.webkitURL,r=document.createElement("a");y=y||f.name||"download",r.download=y,r.rel="noopener",typeof f=="string"?(r.href=f,r.origin===location.origin?o(r):b(r.href)?S(f,y,_):o(r,r.target="_blank")):(r.href=p.createObjectURL(f),setTimeout(function(){p.revokeObjectURL(r.href)},4e4),setTimeout(function(){o(r)},0))}:"msSaveOrOpenBlob"in navigator?function(f,y,_){if(y=y||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(u(f,_),y);else if(b(f))S(f,y,_);else{var p=document.createElement("a");p.href=f,p.target="_blank",setTimeout(function(){o(p)})}}:function(f,y,_,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof f=="string")return S(f,y,_);var r=f.type==="application/octet-stream",h=/constructor/i.test(i.HTMLElement)||i.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&h||n)&&typeof FileReader<"u"){var d=new FileReader;d.onloadend=function(){var A=d.result;A=a?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=A:location=A,p=null},d.readAsDataURL(f)}else{var l=i.URL||i.webkitURL,g=l.createObjectURL(f);p?p.location=g:location.href=g,p=null,setTimeout(function(){l.revokeObjectURL(g)},4e4)}});i.saveAs=s.saveAs=s,B.exports=s})})(mr);const vr=Ht,_r=Te("save",()=>{const B=wt(null);function H(i){B.value=i,localStorage.setItem("save",JSON.stringify({save:B.value}))}function u(){try{const{save:i}=JSON.parse(localStorage.getItem("save"));return B.value=i,!0}catch{return B.value=null,!1}}function S(){localStorage.removeItem("save"),B.value=null}async function b(){const i=JSON.stringify(B.value),n=fe();n.file("save.txt",i);const s=await n.generateAsync({type:"blob",compression:"DEFLATE"});vr.saveAs(s,"save.SCTReplay")}async function o(i){const n=await fe.loadAsync(i);B.value=JSON.parse(await n.file("save.txt")?.async("string")||"{}")}return{save:B,SaveStorage:H,LoadStorage:u,CleanStorage:S,Download:b,Upload:o}});const gr=Oe({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:B=>typeof B=="boolean"||[1e3,1024].includes(B)},...Fe({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:B=>Be(B).every(H=>H!=null&&typeof H=="object")},...Le({clearable:!0})},emits:{"click:control":B=>!0,"update:modelValue":B=>!0},setup(B,H){let{attrs:u,emit:S,slots:b}=H;const{t:o}=Re(),i=Yt(B,"modelValue"),n=ft(()=>typeof B.showSize!="boolean"?B.showSize:void 0),s=ft(()=>(i.value??[]).reduce((m,C)=>{let{size:O=0}=C;return m+O},0)),f=ft(()=>ae(s.value,n.value)),y=ft(()=>(i.value??[]).map(m=>{const{name:C="",size:O=0}=m;return B.showSize?`${C} (${ae(O,n.value)})`:C})),_=ft(()=>{var m;const C=((m=i.value)==null?void 0:m.length)??0;return B.showSize?o(B.counterSizeString,C,f.value):o(B.counterString,C)}),p=wt(),r=wt(),h=wt(!1),a=wt(),d=ft(()=>B.messages.length?B.messages:B.persistentHint?B.hint:"");function l(){if(a.value!==document.activeElement){var m;(m=a.value)==null||m.focus()}h.value||(h.value=!0)}function g(m){ie(B["onClick:prepend"],m),A(m)}function A(m){var C;(C=a.value)==null||C.click(),S("click:control",m)}function k(m){m.stopPropagation(),l(),me(()=>{i.value=[],a!=null&&a.value&&(a.value.value=""),ie(B["onClick:clear"],m)})}return Xt(()=>{const m=!!(b.counter||B.counter),C=!!(m||b.details),[O,F]=Ke(u),[{modelValue:R,...j}]=Ne(B),[et]=Ge(B);return q(Ve,Rt({ref:p,modelValue:i.value,"onUpdate:modelValue":w=>i.value=w,class:"v-file-input","onClick:prepend":g,"onClick:append":B["onClick:append"]},O,j,{focused:h.value,messages:d.value}),{...b,default:w=>{let{id:K,isDisabled:e,isDirty:P,isReadonly:at,isValid:L}=w;return q(je,Rt({ref:r,"prepend-icon":B.prependIcon,"onClick:control":A,"onClick:clear":k,"onClick:prependInner":B["onClick:prependInner"],"onClick:appendInner":B["onClick:appendInner"]},et,{id:K.value,active:P.value||h.value,dirty:P.value,focused:h.value,error:L.value===!1}),{...b,default:ot=>{var N;let{props:{class:nt,...z}}=ot;return q(dt,null,[q("input",Rt({ref:a,type:"file",readonly:at.value,disabled:e.value,multiple:B.multiple,name:B.name,onClick:E=>{E.stopPropagation(),l()},onChange:E=>{if(!E.target)return;const Q=E.target;i.value=[...Q.files??[]]},onFocus:l,onBlur:()=>h.value=!1},z,F),null),q("div",{class:nt},[!!((N=i.value)!=null&&N.length)&&(b.selection?b.selection({fileNames:y.value,totalBytes:s.value,totalBytesReadable:f.value}):B.chips?y.value.map(E=>q($e,{key:E,size:"small",color:B.color},{default:()=>[E]})):y.value.join(", "))])])}})},details:C?w=>{var K,e;return q(dt,null,[(K=b.details)==null?void 0:K.call(b,w),m&&q(dt,null,[q("span",null,null),q(Me,{active:!!((e=i.value)!=null&&e.length),value:_.value},b.counter)])])}:void 0})}),Qt({},p,r,a)}}),yr={class:"d-flex flex-column"},br={class:"d-flex flex-column"},wr={class:"d-flex flex-column"},kr={class:"d-flex flex-column"},Sr=Bt({__name:"LocalGame",props:{config:null},setup(B){const H=B,u=qt(),S=We(),b=_r();b.LoadStorage();const o=new Ye,i=new qe(0,o);o.init(H.config),o.game.start();const n=wt({canUndo:!1,canRedo:!1}),s=wt(o.game.getState()),f=ft(()=>s.value.player[0]);o.server.notify.push(k=>{s.value=k}),o.saveStateChanged=()=>{n.value=o.getState()};function y(){S.back()}document.onkeydown=k=>{if(!(k.shiftKey||k.altKey)){if(k.ctrlKey){switch(k.key){case"z":n.value.canUndo&&o.undo();break;case"y":n.value.canRedo&&o.redo();break}return}switch(k.key){case"w":i.autoPost({msg:"$upgrade"});break;case"z":i.autoPost({msg:"$finish"});break;case"c":i.autoPost({msg:i.getPlayer()?.locked?"$unlock":"$lock"});break;case"r":i.autoPost({msg:"$refresh"});break;default:{const m=s.value.player[i.pos];if(!m||m.selected.area==="none")break;for(const C of m[m.selected.area][m.selected.place]?.actions||[])if(k.key===C.acckey){i.post(C.msg);break}}}}};const _=wt(!1),p=wt(""),r=ft(()=>s.value.config.ActivePack.map(k=>De[k]).reduce((k,m)=>k.concat(m),[]).map(k=>Zt[k]).map((k,m)=>({card:k,find:k.pinyin.indexOf(p.value),index:m})).filter(({find:k})=>k!==-1).sort((k,m)=>k.find!==m.find?k.find-m.find:k.index-m.index).map(({card:k})=>k).slice(0,10)),h=wt(!1),a=wt(""),d=ft(()=>s.value.config.ActiveUnit.map(k=>Pe[k]).map((k,m)=>({unit:k,find:k.pinyin.indexOf(a.value),index:m})).filter(({find:k})=>k!==-1).sort((k,m)=>k.find!==m.find?k.find-m.find:k.index-m.index).map(({unit:k})=>k).slice(0,10)),l=wt(!1),g=wt([]);function A(){b.Upload(g.value[0]),l.value=!1}return(k,m)=>(Y(),st(dt,null,[q(hr,{class:"MiddleScale",state:s.value,client:W(i)},{default:it(()=>[X("div",yr,[q(gt,{variant:"flat",onClick:m[0]||(m[0]=C=>y())},{default:it(()=>[pt(" 返回 ")]),_:1}),q(gt,{variant:"flat",onClick:m[1]||(m[1]=C=>_.value=!0),disabled:W(f)?.status!=="normal"},{default:it(()=>[pt(" 卡牌 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",disabled:W(f)?.selected.area!=="present"||W(f)?.status!=="normal",onClick:m[2]||(m[2]=C=>h.value=!0)},{default:it(()=>[pt(" 单位 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",disabled:W(f)?.status!=="normal",onClick:m[3]||(m[3]=C=>W(i).autoPost({msg:"$cheat",type:"resource"}))},{default:it(()=>[pt(" 资源 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",class:"mt-auto",onClick:m[4]||(m[4]=C=>W(u).toggleFullScreen())},{default:it(()=>[pt(rt(W(u).isFullScreen?"窗口":"全屏"),1)]),_:1})]),X("div",br,[q(gt,{variant:"flat",disabled:!n.value.canUndo,onClick:m[5]||(m[5]=C=>W(o).undo())},{default:it(()=>[pt(" 撤销 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",disabled:!n.value.canRedo,onClick:m[6]||(m[6]=C=>W(o).redo())},{default:it(()=>[pt(" 重做 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",onClick:m[7]||(m[7]=C=>W(b).SaveStorage(W(o).save))},{default:it(()=>[pt(" 保存 ")]),_:1}),q(gt,{variant:"flat",disabled:!W(b).save,onClick:m[8]||(m[8]=C=>W(b).save?W(o).load(W(b).save):void 0)},{default:it(()=>[pt(" 读取 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",disabled:!W(b).save,onClick:m[9]||(m[9]=C=>W(b).CleanStorage())},{default:it(()=>[pt(" 清除 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",disabled:!W(b).save,onClick:m[10]||(m[10]=C=>W(b).Download())},{default:it(()=>[pt(" 导出 ")]),_:1},8,["disabled"]),q(gt,{variant:"flat",onClick:m[11]||(m[11]=C=>l.value=!0)},{default:it(()=>[pt(" 导入 ")]),_:1})])]),_:1},8,["state","client"]),q($t,{modelValue:_.value,"onUpdate:modelValue":m[14]||(m[14]=C=>_.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Vt,null,{default:it(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:p.value,"onUpdate:modelValue":m[12]||(m[12]=C=>p.value=C),onKeyup:m[13]||(m[13]=se(C=>W(r).length>0&&W(i).autoPost({msg:"$cheat",type:"card",cardt:W(r)[0].name}),["enter"]))},null,8,["density","modelValue"]),X("div",wr,[(Y(!0),st(dt,null,bt(W(r),(C,O)=>(Y(),At(gt,{variant:"flat",class:Ut({enterSelect:O===0}),key:`GCChoice-${O}`,onClick:F=>W(i).autoPost({msg:"$cheat",type:"card",cardt:C.name})},{default:it(()=>[pt(rt(C.pinyin)+" "+rt(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q($t,{modelValue:h.value,"onUpdate:modelValue":m[17]||(m[17]=C=>h.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Vt,null,{default:it(()=>[q(oe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:a.value,"onUpdate:modelValue":m[15]||(m[15]=C=>a.value=C),onKeyup:m[16]||(m[16]=se(C=>W(d).length>0&&W(i).autoPost({msg:"$cheat",type:"unit",units:[W(d)[0].name],place:W(f)?.selected.place||0}),["enter"]))},null,8,["density","modelValue"]),X("div",kr,[(Y(!0),st(dt,null,bt(W(d),(C,O)=>(Y(),At(gt,{variant:"flat",class:Ut({enterSelect:O===0}),key:`GUChoice-${O}`,onClick:F=>W(i).autoPost({msg:"$cheat",type:"unit",units:[C.name],place:W(f)?.selected.place||0})},{default:it(()=>[pt(rt(C.pinyin)+" "+rt(C.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),q($t,{modelValue:l.value,"onUpdate:modelValue":m[20]||(m[20]=C=>l.value=C)},{default:it(()=>[q(Ot,null,{default:it(()=>[q(Je,null,{default:it(()=>[pt(" 导入 ")]),_:1}),q(Vt,null,{default:it(()=>[q(gr,{modelValue:g.value,"onUpdate:modelValue":m[18]||(m[18]=C=>g.value=C),accept:".SCTReplay"},null,8,["modelValue"])]),_:1}),q(He,null,{default:it(()=>[q(ve,{color:"primary",disabled:g.value.length!==1,onClick:m[19]||(m[19]=C=>A())},{default:it(()=>[pt(" 确定 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Sr as default};
