import{aI as ie,W as Ee,Z as ze,aJ as Te,aK as jt,z as Ot,D as Y,F as st,G as Q,E as W,c as dt,B as At,C as it,h as M,aL as Ut,Q as at,K as ft,L as yt,J as pt,N as Ct,aM as Ft,i as Be,aN as Oe,u as te,g as Re,r as wt,l as Rt,f as ee,A as _e,aq as Ke,aO as De,a as ne,d as We,m as ye,a5 as be,e as Pe,t as Vt,I as qt,aw as se,w as oe,k as Ze,as as Ue,q as Fe,av as Le,aP as le,a8 as Ne,j as Ge,aH as ue,s as je,aQ as ce,X as Ve,aR as $e,aS as Me}from"./index-ea1a5707.js";import{_ as mt,h as zt,n as Je,o as He,p as qe,q as Ye,r as we,k as Zt,s as Xe,g as ke,t as Ae,v as Qe,R as tn,w as en,m as nn,x as rn,y as an,z as sn,A as on,B as ln,C as un,D as cn,u as dn,E as fn,F as hn,G as pn,H as mn,I as vn,J as gn,K as $t,L as _n,V as Mt,M as de,c as yn,N as bn,f as wn,O as kn,P as An,Q as xn,e as Cn,S as Yt,i as fe,T as Sn,l as In,j as En}from"./VTextField-0baff642.js";class zn{constructor(q,u,I=!1){this.pos=q,this.wrapper=u,this.observer=I}post(q){this.observer||this.wrapper.game.input({...q})}autoPost(q){this.post({...q,player:this.pos})}getPlayer(){return this.wrapper.game.player[this.pos]}}class he{constructor(){this.notify=[]}emit(q){this.notify.forEach(u=>u(q))}}class Tn{constructor(){this.server=new he,this.server.notify.push(()=>{this.loading||this.autoSave()}),this.game=new ie({Pack:["核心"],Seed:1,Role:["白板"],Mutation:[],Pve:!1,PoolPack:Ee,ActivePack:ze,ActiveUnit:Te.map(q=>q)},this.server),this.save={old:[jt.serialize(this.game)],new:[]},this.loading=!1,this.saveStateChanged=()=>{}}unbind(){this.game.$ignore$Server=new he}bind(){this.game.$ignore$Server=this.server,this.loading=!0,this.server.emit(this.game.getState()),this.loading=!1}init(q){this.unbind(),this.game=new ie(q,this.server),this.save={old:[jt.serialize(this.game)],new:[]},this.saveStateChanged()}load(q){this.save=q,this.loadActive()}loadActive(){this.unbind(),this.game=jt.deserialize(this.save.old[this.save.old.length-1]),this.bind(),this.saveStateChanged()}undo(){this.save.old.length>1&&(this.save.new.push(this.save.old.pop()),this.loadActive())}redo(){this.save.new.length>0&&(this.save.old.push(this.save.new.pop()),this.loadActive())}getState(){return{canRedo:this.save.new.length>0,canUndo:this.save.old.length>1}}autoSave(){this.save.new=[],this.save.old.push(jt.serialize(this.game)),this.saveStateChanged()}}const Bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAMAAAAcqPc3AAABiVBMVEUAAAAAAP8AgIAAVapAQIAzZpkrVYAkSZIgYJ8zZpkuXYsnYokwYI8tWpYrVZUpXI8kW5IsWI0pWpQoWI8nXZMsV5IpWpErW5InWZAnWJMrWpIoWZIpWpIoWpAqW5MpWpEoWZIrXJAqWpEoWpIoWZArW5IqWpAqWZEpW5AoWZIoW5EqWpIqWZApWpEpWpAoW5EoWpIpWpAoW5AqWZIqW5EpWZApW5EoWpAqWZEoWZEoW5ApWpIoWZEoW5EqWpApWZEpWpEoWpEpWpAoWpIqWZEqW5EpWpApW5AqWZIpWpEoWpAoW5EpWpEpW5EqWpEpW5EpW5EpWpIpW5EpWpEpWpEoWpAqWpEpWZIpWZEpWpEqWpApW5EpWpIpWpEpW5EoWpEpWpEpWpEpWpEoWZEpWpEpWpEpWZEpWpIpW5EqWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEoWpEpWZEpWpEpWpEpW5EpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpEpWpH///9iquSlAAAAgXRSTlMAAQIDBAUGBwgKCw0QERgZHB0fICEjJSouNDY/REdJSk1OT1JTVFVWV1laW1xdXl9gY2VnaGprbG1yc3d4eXp7fX+DhYaHiIqMkJGSlJWZo6mqtLu8vb6/wsPExcbHyMrMzs/Q0dLT1NbX2Nna3N7f4OPk5ebn6uzu7/Hz9/j5+vygaELFAAAAAWJLR0SCi7P/RAAAATRJREFUGBltwQc3QmEABuC3IknIyEhGqWyykln2zsgudclIiJIV4v3n7ndzTufgeZCn3y7Bf+a5hH9Uf3x91uAvu9/ib0OeNiiFAoHA/qENjXshSTjWAbBQsWuqHzOXb1LRDGCVQnTYTWYM7hAFP4BEoH2G5GNTgpw6I7ni2HlQodZXZh6n7J0/vHVGXz0MsPI3BwoBWHkiMe9Eoh2CNV26y7wDQ9IOoaWr6jXbPkHB5/jImJytECrUR5ODxgyFt8r+ibC6Agobb3sjzJFcV3RCoY7Sc3EWoxA7jw/xUg2hgymdtyRG4Vo/rb1nJ2SaOEeAVua0AYO8KQAwwKQOiJDMkjxVQXvHPqA4xWcp3EXZMmWukPTERBE8L7L1YHprcc4wu7CRulijbBSK2h4NclTdDRC+AT2KgPJ9IL5pAAAAAElFTkSuQmCC",On="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAfCAMAAADZe72GAAABQVBMVEUAAAD//wD//wD/qlW/v0DMzDPV1Svb20no0UbVv0DYxDvhwzzjxjnkyUPZzEDbzj3eyEPfykDbyEDcyj7fx0DgyT7hyzzbzELgxz7byjveyTzgyz7gxz3cyDzdyUDeyz3cyj7eyT/eyj7fyj3fx0DgyD/cyT7fykDgyz/fyD3fyT3eyj7eyj3fyT7fyj3eyT7fyD/dyj/eyT3fyD7dyT3fyT/dyj7dyD3eyT7fyT7eyj7eyT3eyT7eyD/fyT7fyT3eyT7dyT7dyT/eyT7eyT7eyT3eyT7eyj7eyD3eyT7eyT3eyD7eyT7eyT/eyT7eyT7eyT7eyT7fyT3eyT7eyT3dyT7eyj7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7eyT7///8gDrLIAAAAaXRSTlMAAQIDBAUGBwsMDRESExQVFxgcHSAhIiMpKy8xMjM0Njo9Pj9AQUJISU9QVlxfYGNmaWxvcXZ4eXt/i5Kco6Wmqq6vsrS3uLq7wcPJztDT1trb3N/g5OXn6Orr7PDx8vP09vj5+vv8/f6Lin9bAAAAAWJLR0RqJWKVDgAAAP9JREFUGBldwQc7QgEAhtG3CGWUSLKbCNmSEdmR2SCblu///wFX6tF1DgxaMfNHMAukMAvWvJgEtYtJSJqnVUh69dEiJCnr4k9Iyq/MUudzAWEpAUMdGLov2iEsbcBExoPhYQHCUgqsHzd2IHcEEakyiqOsBFAogL8kFTdPpJwFx2cJsK1VZdhZ6iWuZ6CnPy7DFpZYRddgL76NP8mQuZO0B+4vRU/VtAhMTluO1VB2wtwYUyU1JMHxWL2tqaE6AstqsQ0cyJA7LMtw2QVcSUp2si4p78HwLp3bICDlvPx4UWUYiOnMSV1W+4A1vdrGr7SigMdNU0J9mAzc888MJt/I0kvypbVLxQAAAABJRU5ErkJggg==",Rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAMAAABrajdMAAAB4FBMVEUAAAD/AP+AAICAQICZM5mAK4CSJJKAIJ+OHI6AM5mLLouAK5WJJ4mAJJKHLZaOK46GKJSMJoyGJJKFLJCFKY+JJ5OEJo6JJJKIK5GMKZSLJ5OHK46KKZGGKJSJJ5CGJpOJLI+GK5KIKo6FKZGIKJOLJ5CIK5KHKpKKKY+HK5CJK5KGKpCJKZKIKJGGJ5OKKpKIKZCKKJKHKI+HKZKHKJKHK5GIKpOKKJCIKJKJK5CIKpGJKJKHKJCHKZCIKJGJKpKIKpCJKZGIKZCHKJGIKpKIKZKIKZGJKJCIKZGJKZKIKJGIKpGIKZGHKZKIKpCJKZGIKZKJKZGIKpCHKZGIKJKHKpGIKpGIKJGJKpKIKpGIKZGHKJCHKpKIKZGJKZGIKJCJKpGIKZGIKZGIKJGHKZGIKZKIKZGIKpGIKZGJKZKIKZGIKJGIKZCIKZGJKJGIKpKIKJCIKpGIKZKIKZGJKpCIKZGJKZKIKZGIKJGIKZCIKZKIKZGIKZGIKZGIKZGIKZGIKZGIKZKIKZGIKpGIKZGIKZGHKZGIKZGIKJGIKZGIKZGIKZGIKJCIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZGIKZH///8QAlFtAAAAnnRSTlMAAQIEBQYHCAkKCwwNDhESExQVFxkaGxweHyEkJSYnKCkqKywtLi8xMjU2Nzg6Oz0+P0BERkhJTE1OT1JTV1pbXF1eZmdpa2xvcHJ0dnd6e3x9gYSFhoeLjI2OkZOWl5iZnJ2eoKGjpaeoqautrre4vb6/wcTFxsnKy83O0tbY2drb3N3e3+Dh4+Tm5+nq6+zt7vDx8/T29/n6+/z9/ohh8dsAAAABYktHRJ/otZOdAAABlElEQVQYGW3BiVuLAQDH8d/aotiGvM7S4ajJFcnRtCiRtbByLJIVQ1RDJiTLkavNkWzW2vdvtbee8Xoen48samr1X7aRe25Zudr6boeaHdqQiRsq119O7yS8OaIJnhfvDsjC8Yi5Y3oGFzb/MrTME4qOle9lWJvS2dNV++mSad0oMC4HqZ5J4lI/I3aXpKaGfa2xzOVBloyN5nhS1qI8o1+rM/yR8V480S2pZnaxvQOINm9tuA8kbe6ZgF2lr+ZeAtl2mXqBhzOcbFKo16lxCGpbNHF3lf0tEP9ZEVHdzlvGez6vcH8CgroBWVdl15AUI29A3bw+9S6sq0DP9ZxHO+b95+GcHhDQpcOKYXosdbQUlYFfEcKqkhfTgkfyGU+nYUjHWQjWd6YwXZFUUs9ElGSxBil4sVJ5BxJuZ46zKoqw7IMhU8VwYyf82CW1fiHv+3YtsfnamL2TTh6S1vqn+FqngvXfquVjcWCjpNpKFazRwRIZQPpmtSz29G2R4xp5H4/KqjExnwKmzpTqX+5AOBL0yOo3LpiexziX8A0AAAAASUVORK5CYII=",Kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAAAmJLR0QA/4ePzL8AAAImSURBVDjLhZRNSFVREMdPlNGiTYWFm77EKErEVUgLIUWqRYvAIDLRO7+5+jT7AAmqjSDlppIwKItaWFFpaGXLhFYVJD2KzBZKRfaNditFK3RavPte7/kUz2z+cH5zZs6cmeNc2tJierXdz3ZzLd1IN4Zh/KGVFbOC/kquMRmiMQvkaMWidDBDD/IrBYzboJSmoFLEqxnBuD1gg3POudL53MJ4xpqqnJiLdvnZXh5vMUwv+1myhUkmpMo5V71a8ulngFppZATDeC31NDGKYUQ5pC2Y3IgsoczxlVPVyznG2KxJDMg2LSRK4AgwvuB7a7kzAzhOg7+ejlhtHAHv+IQR1UKvRPuSUbktm6SR8XghHQHH/Sx+YhgdVTkcCDN/zlbdy1CS83dHwFBlJo8TYU/IKm0h4hXwCMPo8fKk/j9sDDMVwmMYH70CamNvqW2yX+u0MBmO26ifwXmMCGcxjH4txrgqF6fBcoT3GGVeHkaEcxhGJ0+ZYhcT02A/l3KM3/RiRPRCPJrel7tJF9Qz2obRKYcT6US4lNAPE2rEEUijn8FgylNEuJLQn3mRBDOmu4mmwtoWqknJl9Oh/ub8zfIkCWtmBMPneryby5fJGwyjW9c559w8yvkQ1mSp1mAINxMX/IFpn1eS1P41i2liAtOT7MC0ImwdwxjWuoYF6aOVre3h+fu0C8P4S2tl5qxDK0W8xNjDPYweP3eOz6B0odTrdpp1Z/reP9LLBjo3QdHHAAAAAElFTkSuQmCC",Dn={T:Bn,P:On,Z:Rn,N:Kn},Wn={class:"raceIconRoot align-center justify-center"},Pn=["src"],Lt=Ot({__name:"RaceIcon",props:{race:null},setup(C){return(q,u)=>(Y(),st("div",Wn,[Q("img",{src:W(Dn)[C.race]},null,8,Pn)]))}});const Zn={class:"d-flex"},Un={class:"Label ml-1"},Fn={class:"Label ml-auto mr-1"},Ln={class:"d-flex mt-auto"},pe=Ot({__name:"StoreItem",props:{state:null,client:null,place:null},setup(C){const q=C,u=dt(()=>{var i;return((i=q.state.player[q.client.pos])==null?void 0:i.store[q.place])||null}),I=dt(()=>{var i;return((i=q.state.player[q.client.pos])==null?void 0:i.selected)||{area:"none",place:-1}}),y={enter:"购买",combine:"三连",stage:"暂存"},s=dt(()=>I.value.area==="store"&&I.value.place===q.place);return(i,a)=>{var l,h,b;return Y(),At(zt,{class:Ft(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)&&!((l=W(u))!=null&&l.special),special:!!((h=W(u))!=null&&h.special)}]),color:W(u)&&((b=q.state.player[q.client.pos])!=null&&b.locked)?"cyan":"",onClick:a[0]||(a[0]=m=>C.client.autoPost(W(u)?{msg:"$select",area:"store",place:C.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>{var m;return[W(u)?(Y(),st(ft,{key:0},[Q("div",Zn,[M(Lt,{race:W(Ut)[W(u).card].race},null,8,["race"]),Q("span",Un,at(W(u).card),1),Q("span",Fn,at(W(Ut)[W(u).card].level),1)]),Q("div",Ln,[(Y(!0),st(ft,null,yt(((m=W(u))==null?void 0:m.actions)||[],(p,n)=>(Y(),At(mt,{variant:"text",key:`SA-${n}`,disabled:!p.enable,onClick:f=>C.client.post(p.msg)},{default:it(()=>[pt(at(y[p.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]}),_:1},8,["color","class"])}}}),Nn={class:"d-flex"},Gn={class:"Label ml-1"},jn={class:"Label ml-auto mr-1"},Vn={class:"d-flex mt-auto"},me=Ot({__name:"HandItem",props:{state:null,client:null,place:null},setup(C){const q=C,u=dt(()=>{var i;return((i=q.state.player[q.client.pos])==null?void 0:i.hand[q.place])||null}),I=dt(()=>{var i;return((i=q.state.player[q.client.pos])==null?void 0:i.selected)||{area:"none",place:-1}}),y={enter:"进场",combine:"三连",sell:"出售"},s=dt(()=>I.value.area==="hand"&&I.value.place===q.place);return(i,a)=>(Y(),At(zt,{class:Ft(["d-flex flex-column align-self-start KeyCard",{selected:W(s),unselected:!W(s)}]),onClick:a[0]||(a[0]=l=>C.client.autoPost(W(u)?{msg:"$select",area:"hand",place:C.place}:{msg:"$select",area:"none",place:-1}))},{default:it(()=>{var l;return[W(u)?(Y(),st(ft,{key:0},[Q("div",Nn,[M(Lt,{race:W(Ut)[W(u).card].race},null,8,["race"]),Q("span",Gn,at(W(u).card),1),Q("span",jn,at(W(Ut)[W(u).card].level),1)]),Q("div",Vn,[(Y(!0),st(ft,null,yt(((l=W(u))==null?void 0:l.actions)||[],(h,b)=>(Y(),At(mt,{variant:"text",key:`HA-${b}`,disabled:!h.enable,onClick:m=>C.client.post(h.msg)},{default:it(()=>[pt(at(y[h.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]}),_:1},8,["class"]))}}),$n={class:"d-flex flex-column"},Pt=Ot({__name:"AutoSpan",props:{text:null},setup(C){return(q,u)=>(Y(),st("div",$n,[(Y(!0),st(ft,null,yt(C.text,(I,y)=>(Y(),st("div",{class:"d-flex flex-column ASRow",key:`S-${y}`},[(Y(!0),st(ft,null,yt(I.split(`
`),(s,i)=>(Y(),st("span",{class:"Info",key:`SS-${y}-${i}`},at(s),1))),128))]))),128))]))}});const Mn=Be()({name:"VTooltip",props:{id:String,text:String,...Oe(Je({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":C=>!0},setup(C,q){let{slots:u}=q;const I=te(C,"modelValue"),{scopeId:y}=He(),s=Re(),i=dt(()=>C.id||`v-tooltip-${s}`),a=wt(),l=dt(()=>C.location.split(" ").length>1?C.location:C.location+" center"),h=dt(()=>C.origin==="auto"||C.origin==="overlap"||C.origin.split(" ").length>1||C.location.split(" ").length>1?C.origin:C.origin+" center"),b=dt(()=>C.transition?C.transition:I.value?"scale-transition":"fade-transition"),m=dt(()=>Rt({"aria-describedby":i.value},C.activatorProps));return ee(()=>{const[p]=qe(C);return M(Ye,Rt({ref:a,class:["v-tooltip"],id:i.value},p,{modelValue:I.value,"onUpdate:modelValue":n=>I.value=n,transition:b.value,absolute:!0,location:l.value,origin:h.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:m.value,_disableGlobalStack:!0},y),{activator:u.activator,default:function(){for(var n,f=arguments.length,r=new Array(f),c=0;c<f;c++)r[c]=arguments[c];return((n=u.default)==null?void 0:n.call(u,...r))??C.text}})}),we({},a)}}),Jn={class:"d-flex flex-column DescCol overflow-y-auto"},Hn={class:"Label"},qn={class:"d-flex"},Yn={class:"Label"},Xn={class:"Label ml-auto"},Qn={class:"d-flex flex-column mt-2 overflow-y-auto"},tr={class:"d-flex flex-column UnitCol"},er={class:"Label"},nr={class:"d-flex flex-column UpgrCol"},rr={class:"Label"},ar={class:"d-flex"},ir={class:"Label"},sr={class:"d-flex"},or={class:"Label"},lr={class:"Label ml-auto mr-1"},ur={class:"d-flex flex-column mt-auto"},cr={key:0,class:"d-flex justify-space-between Info"},dr={class:"d-flex flex-column"},fr={class:"d-flex flex-column justify-end"},hr={class:"d-flex justify-space-between"},pr={class:"d-flex flex-column"},mr={class:"Info"},vr={key:1,class:"mt-auto"},gr={class:"d-flex"},_r=Ot({__name:"PresentItem",props:{state:null,client:null,place:null},setup(C){const q=C,u=_e(),I=dt(()=>{var m;return((m=q.state.player[q.client.pos])==null?void 0:m.present[q.place])||null}),y=dt(()=>{var p,n;const m=((n=(p=I.value)==null?void 0:p.card)==null?void 0:n.color)||"normal";return m!=="normal"?m==="gold"?"yellow":m:""}),s=dt(()=>{var m;return((m=q.state.player[q.client.pos])==null?void 0:m.selected)||{area:"none",place:-1}}),i={upgrade:"升级",sell:"出售",insert:"这里",deploy:"这里"},a=wt(!1);function l(m){const p={};return m.forEach(n=>{p[n]=(p[n]??0)+1}),Object.keys(p).map(n=>`${n}	${p[n]}`)}const h=dt(()=>{var m,p;return l(((p=(m=I.value)==null?void 0:m.card)==null?void 0:p.units)||[])}),b=dt(()=>s.value.area==="present"&&s.value.place===q.place);return(m,p)=>(Y(),At(zt,{class:Ft(["d-flex flex-column align-self-start PresCard",{selected:W(b),unselected:!W(b)}]),color:W(y),onClick:p[2]||(p[2]=n=>{var f;return C.client.autoPost((f=W(I))!=null&&f.card?{msg:"$select",area:"present",place:C.place}:{msg:"$select",area:"none",place:-1})})},{default:it(()=>[W(I)?(Y(),st(ft,{key:0},[W(I).card?(Y(),st(ft,{key:0},[M(Zt,{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=n=>a.value=n),class:"w-75"},{default:it(()=>[M(zt,{class:"d-flex flex-row InfoCard pa-2 justify-space-between"},{default:it(()=>[Q("div",Jn,[Q("span",Hn,at(W(I).card.name),1),Q("div",qn,[M(Lt,{race:W(I).card.race},null,8,["race"]),Q("span",Yn,at(W(I).card.level),1),Q("span",Xn,at(W(I).card.value),1)]),Q("div",Qn,[M(Pt,{text:W(I).card.descs},null,8,["text"]),M(Pt,{class:"mt-2",text:W(I).card.notes},null,8,["text"])])]),Q("div",tr,[Q("span",er," 单位 "+at(W(I).card.units.length)+" / "+at(W(I).card.config.MaxUnit),1),M(Pt,{class:"overflow-y-auto",text:W(h)},null,8,["text"])]),Q("div",nr,[Q("span",rr," 升级 "+at(W(I).card.upgrades.length)+" / "+at(W(I).card.config.MaxUpgrade),1),M(Pt,{text:W(I).card.upgrades},null,8,["text"])])]),_:1})]),_:1},8,["modelValue"]),Q("div",ar,[M(mt,{variant:"text",onClick:p[1]||(p[1]=n=>a.value=!0)},{default:it(()=>[pt(" 信息 ")]),_:1})]),Q("span",ir,at(W(I).card.name),1),Q("div",sr,[M(Lt,{race:W(I).card.race},null,8,["race"]),Q("span",or,at(W(I).card.level),1),Q("span",lr,at(W(I).card.value),1)]),M(Pt,{text:W(I).card.notes},null,8,["text"]),Q("div",ur,[W(u).isMobile?Ct("",!0):(Y(),st("div",cr,[Q("div",dr,[(Y(!0),st(ft,null,yt(W(h).slice(0,5),(n,f)=>(Y(),st("span",{key:`Unit-${f}`},at(n),1))),128))]),Q("div",fr,[(Y(!0),st(ft,null,yt(W(I).card.upgrades,(n,f)=>(Y(),st("span",{key:`Upgrade-${f}`},at(n),1))),128))])])),Q("div",hr,[M(Mn,{location:"top"},{activator:it(({props:n})=>[Q("span",Rt({class:"Info"},n),at(W(I).card.units.length)+" / "+at(W(I).card.config.MaxUnit),17)]),default:it(()=>[Q("div",pr,[(Y(!0),st(ft,null,yt(W(h),(n,f)=>(Y(),st("span",{class:"Info",key:`UnitTip-${f}`},at(n),1))),128))])]),_:1}),Q("span",mr,at(W(I).card.upgrades.length)+" / "+at(W(I).card.config.MaxUpgrade),1)])])],64)):(Y(),st("div",vr)),Q("div",gr,[(Y(!0),st(ft,null,yt(W(I).actions||[],(n,f)=>(Y(),At(mt,{variant:"text",key:`PA-${f}`,disabled:!n.enable,onClick:r=>C.client.post(n.msg)},{default:it(()=>[pt(at(i[n.action]),1)]),_:2},1032,["disabled","onClick"]))),128))])],64)):Ct("",!0)]),_:1},8,["color","class"]))}});const yr={key:0,class:"d-flex"},br={class:"Label ml-1"},wr={class:"Label ml-auto mr-1"},kr={key:1,class:"Label"},Ar={key:2,class:"Label"},xr={key:3,class:"Label"},ve=Ot({__name:"DiscoverItem",props:{state:null,client:null,place:null},setup(C){const q=C,u=dt(()=>{var I,y;return((y=(I=q.state.player[q.client.pos])==null?void 0:I.discover)==null?void 0:y.item[q.place])||null});return(I,y)=>(Y(),At(zt,{class:"d-flex flex-column align-self-start KeyCard",onClick:y[0]||(y[0]=s=>C.client.autoPost({msg:"$choice",category:"discover",place:C.place}))},{default:it(()=>[W(u)?(Y(),st(ft,{key:0},[W(u).type==="card"?(Y(),st("div",yr,[M(Lt,{race:W(u).card.race},null,8,["race"]),Q("span",br,at(W(u).card.name),1),Q("span",wr,at(W(u).card.level),1)])):W(u).type==="upgrade"?(Y(),st("span",kr,at(W(u).upgrade.name),1)):W(u).type==="prophesy"?(Y(),st("span",Ar,at(W(u).prophesy.name),1)):(Y(),st("span",xr,at(W(u).str),1))],64)):Ct("",!0)]),_:1}))}}),Cr={class:"d-flex flex-column justify-center"},Sr={class:"d-flex"},Ir={class:"ml-auto"},Er=Q("hr",null,null,-1),zr={key:0,class:"d-flex"},Tr={class:"d-flex flex-column"},Br={class:"Info"},Or={class:"Info"},Rr={class:"HandContainer"},Kr={class:"ml-1"},Dr={class:"d-flex flex-column"},Wr={class:"StoreContainer"},Pr={class:"mt-1"},Zr={key:0,class:"mt-1"},Ur={key:0,class:"d-flex mt-1 DiscoverContainer"},Fr={class:"mt-1"},Lr={key:0,class:"mt-1 mb-1"},Nr={class:"d-flex mt-auto mb-1"},Gr={class:"PresentContainer"},jr=Ot({__name:"GameInstance",props:{state:null,client:null},setup(C){const q=C,u=dt(()=>q.state.player[q.client.pos]),I=dt(()=>{var a;const i=(a=u.value)==null?void 0:a.role;return{upgrade:"升级",refresh:"刷新",lock:"锁定",unlock:"解锁",finish:"结束",ability:i?i.ability+(i.progress?i.progress.max===-1?` ${i.progress.cur}`:` ${i.progress.cur} / ${i.progress.max}`:""):"魂姿"}}),y=wt(!0),s=wt(!1);return(i,a)=>{var l,h,b,m,p,n,f,r,c,o,g,A,k,v,S,T,Z,R,F,X,w,D;return Y(),st("div",Cr,[M(Zt,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),class:"w-50"},{default:it(()=>[M(zt,{class:"d-flex flex-column"},{default:it(()=>{var e;return[(Y(!0),st(ft,null,yt(((e=W(u))==null?void 0:e.role.record)||[],(O,nt)=>(Y(),st("span",{class:"Info ma-4",key:`RI-${nt}`},at(O),1))),128))]}),_:1})]),_:1},8,["modelValue"]),Q("div",Sr,[M(zt,{class:"ControlPanel d-flex flex-column"},{default:it(()=>[Q("div",Ir,[M(mt,{variant:"flat",onClick:a[1]||(a[1]=e=>y.value=!y.value)},{default:it(()=>[pt(" 菜单 ")]),_:1})]),y.value?(Y(),st(ft,{key:0},[Er,y.value?(Y(),st("div",zr,[Ke(i.$slots,"default")])):Ct("",!0)],64)):Ct("",!0)]),_:3}),Q("div",Tr,[Q("span",Br," 回合 "+at(C.state.round)+" 等级 "+at((l=W(u))==null?void 0:l.level)+" 生命 "+at((h=W(u))==null?void 0:h.life)+" 价值 "+at((b=W(u))==null?void 0:b.present.map(e=>{var O;return((O=e.card)==null?void 0:O.value)??0}).reduce((e,O)=>e+O,0)),1),Q("span",Or," 升级 "+at((m=W(u))==null?void 0:m.upgrade_cost)+" 晶矿 "+at((p=W(u))==null?void 0:p.mineral)+" / "+at((n=W(u))==null?void 0:n.mineral_max)+" 瓦斯 "+at((f=W(u))==null?void 0:f.gas)+" / "+at((r=W(u))==null?void 0:r.gas_max),1),Q("div",Rr,[Q("div",null,[(Y(),st(ft,null,yt(3,e=>M(me,{class:"mt-1",key:`Hand${e-1}`,state:C.state,client:C.client,place:e-1},null,8,["state","client","place"])),64))]),Q("div",Kr,[(Y(),st(ft,null,yt(3,e=>M(me,{class:"mt-1",key:`Hand${e+2}`,state:C.state,client:C.client,place:e+2},null,8,["state","client","place"])),64))])])]),Q("div",Dr,[Q("div",Wr,[Q("div",Pr,[(Y(!0),st(ft,null,yt(((c=W(u))==null?void 0:c.store.slice(0,3))||[],(e,O)=>(Y(),At(pe,{class:"ml-2",key:`Store${O}`,state:C.state,client:C.client,place:O},null,8,["state","client","place"]))),128))]),(((o=W(u))==null?void 0:o.store.length)??0)>3?(Y(),st("div",Zr,[(Y(!0),st(ft,null,yt(((g=W(u))==null?void 0:g.store.slice(3))||[],(e,O)=>(Y(),At(pe,{class:"ml-2",key:`Store${O+3}`,state:C.state,client:C.client,place:O+3},null,8,["state","client","place"]))),128))])):Ct("",!0)]),((A=W(u))==null?void 0:A.status)==="discover"&&W(u).discover?(Y(),st("div",Ur,[Q("div",Fr,[(Y(!0),st(ft,null,yt(((v=(k=W(u))==null?void 0:k.discover)==null?void 0:v.item.slice(0,4))||[],(e,O)=>(Y(),At(ve,{class:"ml-2",key:`Discover${O}`,state:C.state,client:C.client,place:O},null,8,["state","client","place"]))),128))]),((T=(S=W(u))==null?void 0:S.discover)==null?void 0:T.item.length)>3||W(u).discover.extra?(Y(),st("div",Lr,[(Y(!0),st(ft,null,yt(((R=(Z=W(u))==null?void 0:Z.discover)==null?void 0:R.item.slice(4))||[],(e,O)=>(Y(),At(ve,{class:"ml-2",key:`Discover${O+3}`,state:C.state,client:C.client,place:O+3},null,8,["state","client","place"]))),128)),(X=(F=W(u))==null?void 0:F.discover)!=null&&X.extra?(Y(),At(mt,{key:0,class:"ml-2",onClick:a[2]||(a[2]=e=>C.client.autoPost({msg:"$choice",category:"discover",place:-1}))},{default:it(()=>{var e,O;return[pt(at((O=(e=W(u))==null?void 0:e.discover)==null?void 0:O.extra),1)]}),_:1})):Ct("",!0)])):Ct("",!0)])):Ct("",!0),Q("div",Nr,[(Y(!0),st(ft,null,yt(((w=W(u))==null?void 0:w.action)||[],(e,O)=>{var nt;return Y(),At(mt,{class:"ml-2",variant:"elevated",key:`GA-${O}`,disabled:!e.enable,onClick:N=>C.client.post(e.msg),color:e.msg.msg==="$ability"&&((nt=W(u))!=null&&nt.role.enhance)?"red":e.msg.msg==="$refresh"&&e.special?"green":""},{default:it(()=>[pt(at(W(I)[e.action]),1)]),_:2},1032,["disabled","onClick","color"])}),128)),(D=W(u))!=null&&D.role.record&&W(u).role.record.length>0?(Y(),At(mt,{key:0,class:"ml-2",variant:"elevated",onClick:a[3]||(a[3]=e=>s.value=!0)},{default:it(()=>[pt("信息")]),_:1})):Ct("",!0)])])]),Q("div",Gr,[(Y(),st(ft,null,yt(7,e=>M(_r,{class:"mt-1",key:`Present${e-1}`,state:C.state,client:C.client,place:e-1},null,8,["state","client","place"])),64))])])}}});var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jt(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xt={},Vr={get exports(){return Xt},set exports(C){Xt=C}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(C,q){(function(u){C.exports=u()})(function(){return function u(I,y,s){function i(h,b){if(!y[h]){if(!I[h]){var m=typeof Jt=="function"&&Jt;if(!b&&m)return m(h,!0);if(a)return a(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var n=y[h]={exports:{}};I[h][0].call(n.exports,function(f){var r=I[h][1][f];return i(r||f)},n,n.exports,u,I,y,s)}return y[h].exports}for(var a=typeof Jt=="function"&&Jt,l=0;l<s.length;l++)i(s[l]);return i}({1:[function(u,I,y){var s=u("./utils"),i=u("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(l){for(var h,b,m,p,n,f,r,c=[],o=0,g=l.length,A=g,k=s.getTypeOf(l)!=="string";o<l.length;)A=g-o,m=k?(h=l[o++],b=o<g?l[o++]:0,o<g?l[o++]:0):(h=l.charCodeAt(o++),b=o<g?l.charCodeAt(o++):0,o<g?l.charCodeAt(o++):0),p=h>>2,n=(3&h)<<4|b>>4,f=1<A?(15&b)<<2|m>>6:64,r=2<A?63&m:64,c.push(a.charAt(p)+a.charAt(n)+a.charAt(f)+a.charAt(r));return c.join("")},y.decode=function(l){var h,b,m,p,n,f,r=0,c=0,o="data:";if(l.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var g,A=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&A--,l.charAt(l.length-2)===a.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=i.uint8array?new Uint8Array(0|A):new Array(0|A);r<l.length;)h=a.indexOf(l.charAt(r++))<<2|(p=a.indexOf(l.charAt(r++)))>>4,b=(15&p)<<4|(n=a.indexOf(l.charAt(r++)))>>2,m=(3&n)<<6|(f=a.indexOf(l.charAt(r++))),g[c++]=h,n!==64&&(g[c++]=b),f!==64&&(g[c++]=m);return g}},{"./support":30,"./utils":32}],2:[function(u,I,y){var s=u("./external"),i=u("./stream/DataWorker"),a=u("./stream/Crc32Probe"),l=u("./stream/DataLengthProbe");function h(b,m,p,n,f){this.compressedSize=b,this.uncompressedSize=m,this.crc32=p,this.compression=n,this.compressedContent=f}h.prototype={getContentWorker:function(){var b=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return b.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(b,m,p){return b.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},I.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,I,y){var s=u("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},y.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,I,y){var s=u("./utils"),i=function(){for(var a,l=[],h=0;h<256;h++){a=h;for(var b=0;b<8;b++)a=1&a?3988292384^a>>>1:a>>>1;l[h]=a}return l}();I.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(h,b,m,p){var n=i,f=p+m;h^=-1;for(var r=p;r<f;r++)h=h>>>8^n[255&(h^b[r])];return-1^h}(0|l,a,a.length,0):function(h,b,m,p){var n=i,f=p+m;h^=-1;for(var r=p;r<f;r++)h=h>>>8^n[255&(h^b.charCodeAt(r))];return-1^h}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(u,I,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(u,I,y){var s=null;s=typeof Promise<"u"?Promise:u("lie"),I.exports={Promise:s}},{lie:37}],7:[function(u,I,y){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=u("pako"),a=u("./utils"),l=u("./stream/GenericWorker"),h=s?"uint8array":"array";function b(m,p){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=p,this.meta={}}y.magic="\b\0",a.inherits(b,l),b.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(h,m.data),!1)},b.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(p){m.push({data:p,meta:m.meta})}},y.compressWorker=function(m){return new b("Deflate",m)},y.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,I,y){function s(n,f){var r,c="";for(r=0;r<f;r++)c+=String.fromCharCode(255&n),n>>>=8;return c}function i(n,f,r,c,o,g){var A,k,v=n.file,S=n.compression,T=g!==h.utf8encode,Z=a.transformTo("string",g(v.name)),R=a.transformTo("string",h.utf8encode(v.name)),F=v.comment,X=a.transformTo("string",g(F)),w=a.transformTo("string",h.utf8encode(F)),D=R.length!==v.name.length,e=w.length!==F.length,O="",nt="",N="",ot=v.dir,G=v.date,rt={crc32:0,compressedSize:0,uncompressedSize:0};f&&!r||(rt.crc32=n.crc32,rt.compressedSize=n.compressedSize,rt.uncompressedSize=n.uncompressedSize);var B=0;f&&(B|=8),T||!D&&!e||(B|=2048);var E=0,tt=0;ot&&(E|=16),o==="UNIX"?(tt=798,E|=function($,vt){var kt=$;return $||(kt=vt?16893:33204),(65535&kt)<<16}(v.unixPermissions,ot)):(tt=20,E|=function($){return 63&($||0)}(v.dosPermissions)),A=G.getUTCHours(),A<<=6,A|=G.getUTCMinutes(),A<<=5,A|=G.getUTCSeconds()/2,k=G.getUTCFullYear()-1980,k<<=4,k|=G.getUTCMonth()+1,k<<=5,k|=G.getUTCDate(),D&&(nt=s(1,1)+s(b(Z),4)+R,O+="up"+s(nt.length,2)+nt),e&&(N=s(1,1)+s(b(X),4)+w,O+="uc"+s(N.length,2)+N);var J="";return J+=`
\0`,J+=s(B,2),J+=S.magic,J+=s(A,2),J+=s(k,2),J+=s(rt.crc32,4),J+=s(rt.compressedSize,4),J+=s(rt.uncompressedSize,4),J+=s(Z.length,2),J+=s(O.length,2),{fileRecord:m.LOCAL_FILE_HEADER+J+Z+O,dirRecord:m.CENTRAL_FILE_HEADER+s(tt,2)+J+s(X.length,2)+"\0\0\0\0"+s(E,4)+s(c,4)+Z+O+X}}var a=u("../utils"),l=u("../stream/GenericWorker"),h=u("../utf8"),b=u("../crc32"),m=u("../signature");function p(n,f,r,c){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=r,this.encodeFileName=c,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(n){var f=n.meta.percent||0,r=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,l.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:r?(f+100*(r-c-1))/r:100}}))},p.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var f=this.streamFiles&&!n.file.dir;if(f){var r=i(n,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(n){this.accumulate=!1;var f=this.streamFiles&&!n.file.dir,r=i(n,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),f)this.push({data:function(c){return m.DATA_DESCRIPTOR+s(c.crc32,4)+s(c.compressedSize,4)+s(c.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var n=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var r=this.bytesWritten-n,c=function(o,g,A,k,v){var S=a.transformTo("string",v(k));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(o,2)+s(o,2)+s(g,4)+s(A,4)+s(S.length,2)+S}(this.dirRecords.length,r,n,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(n){this._sources.push(n);var f=this;return n.on("data",function(r){f.processChunk(r)}),n.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),n.on("error",function(r){f.error(r)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(n){var f=this._sources;if(!l.prototype.error.call(this,n))return!1;for(var r=0;r<f.length;r++)try{f[r].error(n)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var n=this._sources,f=0;f<n.length;f++)n[f].lock()},I.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,I,y){var s=u("../compressions"),i=u("./ZipFileWorker");y.generateWorker=function(a,l,h){var b=new i(l.streamFiles,h,l.platform,l.encodeFileName),m=0;try{a.forEach(function(p,n){m++;var f=function(g,A){var k=g||A,v=s[k];if(!v)throw new Error(k+" is not a valid compression method !");return v}(n.options.compression,l.compression),r=n.options.compressionOptions||l.compressionOptions||{},c=n.dir,o=n.date;n._compressWorker(f,r).withStreamInfo("file",{name:p,dir:c,date:o,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(b)}),b.entriesCount=m}catch(p){b.error(p)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,I,y){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var a in this)typeof this[a]!="function"&&(i[a]=this[a]);return i}}(s.prototype=u("./object")).loadAsync=u("./load"),s.support=u("./support"),s.defaults=u("./defaults"),s.version="3.10.1",s.loadAsync=function(i,a){return new s().loadAsync(i,a)},s.external=u("./external"),I.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,I,y){var s=u("./utils"),i=u("./external"),a=u("./utf8"),l=u("./zipEntries"),h=u("./stream/Crc32Probe"),b=u("./nodejsUtils");function m(p){return new i.Promise(function(n,f){var r=p.decompressed.getContentWorker().pipe(new h);r.on("error",function(c){f(c)}).on("end",function(){r.streamInfo.crc32!==p.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}I.exports=function(p,n){var f=this;return n=s.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),b.isNode&&b.isStream(p)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,n.optimizedBinaryString,n.base64).then(function(r){var c=new l(n);return c.load(r),c}).then(function(r){var c=[i.Promise.resolve(r)],o=r.files;if(n.checkCRC32)for(var g=0;g<o.length;g++)c.push(m(o[g]));return i.Promise.all(c)}).then(function(r){for(var c=r.shift(),o=c.files,g=0;g<o.length;g++){var A=o[g],k=A.fileNameStr,v=s.resolve(A.fileNameStr);f.file(v,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:n.createFolders}),A.dir||(f.file(v).unsafeOriginalName=k)}return c.zipComment.length&&(f.comment=c.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,I,y){var s=u("../utils"),i=u("../stream/GenericWorker");function a(l,h){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(a,i),a.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(b){h.push({data:b,meta:{percent:0}})}).on("error",function(b){h.isPaused?this.generatedError=b:h.error(b)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,I,y){var s=u("readable-stream").Readable;function i(a,l,h){s.call(this,l),this._helper=a;var b=this;a.on("data",function(m,p){b.push(m)||b._helper.pause(),h&&h(p)}).on("error",function(m){b.emit("error",m)}).on("end",function(){b.push(null)})}u("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},I.exports=i},{"../utils":32,"readable-stream":16}],14:[function(u,I,y){I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,i)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var i=new Buffer(s);return i.fill(0),i},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(u,I,y){function s(v,S,T){var Z,R=a.getTypeOf(S),F=a.extend(T||{},b);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(v=o(v)),F.createFolders&&(Z=c(v))&&g.call(this,Z,!0);var X=R==="string"&&F.binary===!1&&F.base64===!1;T&&T.binary!==void 0||(F.binary=!X),(S instanceof m&&S.uncompressedSize===0||F.dir||!S||S.length===0)&&(F.base64=!1,F.binary=!0,S="",F.compression="STORE",R="string");var w=null;w=S instanceof m||S instanceof l?S:f.isNode&&f.isStream(S)?new r(v,S):a.prepareContent(v,S,F.binary,F.optimizedBinaryString,F.base64);var D=new p(v,w,F);this.files[v]=D}var i=u("./utf8"),a=u("./utils"),l=u("./stream/GenericWorker"),h=u("./stream/StreamHelper"),b=u("./defaults"),m=u("./compressedObject"),p=u("./zipObject"),n=u("./generate"),f=u("./nodejsUtils"),r=u("./nodejs/NodejsStreamInputAdapter"),c=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var S=v.lastIndexOf("/");return 0<S?v.substring(0,S):""},o=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},g=function(v,S){return S=S!==void 0?S:b.createFolders,v=o(v),this.files[v]||s.call(this,v,null,{dir:!0,createFolders:S}),this.files[v]};function A(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var S,T,Z;for(S in this.files)Z=this.files[S],(T=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&v(T,Z)},filter:function(v){var S=[];return this.forEach(function(T,Z){v(T,Z)&&S.push(Z)}),S},file:function(v,S,T){if(arguments.length!==1)return v=this.root+v,s.call(this,v,S,T),this;if(A(v)){var Z=v;return this.filter(function(F,X){return!X.dir&&Z.test(F)})}var R=this.files[this.root+v];return R&&!R.dir?R:null},folder:function(v){if(!v)return this;if(A(v))return this.filter(function(R,F){return F.dir&&v.test(R)});var S=this.root+v,T=g.call(this,S),Z=this.clone();return Z.root=T.name,Z},remove:function(v){v=this.root+v;var S=this.files[v];if(S||(v.slice(-1)!=="/"&&(v+="/"),S=this.files[v]),S&&!S.dir)delete this.files[v];else for(var T=this.filter(function(R,F){return F.name.slice(0,v.length)===v}),Z=0;Z<T.length;Z++)delete this.files[T[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var S,T={};try{if((T=a.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var Z=T.comment||this.comment||"";S=n.generateWorker(this,T,Z)}catch(R){(S=new l("error")).error(R)}return new h(S,T.type||"string",T.mimeType)},generateAsync:function(v,S){return this.generateInternalStream(v).accumulate(S)},generateNodeStream:function(v,S){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(S)}};I.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,I,y){I.exports=u("stream")},{stream:void 0}],17:[function(u,I,y){var s=u("./DataReader");function i(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}u("../utils").inherits(i,s),i.prototype.byteAt=function(a){return this.data[this.zero+a]},i.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),h=a.charCodeAt(1),b=a.charCodeAt(2),m=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===h&&this.data[p+2]===b&&this.data[p+3]===m)return p-this.zero;return-1},i.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),h=a.charCodeAt(1),b=a.charCodeAt(2),m=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&h===p[1]&&b===p[2]&&m===p[3]},i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},I.exports=i},{"../utils":32,"./DataReader":18}],18:[function(u,I,y){var s=u("../utils");function i(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,h=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=a,h},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},I.exports=i},{"../utils":32}],19:[function(u,I,y){var s=u("./Uint8ArrayReader");function i(a){s.call(this,a)}u("../utils").inherits(i,s),i.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},I.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,I,y){var s=u("./DataReader");function i(a){s.call(this,a)}u("../utils").inherits(i,s),i.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},i.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},i.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},i.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},I.exports=i},{"../utils":32,"./DataReader":18}],21:[function(u,I,y){var s=u("./ArrayReader");function i(a){s.call(this,a)}u("../utils").inherits(i,s),i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},I.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(u,I,y){var s=u("../utils"),i=u("../support"),a=u("./ArrayReader"),l=u("./StringReader"),h=u("./NodeBufferReader"),b=u("./Uint8ArrayReader");I.exports=function(m){var p=s.getTypeOf(m);return s.checkSupport(p),p!=="string"||i.uint8array?p==="nodebuffer"?new h(m):i.uint8array?new b(s.transformTo("uint8array",m)):new a(s.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,I,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,I,y){var s=u("./GenericWorker"),i=u("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},I.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(u,I,y){var s=u("./GenericWorker"),i=u("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},I.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,I,y){var s=u("../utils"),i=u("./GenericWorker");function a(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,i),a.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}i.prototype.processChunk.call(this,l)},I.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(u,I,y){var s=u("../utils"),i=u("./GenericWorker");function a(l){i.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(b){h.dataIsReady=!0,h.data=b,h.max=b&&b.length||0,h.type=s.getTypeOf(b),h.isPaused||h._tickAndRepeat()},function(b){h.error(b)})}s.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(u,I,y){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,a){return this._listeners[i].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,a){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,a)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var a=this;return i.on("data",function(l){a.processChunk(l)}),i.on("end",function(){a.end()}),i.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,a){return this.extraStreamInfo[i]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},I.exports=s},{}],29:[function(u,I,y){var s=u("../utils"),i=u("./ConvertWorker"),a=u("./GenericWorker"),l=u("../base64"),h=u("../support"),b=u("../external"),m=null;if(h.nodestream)try{m=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(f,r){return new b.Promise(function(c,o){var g=[],A=f._internalType,k=f._outputType,v=f._mimeType;f.on("data",function(S,T){g.push(S),r&&r(T)}).on("error",function(S){g=[],o(S)}).on("end",function(){try{var S=function(T,Z,R){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",Z),R);case"base64":return l.encode(Z);default:return s.transformTo(T,Z)}}(k,function(T,Z){var R,F=0,X=null,w=0;for(R=0;R<Z.length;R++)w+=Z[R].length;switch(T){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(X=new Uint8Array(w),R=0;R<Z.length;R++)X.set(Z[R],F),F+=Z[R].length;return X;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+T+"'")}}(A,g),v);c(S)}catch(T){o(T)}g=[]}).resume()})}function n(f,r,c){var o=r;switch(r){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=r,this._mimeType=c,s.checkSupport(o),this._worker=f.pipe(new i(o)),f.lock()}catch(g){this._worker=new a("error"),this._worker.error(g)}}n.prototype={accumulate:function(f){return p(this,f)},on:function(f,r){var c=this;return f==="data"?this._worker.on(f,function(o){r.call(c,o.data,o.meta)}):this._worker.on(f,function(){s.delay(r,arguments,c)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},f)}},I.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,I,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=typeof Buffer<"u",y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var s=new ArrayBuffer(0);try{y.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),y.blob=i.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!u("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(u,I,y){for(var s=u("./utils"),i=u("./support"),a=u("./nodejsUtils"),l=u("./stream/GenericWorker"),h=new Array(256),b=0;b<256;b++)h[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;h[254]=h[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}y.utf8encode=function(n){return i.nodebuffer?a.newBufferFrom(n,"utf-8"):function(f){var r,c,o,g,A,k=f.length,v=0;for(g=0;g<k;g++)(64512&(c=f.charCodeAt(g)))==55296&&g+1<k&&(64512&(o=f.charCodeAt(g+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),g++),v+=c<128?1:c<2048?2:c<65536?3:4;for(r=i.uint8array?new Uint8Array(v):new Array(v),g=A=0;A<v;g++)(64512&(c=f.charCodeAt(g)))==55296&&g+1<k&&(64512&(o=f.charCodeAt(g+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),g++),c<128?r[A++]=c:(c<2048?r[A++]=192|c>>>6:(c<65536?r[A++]=224|c>>>12:(r[A++]=240|c>>>18,r[A++]=128|c>>>12&63),r[A++]=128|c>>>6&63),r[A++]=128|63&c);return r}(n)},y.utf8decode=function(n){return i.nodebuffer?s.transformTo("nodebuffer",n).toString("utf-8"):function(f){var r,c,o,g,A=f.length,k=new Array(2*A);for(r=c=0;r<A;)if((o=f[r++])<128)k[c++]=o;else if(4<(g=h[o]))k[c++]=65533,r+=g-1;else{for(o&=g===2?31:g===3?15:7;1<g&&r<A;)o=o<<6|63&f[r++],g--;1<g?k[c++]=65533:o<65536?k[c++]=o:(o-=65536,k[c++]=55296|o>>10&1023,k[c++]=56320|1023&o)}return k.length!==c&&(k.subarray?k=k.subarray(0,c):k.length=c),s.applyFromCharCode(k)}(n=s.transformTo(i.uint8array?"uint8array":"array",n))},s.inherits(m,l),m.prototype.processChunk=function(n){var f=s.transformTo(i.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var r=f;(f=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),f.set(r,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var c=function(g,A){var k;for((A=A||g.length)>g.length&&(A=g.length),k=A-1;0<=k&&(192&g[k])==128;)k--;return k<0||k===0?A:k+h[g[k]]>A?k:A}(f),o=f;c!==f.length&&(i.uint8array?(o=f.subarray(0,c),this.leftOver=f.subarray(c,f.length)):(o=f.slice(0,c),this.leftOver=f.slice(c,f.length))),this.push({data:y.utf8decode(o),meta:n.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=m,s.inherits(p,l),p.prototype.processChunk=function(n){this.push({data:y.utf8encode(n.data),meta:n.meta})},y.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,I,y){var s=u("./support"),i=u("./base64"),a=u("./nodejsUtils"),l=u("./external");function h(r){return r}function b(r,c){for(var o=0;o<r.length;++o)c[o]=255&r.charCodeAt(o);return c}u("setimmediate"),y.newBlob=function(r,c){y.checkSupport("blob");try{return new Blob([r],{type:c})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(r),o.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(r,c,o){var g=[],A=0,k=r.length;if(k<=o)return String.fromCharCode.apply(null,r);for(;A<k;)c==="array"||c==="nodebuffer"?g.push(String.fromCharCode.apply(null,r.slice(A,Math.min(A+o,k)))):g.push(String.fromCharCode.apply(null,r.subarray(A,Math.min(A+o,k)))),A+=o;return g.join("")},stringifyByChar:function(r){for(var c="",o=0;o<r.length;o++)c+=String.fromCharCode(r[o]);return c},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(r){var c=65536,o=y.getTypeOf(r),g=!0;if(o==="uint8array"?g=m.applyCanBeUsed.uint8array:o==="nodebuffer"&&(g=m.applyCanBeUsed.nodebuffer),g)for(;1<c;)try{return m.stringifyByChunk(r,o,c)}catch{c=Math.floor(c/2)}return m.stringifyByChar(r)}function n(r,c){for(var o=0;o<r.length;o++)c[o]=r[o];return c}y.applyFromCharCode=p;var f={};f.string={string:h,array:function(r){return b(r,new Array(r.length))},arraybuffer:function(r){return f.string.uint8array(r).buffer},uint8array:function(r){return b(r,new Uint8Array(r.length))},nodebuffer:function(r){return b(r,a.allocBuffer(r.length))}},f.array={string:p,array:h,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return a.newBufferFrom(r)}},f.arraybuffer={string:function(r){return p(new Uint8Array(r))},array:function(r){return n(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:h,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return a.newBufferFrom(new Uint8Array(r))}},f.uint8array={string:p,array:function(r){return n(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:h,nodebuffer:function(r){return a.newBufferFrom(r)}},f.nodebuffer={string:p,array:function(r){return n(r,new Array(r.length))},arraybuffer:function(r){return f.nodebuffer.uint8array(r).buffer},uint8array:function(r){return n(r,new Uint8Array(r.length))},nodebuffer:h},y.transformTo=function(r,c){if(c=c||"",!r)return c;y.checkSupport(r);var o=y.getTypeOf(c);return f[o][r](c)},y.resolve=function(r){for(var c=r.split("/"),o=[],g=0;g<c.length;g++){var A=c[g];A==="."||A===""&&g!==0&&g!==c.length-1||(A===".."?o.pop():o.push(A))}return o.join("/")},y.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(r)?"nodebuffer":s.uint8array&&r instanceof Uint8Array?"uint8array":s.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(r){if(!s[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(r){var c,o,g="";for(o=0;o<(r||"").length;o++)g+="\\x"+((c=r.charCodeAt(o))<16?"0":"")+c.toString(16).toUpperCase();return g},y.delay=function(r,c,o){setImmediate(function(){r.apply(o||null,c||[])})},y.inherits=function(r,c){function o(){}o.prototype=c.prototype,r.prototype=new o},y.extend=function(){var r,c,o={};for(r=0;r<arguments.length;r++)for(c in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],c)&&o[c]===void 0&&(o[c]=arguments[r][c]);return o},y.prepareContent=function(r,c,o,g,A){return l.Promise.resolve(c).then(function(k){return s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new l.Promise(function(v,S){var T=new FileReader;T.onload=function(Z){v(Z.target.result)},T.onerror=function(Z){S(Z.target.error)},T.readAsArrayBuffer(k)}):k}).then(function(k){var v=y.getTypeOf(k);return v?(v==="arraybuffer"?k=y.transformTo("uint8array",k):v==="string"&&(A?k=i.decode(k):o&&g!==!0&&(k=function(S){return b(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(k))),k):l.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,I,y){var s=u("./reader/readerFor"),i=u("./utils"),a=u("./signature"),l=u("./zipEntry"),h=u("./support");function b(m){this.files=[],this.loadOptions=m}b.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(p)+", expected "+i.pretty(m)+")")}},isSignature:function(m,p){var n=this.reader.index;this.reader.setIndex(m);var f=this.reader.readString(4)===p;return this.reader.setIndex(n),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),p=h.uint8array?"uint8array":"array",n=i.transformTo(p,m);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,p,n,f=this.zip64EndOfCentralSize-44;0<f;)m=this.reader.readInt(2),p=this.reader.readInt(4),n=this.reader.readData(p),this.zip64ExtensibleData[m]={id:m,length:p,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,p;for(m=0;m<this.files.length;m++)p=this.files[m],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var p=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var f=p-n;if(0<f)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,I,y){var s=u("./reader/readerFor"),i=u("./utils"),a=u("./compressedObject"),l=u("./crc32"),h=u("./utf8"),b=u("./compressions"),m=u("./support");function p(n,f){this.options=n,this.loadOptions=f}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var f,r;if(n.skip(22),this.fileNameLength=n.readInt(2),r=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(c){for(var o in b)if(Object.prototype.hasOwnProperty.call(b,o)&&b[o].magic===c)return b[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,f,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var f=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(f),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var f,r,c,o=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<o;)f=n.readInt(2),r=n.readInt(2),c=n.readData(r),this.extraFields[f]={id:f,length:r,value:c};n.setIndex(o)},handleUTF8:function(){var n=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var r=i.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var o=i.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var f=s(n.value);return f.readInt(1)!==1||l(this.fileName)!==f.readInt(4)?null:h.utf8decode(f.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var f=s(n.value);return f.readInt(1)!==1||l(this.fileComment)!==f.readInt(4)?null:h.utf8decode(f.readData(n.length-5))}return null}},I.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,I,y){function s(f,r,c){this.name=f,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=r,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var i=u("./stream/StreamHelper"),a=u("./stream/DataWorker"),l=u("./utf8"),h=u("./compressedObject"),b=u("./stream/GenericWorker");s.prototype={internalStream:function(f){var r=null,c="string";try{if(!f)throw new Error("No output type specified.");var o=(c=f.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),r=this._decompressWorker();var g=!this._dataBinary;g&&!o&&(r=r.pipe(new l.Utf8EncodeWorker)),!g&&o&&(r=r.pipe(new l.Utf8DecodeWorker))}catch(A){(r=new b("error")).error(A)}return new i(r,c,"")},async:function(f,r){return this.internalStream(f).accumulate(r)},nodeStream:function(f,r){return this.internalStream(f||"nodebuffer").toNodejsStream(r)},_compressWorker:function(f,r){if(this._data instanceof h&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(c,f,r)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof b?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<m.length;n++)s.prototype[m[n]]=p;I.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,I,y){(function(s){var i,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var h=0,b=new l(f),m=s.document.createTextNode("");b.observe(m,{characterData:!0}),i=function(){m.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var r=s.document.createElement("script");r.onreadystatechange=function(){f(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},s.document.documentElement.appendChild(r)}:function(){setTimeout(f,0)};else{var p=new s.MessageChannel;p.port1.onmessage=f,i=function(){p.port2.postMessage(0)}}var n=[];function f(){var r,c;a=!0;for(var o=n.length;o;){for(c=n,n=[],r=-1;++r<o;)c[r]();o=n.length}a=!1}I.exports=function(r){n.push(r)!==1||a||i()}}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,I,y){var s=u("immediate");function i(){}var a={},l=["REJECTED"],h=["FULFILLED"],b=["PENDING"];function m(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,o!==i&&r(this,o)}function p(o,g,A){this.promise=o,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function n(o,g,A){s(function(){var k;try{k=g(A)}catch(v){return a.reject(o,v)}k===o?a.reject(o,new TypeError("Cannot resolve promise with itself")):a.resolve(o,k)})}function f(o){var g=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof g=="function")return function(){g.apply(o,arguments)}}function r(o,g){var A=!1;function k(T){A||(A=!0,a.reject(o,T))}function v(T){A||(A=!0,a.resolve(o,T))}var S=c(function(){g(v,k)});S.status==="error"&&k(S.value)}function c(o,g){var A={};try{A.value=o(g),A.status="success"}catch(k){A.status="error",A.value=k}return A}(I.exports=m).prototype.finally=function(o){if(typeof o!="function")return this;var g=this.constructor;return this.then(function(A){return g.resolve(o()).then(function(){return A})},function(A){return g.resolve(o()).then(function(){throw A})})},m.prototype.catch=function(o){return this.then(null,o)},m.prototype.then=function(o,g){if(typeof o!="function"&&this.state===h||typeof g!="function"&&this.state===l)return this;var A=new this.constructor(i);return this.state!==b?n(A,this.state===h?o:g,this.outcome):this.queue.push(new p(A,o,g)),A},p.prototype.callFulfilled=function(o){a.resolve(this.promise,o)},p.prototype.otherCallFulfilled=function(o){n(this.promise,this.onFulfilled,o)},p.prototype.callRejected=function(o){a.reject(this.promise,o)},p.prototype.otherCallRejected=function(o){n(this.promise,this.onRejected,o)},a.resolve=function(o,g){var A=c(f,g);if(A.status==="error")return a.reject(o,A.value);var k=A.value;if(k)r(o,k);else{o.state=h,o.outcome=g;for(var v=-1,S=o.queue.length;++v<S;)o.queue[v].callFulfilled(g)}return o},a.reject=function(o,g){o.state=l,o.outcome=g;for(var A=-1,k=o.queue.length;++A<k;)o.queue[A].callRejected(g);return o},m.resolve=function(o){return o instanceof this?o:a.resolve(new this(i),o)},m.reject=function(o){var g=new this(i);return a.reject(g,o)},m.all=function(o){var g=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=o.length,k=!1;if(!A)return this.resolve([]);for(var v=new Array(A),S=0,T=-1,Z=new this(i);++T<A;)R(o[T],T);return Z;function R(F,X){g.resolve(F).then(function(w){v[X]=w,++S!==A||k||(k=!0,a.resolve(Z,v))},function(w){k||(k=!0,a.reject(Z,w))})}},m.race=function(o){var g=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=o.length,k=!1;if(!A)return this.resolve([]);for(var v=-1,S=new this(i);++v<A;)T=o[v],g.resolve(T).then(function(Z){k||(k=!0,a.resolve(S,Z))},function(Z){k||(k=!0,a.reject(S,Z))});var T;return S}},{immediate:36}],38:[function(u,I,y){var s={};(0,u("./lib/utils/common").assign)(s,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),I.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,I,y){var s=u("./zlib/deflate"),i=u("./utils/common"),a=u("./utils/strings"),l=u("./zlib/messages"),h=u("./zlib/zstream"),b=Object.prototype.toString,m=0,p=-1,n=0,f=8;function r(o){if(!(this instanceof r))return new r(o);this.options=i.assign({level:p,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},o||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(A!==m)throw new Error(l[A]);if(g.header&&s.deflateSetHeader(this.strm,g.header),g.dictionary){var k;if(k=typeof g.dictionary=="string"?a.string2buf(g.dictionary):b.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(A=s.deflateSetDictionary(this.strm,k))!==m)throw new Error(l[A]);this._dict_set=!0}}function c(o,g){var A=new r(g);if(A.push(o,!0),A.err)throw A.msg||l[A.err];return A.result}r.prototype.push=function(o,g){var A,k,v=this.strm,S=this.options.chunkSize;if(this.ended)return!1;k=g===~~g?g:g===!0?4:0,typeof o=="string"?v.input=a.string2buf(o):b.call(o)==="[object ArrayBuffer]"?v.input=new Uint8Array(o):v.input=o,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new i.Buf8(S),v.next_out=0,v.avail_out=S),(A=s.deflate(v,k))!==1&&A!==m)return this.onEnd(A),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(i.shrinkBuf(v.output,v.next_out))):this.onData(i.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&A!==1);return k===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===m):k!==2||(this.onEnd(m),!(v.avail_out=0))},r.prototype.onData=function(o){this.chunks.push(o)},r.prototype.onEnd=function(o){o===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},y.Deflate=r,y.deflate=c,y.deflateRaw=function(o,g){return(g=g||{}).raw=!0,c(o,g)},y.gzip=function(o,g){return(g=g||{}).gzip=!0,c(o,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,I,y){var s=u("./zlib/inflate"),i=u("./utils/common"),a=u("./utils/strings"),l=u("./zlib/constants"),h=u("./zlib/messages"),b=u("./zlib/zstream"),m=u("./zlib/gzheader"),p=Object.prototype.toString;function n(r){if(!(this instanceof n))return new n(r);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},r||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||r&&r.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var o=s.inflateInit2(this.strm,c.windowBits);if(o!==l.Z_OK)throw new Error(h[o]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function f(r,c){var o=new n(c);if(o.push(r,!0),o.err)throw o.msg||h[o.err];return o.result}n.prototype.push=function(r,c){var o,g,A,k,v,S,T=this.strm,Z=this.options.chunkSize,R=this.options.dictionary,F=!1;if(this.ended)return!1;g=c===~~c?c:c===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof r=="string"?T.input=a.binstring2buf(r):p.call(r)==="[object ArrayBuffer]"?T.input=new Uint8Array(r):T.input=r,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new i.Buf8(Z),T.next_out=0,T.avail_out=Z),(o=s.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&R&&(S=typeof R=="string"?a.string2buf(R):p.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,o=s.inflateSetDictionary(this.strm,S)),o===l.Z_BUF_ERROR&&F===!0&&(o=l.Z_OK,F=!1),o!==l.Z_STREAM_END&&o!==l.Z_OK)return this.onEnd(o),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&o!==l.Z_STREAM_END&&(T.avail_in!==0||g!==l.Z_FINISH&&g!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=a.utf8border(T.output,T.next_out),k=T.next_out-A,v=a.buf2string(T.output,A),T.next_out=k,T.avail_out=Z-k,k&&i.arraySet(T.output,T.output,A,k,0),this.onData(v)):this.onData(i.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(F=!0)}while((0<T.avail_in||T.avail_out===0)&&o!==l.Z_STREAM_END);return o===l.Z_STREAM_END&&(g=l.Z_FINISH),g===l.Z_FINISH?(o=s.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===l.Z_OK):g!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},n.prototype.onData=function(r){this.chunks.push(r)},n.prototype.onEnd=function(r){r===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},y.Inflate=n,y.inflate=f,y.inflateRaw=function(r,c){return(c=c||{}).raw=!0,f(r,c)},y.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,I,y){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var b=h.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var m in b)b.hasOwnProperty(m)&&(l[m]=b[m])}}return l},y.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var i={arraySet:function(l,h,b,m,p){if(h.subarray&&l.subarray)l.set(h.subarray(b,b+m),p);else for(var n=0;n<m;n++)l[p+n]=h[b+n]},flattenChunks:function(l){var h,b,m,p,n,f;for(h=m=0,b=l.length;h<b;h++)m+=l[h].length;for(f=new Uint8Array(m),h=p=0,b=l.length;h<b;h++)n=l[h],f.set(n,p),p+=n.length;return f}},a={arraySet:function(l,h,b,m,p){for(var n=0;n<m;n++)l[p+n]=h[b+n]},flattenChunks:function(l){return[].concat.apply([],l)}};y.setTyped=function(l){l?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,i)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,a))},y.setTyped(s)},{}],42:[function(u,I,y){var s=u("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function b(m,p){if(p<65537&&(m.subarray&&a||!m.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(m,p));for(var n="",f=0;f<p;f++)n+=String.fromCharCode(m[f]);return n}l[254]=l[254]=1,y.string2buf=function(m){var p,n,f,r,c,o=m.length,g=0;for(r=0;r<o;r++)(64512&(n=m.charCodeAt(r)))==55296&&r+1<o&&(64512&(f=m.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(f-56320),r++),g+=n<128?1:n<2048?2:n<65536?3:4;for(p=new s.Buf8(g),r=c=0;c<g;r++)(64512&(n=m.charCodeAt(r)))==55296&&r+1<o&&(64512&(f=m.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(f-56320),r++),n<128?p[c++]=n:(n<2048?p[c++]=192|n>>>6:(n<65536?p[c++]=224|n>>>12:(p[c++]=240|n>>>18,p[c++]=128|n>>>12&63),p[c++]=128|n>>>6&63),p[c++]=128|63&n);return p},y.buf2binstring=function(m){return b(m,m.length)},y.binstring2buf=function(m){for(var p=new s.Buf8(m.length),n=0,f=p.length;n<f;n++)p[n]=m.charCodeAt(n);return p},y.buf2string=function(m,p){var n,f,r,c,o=p||m.length,g=new Array(2*o);for(n=f=0;n<o;)if((r=m[n++])<128)g[f++]=r;else if(4<(c=l[r]))g[f++]=65533,n+=c-1;else{for(r&=c===2?31:c===3?15:7;1<c&&n<o;)r=r<<6|63&m[n++],c--;1<c?g[f++]=65533:r<65536?g[f++]=r:(r-=65536,g[f++]=55296|r>>10&1023,g[f++]=56320|1023&r)}return b(g,f)},y.utf8border=function(m,p){var n;for((p=p||m.length)>m.length&&(p=m.length),n=p-1;0<=n&&(192&m[n])==128;)n--;return n<0||n===0?p:n+l[m[n]]>p?n:p}},{"./common":41}],43:[function(u,I,y){I.exports=function(s,i,a,l){for(var h=65535&s|0,b=s>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;b=b+(h=h+i[l++]|0)|0,--m;);h%=65521,b%=65521}return h|b<<16|0}},{}],44:[function(u,I,y){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,I,y){var s=function(){for(var i,a=[],l=0;l<256;l++){i=l;for(var h=0;h<8;h++)i=1&i?3988292384^i>>>1:i>>>1;a[l]=i}return a}();I.exports=function(i,a,l,h){var b=s,m=h+l;i^=-1;for(var p=h;p<m;p++)i=i>>>8^b[255&(i^a[p])];return-1^i}},{}],46:[function(u,I,y){var s,i=u("../utils/common"),a=u("./trees"),l=u("./adler32"),h=u("./crc32"),b=u("./messages"),m=0,p=4,n=0,f=-2,r=-1,c=4,o=2,g=8,A=9,k=286,v=30,S=19,T=2*k+1,Z=15,R=3,F=258,X=F+R+1,w=42,D=113,e=1,O=2,nt=3,N=4;function ot(t,P){return t.msg=b[P],P}function G(t){return(t<<1)-(4<t?9:0)}function rt(t){for(var P=t.length;0<=--P;)t[P]=0}function B(t){var P=t.state,K=P.pending;K>t.avail_out&&(K=t.avail_out),K!==0&&(i.arraySet(t.output,P.pending_buf,P.pending_out,K,t.next_out),t.next_out+=K,P.pending_out+=K,t.total_out+=K,t.avail_out-=K,P.pending-=K,P.pending===0&&(P.pending_out=0))}function E(t,P){a._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,B(t.strm)}function tt(t,P){t.pending_buf[t.pending++]=P}function J(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function $(t,P){var K,_,d=t.max_chain_length,x=t.strstart,U=t.prev_length,L=t.nice_match,z=t.strstart>t.w_size-X?t.strstart-(t.w_size-X):0,j=t.window,H=t.w_mask,V=t.prev,et=t.strstart+F,ht=j[x+U-1],ut=j[x+U];t.prev_length>=t.good_match&&(d>>=2),L>t.lookahead&&(L=t.lookahead);do if(j[(K=P)+U]===ut&&j[K+U-1]===ht&&j[K]===j[x]&&j[++K]===j[x+1]){x+=2,K++;do;while(j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&j[++x]===j[++K]&&x<et);if(_=F-(et-x),x=et-F,U<_){if(t.match_start=P,L<=(U=_))break;ht=j[x+U-1],ut=j[x+U]}}while((P=V[P&H])>z&&--d!=0);return U<=t.lookahead?U:t.lookahead}function vt(t){var P,K,_,d,x,U,L,z,j,H,V=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=V+(V-X)){for(i.arraySet(t.window,t.window,V,V,0),t.match_start-=V,t.strstart-=V,t.block_start-=V,P=K=t.hash_size;_=t.head[--P],t.head[P]=V<=_?_-V:0,--K;);for(P=K=V;_=t.prev[--P],t.prev[P]=V<=_?_-V:0,--K;);d+=V}if(t.strm.avail_in===0)break;if(U=t.strm,L=t.window,z=t.strstart+t.lookahead,j=d,H=void 0,H=U.avail_in,j<H&&(H=j),K=H===0?0:(U.avail_in-=H,i.arraySet(L,U.input,U.next_in,H,z),U.state.wrap===1?U.adler=l(U.adler,L,H,z):U.state.wrap===2&&(U.adler=h(U.adler,L,H,z)),U.next_in+=H,U.total_in+=H,H),t.lookahead+=K,t.lookahead+t.insert>=R)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+R-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<R)););}while(t.lookahead<X&&t.strm.avail_in!==0)}function kt(t,P){for(var K,_;;){if(t.lookahead<X){if(vt(t),t.lookahead<X&&P===m)return e;if(t.lookahead===0)break}if(K=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,K=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),K!==0&&t.strstart-K<=t.w_size-X&&(t.match_length=$(t,K)),t.match_length>=R)if(_=a._tr_tally(t,t.strstart-t.match_start,t.match_length-R),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=R){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,K=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else _=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(_&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<R-1?t.strstart:R-1,P===p?(E(t,!0),t.strm.avail_out===0?nt:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:O}function lt(t,P){for(var K,_,d;;){if(t.lookahead<X){if(vt(t),t.lookahead<X&&P===m)return e;if(t.lookahead===0)break}if(K=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,K=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=R-1,K!==0&&t.prev_length<t.max_lazy_match&&t.strstart-K<=t.w_size-X&&(t.match_length=$(t,K),t.match_length<=5&&(t.strategy===1||t.match_length===R&&4096<t.strstart-t.match_start)&&(t.match_length=R-1)),t.prev_length>=R&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-R,_=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-R),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,K=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=R-1,t.strstart++,_&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((_=a._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(_=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<R-1?t.strstart:R-1,P===p?(E(t,!0),t.strm.avail_out===0?nt:N):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:O}function ct(t,P,K,_,d){this.good_length=t,this.max_lazy=P,this.nice_length=K,this.max_chain=_,this.func=d}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*T),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Z+1),this.heap=new i.Buf16(2*k+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*k+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?w:D,t.adler=P.wrap===2?0:1,P.last_flush=m,a._tr_init(P),n):ot(t,f)}function It(t){var P=gt(t);return P===n&&function(K){K.window_size=2*K.w_size,rt(K.head),K.max_lazy_match=s[K.level].max_lazy,K.good_match=s[K.level].good_length,K.nice_match=s[K.level].nice_length,K.max_chain_length=s[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=R-1,K.match_available=0,K.ins_h=0}(t.state),P}function St(t,P,K,_,d,x){if(!t)return f;var U=1;if(P===r&&(P=6),_<0?(U=0,_=-_):15<_&&(U=2,_-=16),d<1||A<d||K!==g||_<8||15<_||P<0||9<P||x<0||c<x)return ot(t,f);_===8&&(_=9);var L=new bt;return(t.state=L).strm=t,L.wrap=U,L.gzhead=null,L.w_bits=_,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=d+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+R-1)/R),L.window=new i.Buf8(2*L.w_size),L.head=new i.Buf16(L.hash_size),L.prev=new i.Buf16(L.w_size),L.lit_bufsize=1<<d+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new i.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=P,L.strategy=x,L.method=K,It(t)}s=[new ct(0,0,0,0,function(t,P){var K=65535;for(K>t.pending_buf_size-5&&(K=t.pending_buf_size-5);;){if(t.lookahead<=1){if(vt(t),t.lookahead===0&&P===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var _=t.block_start+K;if((t.strstart===0||t.strstart>=_)&&(t.lookahead=t.strstart-_,t.strstart=_,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-X&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,P===p?(E(t,!0),t.strm.avail_out===0?nt:N):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new ct(4,4,8,4,kt),new ct(4,5,16,8,kt),new ct(4,6,32,32,kt),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],y.deflateInit=function(t,P){return St(t,P,g,15,8,0)},y.deflateInit2=St,y.deflateReset=It,y.deflateResetKeep=gt,y.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?f:(t.state.gzhead=P,n):f},y.deflate=function(t,P){var K,_,d,x;if(!t||!t.state||5<P||P<0)return t?ot(t,f):f;if(_=t.state,!t.output||!t.input&&t.avail_in!==0||_.status===666&&P!==p)return ot(t,t.avail_out===0?-5:f);if(_.strm=t,K=_.last_flush,_.last_flush=P,_.status===w)if(_.wrap===2)t.adler=0,tt(_,31),tt(_,139),tt(_,8),_.gzhead?(tt(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),tt(_,255&_.gzhead.time),tt(_,_.gzhead.time>>8&255),tt(_,_.gzhead.time>>16&255),tt(_,_.gzhead.time>>24&255),tt(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),tt(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(tt(_,255&_.gzhead.extra.length),tt(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(t.adler=h(t.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(tt(_,0),tt(_,0),tt(_,0),tt(_,0),tt(_,0),tt(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),tt(_,3),_.status=D);else{var U=g+(_.w_bits-8<<4)<<8;U|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(U|=32),U+=31-U%31,_.status=D,J(_,U),_.strstart!==0&&(J(_,t.adler>>>16),J(_,65535&t.adler)),t.adler=1}if(_.status===69)if(_.gzhead.extra){for(d=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),B(t),d=_.pending,_.pending!==_.pending_buf_size));)tt(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){d=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),B(t),d=_.pending,_.pending===_.pending_buf_size)){x=1;break}x=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,tt(_,x)}while(x!==0);_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),x===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){d=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),B(t),d=_.pending,_.pending===_.pending_buf_size)){x=1;break}x=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,tt(_,x)}while(x!==0);_.gzhead.hcrc&&_.pending>d&&(t.adler=h(t.adler,_.pending_buf,_.pending-d,d)),x===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&B(t),_.pending+2<=_.pending_buf_size&&(tt(_,255&t.adler),tt(_,t.adler>>8&255),t.adler=0,_.status=D)):_.status=D),_.pending!==0){if(B(t),t.avail_out===0)return _.last_flush=-1,n}else if(t.avail_in===0&&G(P)<=G(K)&&P!==p)return ot(t,-5);if(_.status===666&&t.avail_in!==0)return ot(t,-5);if(t.avail_in!==0||_.lookahead!==0||P!==m&&_.status!==666){var L=_.strategy===2?function(z,j){for(var H;;){if(z.lookahead===0&&(vt(z),z.lookahead===0)){if(j===m)return e;break}if(z.match_length=0,H=a._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,H&&(E(z,!1),z.strm.avail_out===0))return e}return z.insert=0,j===p?(E(z,!0),z.strm.avail_out===0?nt:N):z.last_lit&&(E(z,!1),z.strm.avail_out===0)?e:O}(_,P):_.strategy===3?function(z,j){for(var H,V,et,ht,ut=z.window;;){if(z.lookahead<=F){if(vt(z),z.lookahead<=F&&j===m)return e;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=R&&0<z.strstart&&(V=ut[et=z.strstart-1])===ut[++et]&&V===ut[++et]&&V===ut[++et]){ht=z.strstart+F;do;while(V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&V===ut[++et]&&et<ht);z.match_length=F-(ht-et),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=R?(H=a._tr_tally(z,1,z.match_length-R),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(H=a._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),H&&(E(z,!1),z.strm.avail_out===0))return e}return z.insert=0,j===p?(E(z,!0),z.strm.avail_out===0?nt:N):z.last_lit&&(E(z,!1),z.strm.avail_out===0)?e:O}(_,P):s[_.level].func(_,P);if(L!==nt&&L!==N||(_.status=666),L===e||L===nt)return t.avail_out===0&&(_.last_flush=-1),n;if(L===O&&(P===1?a._tr_align(_):P!==5&&(a._tr_stored_block(_,0,0,!1),P===3&&(rt(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),B(t),t.avail_out===0))return _.last_flush=-1,n}return P!==p?n:_.wrap<=0?1:(_.wrap===2?(tt(_,255&t.adler),tt(_,t.adler>>8&255),tt(_,t.adler>>16&255),tt(_,t.adler>>24&255),tt(_,255&t.total_in),tt(_,t.total_in>>8&255),tt(_,t.total_in>>16&255),tt(_,t.total_in>>24&255)):(J(_,t.adler>>>16),J(_,65535&t.adler)),B(t),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?n:1)},y.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==w&&P!==69&&P!==73&&P!==91&&P!==103&&P!==D&&P!==666?ot(t,f):(t.state=null,P===D?ot(t,-3):n):f},y.deflateSetDictionary=function(t,P){var K,_,d,x,U,L,z,j,H=P.length;if(!t||!t.state||(x=(K=t.state).wrap)===2||x===1&&K.status!==w||K.lookahead)return f;for(x===1&&(t.adler=l(t.adler,P,H,0)),K.wrap=0,H>=K.w_size&&(x===0&&(rt(K.head),K.strstart=0,K.block_start=0,K.insert=0),j=new i.Buf8(K.w_size),i.arraySet(j,P,H-K.w_size,K.w_size,0),P=j,H=K.w_size),U=t.avail_in,L=t.next_in,z=t.input,t.avail_in=H,t.next_in=0,t.input=P,vt(K);K.lookahead>=R;){for(_=K.strstart,d=K.lookahead-(R-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[_+R-1])&K.hash_mask,K.prev[_&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=_,_++,--d;);K.strstart=_,K.lookahead=R-1,vt(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=R-1,K.match_available=0,t.next_in=L,t.input=z,t.avail_in=U,K.wrap=x,n},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,I,y){I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,I,y){I.exports=function(s,i){var a,l,h,b,m,p,n,f,r,c,o,g,A,k,v,S,T,Z,R,F,X,w,D,e,O;a=s.state,l=s.next_in,e=s.input,h=l+(s.avail_in-5),b=s.next_out,O=s.output,m=b-(i-s.avail_out),p=b+(s.avail_out-257),n=a.dmax,f=a.wsize,r=a.whave,c=a.wnext,o=a.window,g=a.hold,A=a.bits,k=a.lencode,v=a.distcode,S=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;t:do{A<15&&(g+=e[l++]<<A,A+=8,g+=e[l++]<<A,A+=8),Z=k[g&S];e:for(;;){if(g>>>=R=Z>>>24,A-=R,(R=Z>>>16&255)===0)O[b++]=65535&Z;else{if(!(16&R)){if(!(64&R)){Z=k[(65535&Z)+(g&(1<<R)-1)];continue e}if(32&R){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}F=65535&Z,(R&=15)&&(A<R&&(g+=e[l++]<<A,A+=8),F+=g&(1<<R)-1,g>>>=R,A-=R),A<15&&(g+=e[l++]<<A,A+=8,g+=e[l++]<<A,A+=8),Z=v[g&T];n:for(;;){if(g>>>=R=Z>>>24,A-=R,!(16&(R=Z>>>16&255))){if(!(64&R)){Z=v[(65535&Z)+(g&(1<<R)-1)];continue n}s.msg="invalid distance code",a.mode=30;break t}if(X=65535&Z,A<(R&=15)&&(g+=e[l++]<<A,(A+=8)<R&&(g+=e[l++]<<A,A+=8)),n<(X+=g&(1<<R)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(g>>>=R,A-=R,(R=b-m)<X){if(r<(R=X-R)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(D=o,(w=0)===c){if(w+=f-R,R<F){for(F-=R;O[b++]=o[w++],--R;);w=b-X,D=O}}else if(c<R){if(w+=f+c-R,(R-=c)<F){for(F-=R;O[b++]=o[w++],--R;);if(w=0,c<F){for(F-=R=c;O[b++]=o[w++],--R;);w=b-X,D=O}}}else if(w+=c-R,R<F){for(F-=R;O[b++]=o[w++],--R;);w=b-X,D=O}for(;2<F;)O[b++]=D[w++],O[b++]=D[w++],O[b++]=D[w++],F-=3;F&&(O[b++]=D[w++],1<F&&(O[b++]=D[w++]))}else{for(w=b-X;O[b++]=O[w++],O[b++]=O[w++],O[b++]=O[w++],2<(F-=3););F&&(O[b++]=O[w++],1<F&&(O[b++]=O[w++]))}break}}break}}while(l<h&&b<p);l-=F=A>>3,g&=(1<<(A-=F<<3))-1,s.next_in=l,s.next_out=b,s.avail_in=l<h?h-l+5:5-(l-h),s.avail_out=b<p?p-b+257:257-(b-p),a.hold=g,a.bits=A}},{}],49:[function(u,I,y){var s=u("../utils/common"),i=u("./adler32"),a=u("./crc32"),l=u("./inffast"),h=u("./inftrees"),b=1,m=2,p=0,n=-2,f=1,r=852,c=592;function o(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(w){var D;return w&&w.state?(D=w.state,w.total_in=w.total_out=D.total=0,w.msg="",D.wrap&&(w.adler=1&D.wrap),D.mode=f,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new s.Buf32(r),D.distcode=D.distdyn=new s.Buf32(c),D.sane=1,D.back=-1,p):n}function k(w){var D;return w&&w.state?((D=w.state).wsize=0,D.whave=0,D.wnext=0,A(w)):n}function v(w,D){var e,O;return w&&w.state?(O=w.state,D<0?(e=0,D=-D):(e=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?n:(O.window!==null&&O.wbits!==D&&(O.window=null),O.wrap=e,O.wbits=D,k(w))):n}function S(w,D){var e,O;return w?(O=new g,(w.state=O).window=null,(e=v(w,D))!==p&&(w.state=null),e):n}var T,Z,R=!0;function F(w){if(R){var D;for(T=new s.Buf32(512),Z=new s.Buf32(32),D=0;D<144;)w.lens[D++]=8;for(;D<256;)w.lens[D++]=9;for(;D<280;)w.lens[D++]=7;for(;D<288;)w.lens[D++]=8;for(h(b,w.lens,0,288,T,0,w.work,{bits:9}),D=0;D<32;)w.lens[D++]=5;h(m,w.lens,0,32,Z,0,w.work,{bits:5}),R=!1}w.lencode=T,w.lenbits=9,w.distcode=Z,w.distbits=5}function X(w,D,e,O){var nt,N=w.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new s.Buf8(N.wsize)),O>=N.wsize?(s.arraySet(N.window,D,e-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(O<(nt=N.wsize-N.wnext)&&(nt=O),s.arraySet(N.window,D,e-O,nt,N.wnext),(O-=nt)?(s.arraySet(N.window,D,e-O,O,0),N.wnext=O,N.whave=N.wsize):(N.wnext+=nt,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=nt))),0}y.inflateReset=k,y.inflateReset2=v,y.inflateResetKeep=A,y.inflateInit=function(w){return S(w,15)},y.inflateInit2=S,y.inflate=function(w,D){var e,O,nt,N,ot,G,rt,B,E,tt,J,$,vt,kt,lt,ct,bt,gt,It,St,t,P,K,_,d=0,x=new s.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return n;(e=w.state).mode===12&&(e.mode=13),ot=w.next_out,nt=w.output,rt=w.avail_out,N=w.next_in,O=w.input,G=w.avail_in,B=e.hold,E=e.bits,tt=G,J=rt,P=p;t:for(;;)switch(e.mode){case f:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(2&e.wrap&&B===35615){x[e.check=0]=255&B,x[1]=B>>>8&255,e.check=a(e.check,x,2,0),E=B=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&B)<<8)+(B>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&B)!=8){w.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(B>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&B?10:12,E=B=0;break;case 2:for(;E<16;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(e.flags=B,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=B>>8&1),512&e.flags&&(x[0]=255&B,x[1]=B>>>8&255,e.check=a(e.check,x,2,0)),E=B=0,e.mode=3;case 3:for(;E<32;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.head&&(e.head.time=B),512&e.flags&&(x[0]=255&B,x[1]=B>>>8&255,x[2]=B>>>16&255,x[3]=B>>>24&255,e.check=a(e.check,x,4,0)),E=B=0,e.mode=4;case 4:for(;E<16;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.head&&(e.head.xflags=255&B,e.head.os=B>>8),512&e.flags&&(x[0]=255&B,x[1]=B>>>8&255,e.check=a(e.check,x,2,0)),E=B=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.length=B,e.head&&(e.head.extra_len=B),512&e.flags&&(x[0]=255&B,x[1]=B>>>8&255,e.check=a(e.check,x,2,0)),E=B=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(G<($=e.length)&&($=G),$&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,O,N,$,t)),512&e.flags&&(e.check=a(e.check,O,$,N)),G-=$,N+=$,e.length-=$),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(G===0)break t;for($=0;t=O[N+$++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&$<G;);if(512&e.flags&&(e.check=a(e.check,O,$,N)),G-=$,N+=$,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(G===0)break t;for($=0;t=O[N+$++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&$<G;);if(512&e.flags&&(e.check=a(e.check,O,$,N)),G-=$,N+=$,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(B!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}E=B=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}w.adler=e.check=o(B),E=B=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=B,e.bits=E,2;w.adler=e.check=1,e.mode=12;case 12:if(D===5||D===6)break t;case 13:if(e.last){B>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}switch(e.last=1&B,E-=1,3&(B>>>=1)){case 0:e.mode=14;break;case 1:if(F(e),e.mode=20,D!==6)break;B>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}B>>>=2,E-=2;break;case 14:for(B>>>=7&E,E-=7&E;E<32;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if((65535&B)!=(B>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&B,E=B=0,e.mode=15,D===6)break t;case 15:e.mode=16;case 16:if($=e.length){if(G<$&&($=G),rt<$&&($=rt),$===0)break t;s.arraySet(nt,O,N,$,ot),G-=$,N+=$,rt-=$,ot+=$,e.length-=$;break}e.mode=12;break;case 17:for(;E<14;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(e.nlen=257+(31&B),B>>>=5,E-=5,e.ndist=1+(31&B),B>>>=5,E-=5,e.ncode=4+(15&B),B>>>=4,E-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.lens[U[e.have++]]=7&B,B>>>=3,E-=3}for(;e.have<19;)e.lens[U[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,K={bits:e.lenbits},P=h(0,e.lens,0,19,e.lencode,0,e.work,K),e.lenbits=K.bits,P){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ct=(d=e.lencode[B&(1<<e.lenbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(bt<16)B>>>=lt,E-=lt,e.lens[e.have++]=bt;else{if(bt===16){for(_=lt+2;E<_;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(B>>>=lt,E-=lt,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],$=3+(3&B),B>>>=2,E-=2}else if(bt===17){for(_=lt+3;E<_;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}E-=lt,t=0,$=3+(7&(B>>>=lt)),B>>>=3,E-=3}else{for(_=lt+7;E<_;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}E-=lt,t=0,$=11+(127&(B>>>=lt)),B>>>=7,E-=7}if(e.have+$>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;$--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,K={bits:e.lenbits},P=h(b,e.lens,0,e.nlen,e.lencode,0,e.work,K),e.lenbits=K.bits,P){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,K={bits:e.distbits},P=h(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,K),e.distbits=K.bits,P){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,D===6)break t;case 20:e.mode=21;case 21:if(6<=G&&258<=rt){w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=B,e.bits=E,l(w,J),ot=w.next_out,nt=w.output,rt=w.avail_out,N=w.next_in,O=w.input,G=w.avail_in,B=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;ct=(d=e.lencode[B&(1<<e.lenbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(ct&&!(240&ct)){for(gt=lt,It=ct,St=bt;ct=(d=e.lencode[St+((B&(1<<gt+It)-1)>>gt)])>>>16&255,bt=65535&d,!(gt+(lt=d>>>24)<=E);){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}B>>>=gt,E-=gt,e.back+=gt}if(B>>>=lt,E-=lt,e.back+=lt,e.length=bt,ct===0){e.mode=26;break}if(32&ct){e.back=-1,e.mode=12;break}if(64&ct){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&ct,e.mode=22;case 22:if(e.extra){for(_=e.extra;E<_;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.length+=B&(1<<e.extra)-1,B>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;ct=(d=e.distcode[B&(1<<e.distbits)-1])>>>16&255,bt=65535&d,!((lt=d>>>24)<=E);){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(!(240&ct)){for(gt=lt,It=ct,St=bt;ct=(d=e.distcode[St+((B&(1<<gt+It)-1)>>gt)])>>>16&255,bt=65535&d,!(gt+(lt=d>>>24)<=E);){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}B>>>=gt,E-=gt,e.back+=gt}if(B>>>=lt,E-=lt,e.back+=lt,64&ct){w.msg="invalid distance code",e.mode=30;break}e.offset=bt,e.extra=15&ct,e.mode=24;case 24:if(e.extra){for(_=e.extra;E<_;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}e.offset+=B&(1<<e.extra)-1,B>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(rt===0)break t;if($=J-rt,e.offset>$){if(($=e.offset-$)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}vt=$>e.wnext?($-=e.wnext,e.wsize-$):e.wnext-$,$>e.length&&($=e.length),kt=e.window}else kt=nt,vt=ot-e.offset,$=e.length;for(rt<$&&($=rt),rt-=$,e.length-=$;nt[ot++]=kt[vt++],--$;);e.length===0&&(e.mode=21);break;case 26:if(rt===0)break t;nt[ot++]=e.length,rt--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(G===0)break t;G--,B|=O[N++]<<E,E+=8}if(J-=rt,w.total_out+=J,e.total+=J,J&&(w.adler=e.check=e.flags?a(e.check,nt,J,ot-J):i(e.check,nt,J,ot-J)),J=rt,(e.flags?B:o(B))!==e.check){w.msg="incorrect data check",e.mode=30;break}E=B=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(G===0)break t;G--,B+=O[N++]<<E,E+=8}if(B!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}E=B=0}e.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return n}return w.next_out=ot,w.avail_out=rt,w.next_in=N,w.avail_in=G,e.hold=B,e.bits=E,(e.wsize||J!==w.avail_out&&e.mode<30&&(e.mode<27||D!==4))&&X(w,w.output,w.next_out,J-w.avail_out)?(e.mode=31,-4):(tt-=w.avail_in,J-=w.avail_out,w.total_in+=tt,w.total_out+=J,e.total+=J,e.wrap&&J&&(w.adler=e.check=e.flags?a(e.check,nt,J,w.next_out-J):i(e.check,nt,J,w.next_out-J)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(tt==0&&J===0||D===4)&&P===p&&(P=-5),P)},y.inflateEnd=function(w){if(!w||!w.state)return n;var D=w.state;return D.window&&(D.window=null),w.state=null,p},y.inflateGetHeader=function(w,D){var e;return w&&w.state&&2&(e=w.state).wrap?((e.head=D).done=!1,p):n},y.inflateSetDictionary=function(w,D){var e,O=D.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?n:e.mode===11&&i(1,D,O,0)!==e.check?-3:X(w,D,O,O)?(e.mode=31,-4):(e.havedict=1,p):n},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,I,y){var s=u("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(b,m,p,n,f,r,c,o){var g,A,k,v,S,T,Z,R,F,X=o.bits,w=0,D=0,e=0,O=0,nt=0,N=0,ot=0,G=0,rt=0,B=0,E=null,tt=0,J=new s.Buf16(16),$=new s.Buf16(16),vt=null,kt=0;for(w=0;w<=15;w++)J[w]=0;for(D=0;D<n;D++)J[m[p+D]]++;for(nt=X,O=15;1<=O&&J[O]===0;O--);if(O<nt&&(nt=O),O===0)return f[r++]=20971520,f[r++]=20971520,o.bits=1,0;for(e=1;e<O&&J[e]===0;e++);for(nt<e&&(nt=e),w=G=1;w<=15;w++)if(G<<=1,(G-=J[w])<0)return-1;if(0<G&&(b===0||O!==1))return-1;for($[1]=0,w=1;w<15;w++)$[w+1]=$[w]+J[w];for(D=0;D<n;D++)m[p+D]!==0&&(c[$[m[p+D]]++]=D);if(T=b===0?(E=vt=c,19):b===1?(E=i,tt-=257,vt=a,kt-=257,256):(E=l,vt=h,-1),w=e,S=r,ot=D=B=0,k=-1,v=(rt=1<<(N=nt))-1,b===1&&852<rt||b===2&&592<rt)return 1;for(;;){for(Z=w-ot,F=c[D]<T?(R=0,c[D]):c[D]>T?(R=vt[kt+c[D]],E[tt+c[D]]):(R=96,0),g=1<<w-ot,e=A=1<<N;f[S+(B>>ot)+(A-=g)]=Z<<24|R<<16|F|0,A!==0;);for(g=1<<w-1;B&g;)g>>=1;if(g!==0?(B&=g-1,B+=g):B=0,D++,--J[w]==0){if(w===O)break;w=m[p+c[D]]}if(nt<w&&(B&v)!==k){for(ot===0&&(ot=nt),S+=e,G=1<<(N=w-ot);N+ot<O&&!((G-=J[N+ot])<=0);)N++,G<<=1;if(rt+=1<<N,b===1&&852<rt||b===2&&592<rt)return 1;f[k=B&v]=nt<<24|N<<16|S-r|0}}return B!==0&&(f[S+B]=w-ot<<24|64<<16|0),o.bits=nt,0}},{"../utils/common":41}],51:[function(u,I,y){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,I,y){var s=u("../utils/common"),i=0,a=1;function l(d){for(var x=d.length;0<=--x;)d[x]=0}var h=0,b=29,m=256,p=m+1+b,n=30,f=19,r=2*p+1,c=15,o=16,g=7,A=256,k=16,v=17,S=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(p+2));l(X);var w=new Array(2*n);l(w);var D=new Array(512);l(D);var e=new Array(256);l(e);var O=new Array(b);l(O);var nt,N,ot,G=new Array(n);function rt(d,x,U,L,z){this.static_tree=d,this.extra_bits=x,this.extra_base=U,this.elems=L,this.max_length=z,this.has_stree=d&&d.length}function B(d,x){this.dyn_tree=d,this.max_code=0,this.stat_desc=x}function E(d){return d<256?D[d]:D[256+(d>>>7)]}function tt(d,x){d.pending_buf[d.pending++]=255&x,d.pending_buf[d.pending++]=x>>>8&255}function J(d,x,U){d.bi_valid>o-U?(d.bi_buf|=x<<d.bi_valid&65535,tt(d,d.bi_buf),d.bi_buf=x>>o-d.bi_valid,d.bi_valid+=U-o):(d.bi_buf|=x<<d.bi_valid&65535,d.bi_valid+=U)}function $(d,x,U){J(d,U[2*x],U[2*x+1])}function vt(d,x){for(var U=0;U|=1&d,d>>>=1,U<<=1,0<--x;);return U>>>1}function kt(d,x,U){var L,z,j=new Array(c+1),H=0;for(L=1;L<=c;L++)j[L]=H=H+U[L-1]<<1;for(z=0;z<=x;z++){var V=d[2*z+1];V!==0&&(d[2*z]=vt(j[V]++,V))}}function lt(d){var x;for(x=0;x<p;x++)d.dyn_ltree[2*x]=0;for(x=0;x<n;x++)d.dyn_dtree[2*x]=0;for(x=0;x<f;x++)d.bl_tree[2*x]=0;d.dyn_ltree[2*A]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function ct(d){8<d.bi_valid?tt(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function bt(d,x,U,L){var z=2*x,j=2*U;return d[z]<d[j]||d[z]===d[j]&&L[x]<=L[U]}function gt(d,x,U){for(var L=d.heap[U],z=U<<1;z<=d.heap_len&&(z<d.heap_len&&bt(x,d.heap[z+1],d.heap[z],d.depth)&&z++,!bt(x,L,d.heap[z],d.depth));)d.heap[U]=d.heap[z],U=z,z<<=1;d.heap[U]=L}function It(d,x,U){var L,z,j,H,V=0;if(d.last_lit!==0)for(;L=d.pending_buf[d.d_buf+2*V]<<8|d.pending_buf[d.d_buf+2*V+1],z=d.pending_buf[d.l_buf+V],V++,L===0?$(d,z,x):($(d,(j=e[z])+m+1,x),(H=T[j])!==0&&J(d,z-=O[j],H),$(d,j=E(--L),U),(H=Z[j])!==0&&J(d,L-=G[j],H)),V<d.last_lit;);$(d,A,x)}function St(d,x){var U,L,z,j=x.dyn_tree,H=x.stat_desc.static_tree,V=x.stat_desc.has_stree,et=x.stat_desc.elems,ht=-1;for(d.heap_len=0,d.heap_max=r,U=0;U<et;U++)j[2*U]!==0?(d.heap[++d.heap_len]=ht=U,d.depth[U]=0):j[2*U+1]=0;for(;d.heap_len<2;)j[2*(z=d.heap[++d.heap_len]=ht<2?++ht:0)]=1,d.depth[z]=0,d.opt_len--,V&&(d.static_len-=H[2*z+1]);for(x.max_code=ht,U=d.heap_len>>1;1<=U;U--)gt(d,j,U);for(z=et;U=d.heap[1],d.heap[1]=d.heap[d.heap_len--],gt(d,j,1),L=d.heap[1],d.heap[--d.heap_max]=U,d.heap[--d.heap_max]=L,j[2*z]=j[2*U]+j[2*L],d.depth[z]=(d.depth[U]>=d.depth[L]?d.depth[U]:d.depth[L])+1,j[2*U+1]=j[2*L+1]=z,d.heap[1]=z++,gt(d,j,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(ut,xt){var Kt,Et,Dt,_t,Nt,Ht,Tt=xt.dyn_tree,re=xt.max_code,Ce=xt.stat_desc.static_tree,Se=xt.stat_desc.has_stree,Ie=xt.stat_desc.extra_bits,ae=xt.stat_desc.extra_base,Wt=xt.stat_desc.max_length,Gt=0;for(_t=0;_t<=c;_t++)ut.bl_count[_t]=0;for(Tt[2*ut.heap[ut.heap_max]+1]=0,Kt=ut.heap_max+1;Kt<r;Kt++)Wt<(_t=Tt[2*Tt[2*(Et=ut.heap[Kt])+1]+1]+1)&&(_t=Wt,Gt++),Tt[2*Et+1]=_t,re<Et||(ut.bl_count[_t]++,Nt=0,ae<=Et&&(Nt=Ie[Et-ae]),Ht=Tt[2*Et],ut.opt_len+=Ht*(_t+Nt),Se&&(ut.static_len+=Ht*(Ce[2*Et+1]+Nt)));if(Gt!==0){do{for(_t=Wt-1;ut.bl_count[_t]===0;)_t--;ut.bl_count[_t]--,ut.bl_count[_t+1]+=2,ut.bl_count[Wt]--,Gt-=2}while(0<Gt);for(_t=Wt;_t!==0;_t--)for(Et=ut.bl_count[_t];Et!==0;)re<(Dt=ut.heap[--Kt])||(Tt[2*Dt+1]!==_t&&(ut.opt_len+=(_t-Tt[2*Dt+1])*Tt[2*Dt],Tt[2*Dt+1]=_t),Et--)}}(d,x),kt(j,ht,d.bl_count)}function t(d,x,U){var L,z,j=-1,H=x[1],V=0,et=7,ht=4;for(H===0&&(et=138,ht=3),x[2*(U+1)+1]=65535,L=0;L<=U;L++)z=H,H=x[2*(L+1)+1],++V<et&&z===H||(V<ht?d.bl_tree[2*z]+=V:z!==0?(z!==j&&d.bl_tree[2*z]++,d.bl_tree[2*k]++):V<=10?d.bl_tree[2*v]++:d.bl_tree[2*S]++,j=z,ht=(V=0)===H?(et=138,3):z===H?(et=6,3):(et=7,4))}function P(d,x,U){var L,z,j=-1,H=x[1],V=0,et=7,ht=4;for(H===0&&(et=138,ht=3),L=0;L<=U;L++)if(z=H,H=x[2*(L+1)+1],!(++V<et&&z===H)){if(V<ht)for(;$(d,z,d.bl_tree),--V!=0;);else z!==0?(z!==j&&($(d,z,d.bl_tree),V--),$(d,k,d.bl_tree),J(d,V-3,2)):V<=10?($(d,v,d.bl_tree),J(d,V-3,3)):($(d,S,d.bl_tree),J(d,V-11,7));j=z,ht=(V=0)===H?(et=138,3):z===H?(et=6,3):(et=7,4)}}l(G);var K=!1;function _(d,x,U,L){J(d,(h<<1)+(L?1:0),3),function(z,j,H,V){ct(z),V&&(tt(z,H),tt(z,~H)),s.arraySet(z.pending_buf,z.window,j,H,z.pending),z.pending+=H}(d,x,U,!0)}y._tr_init=function(d){K||(function(){var x,U,L,z,j,H=new Array(c+1);for(z=L=0;z<b-1;z++)for(O[z]=L,x=0;x<1<<T[z];x++)e[L++]=z;for(e[L-1]=z,z=j=0;z<16;z++)for(G[z]=j,x=0;x<1<<Z[z];x++)D[j++]=z;for(j>>=7;z<n;z++)for(G[z]=j<<7,x=0;x<1<<Z[z]-7;x++)D[256+j++]=z;for(U=0;U<=c;U++)H[U]=0;for(x=0;x<=143;)X[2*x+1]=8,x++,H[8]++;for(;x<=255;)X[2*x+1]=9,x++,H[9]++;for(;x<=279;)X[2*x+1]=7,x++,H[7]++;for(;x<=287;)X[2*x+1]=8,x++,H[8]++;for(kt(X,p+1,H),x=0;x<n;x++)w[2*x+1]=5,w[2*x]=vt(x,5);nt=new rt(X,T,m+1,p,c),N=new rt(w,Z,0,n,c),ot=new rt(new Array(0),R,0,f,g)}(),K=!0),d.l_desc=new B(d.dyn_ltree,nt),d.d_desc=new B(d.dyn_dtree,N),d.bl_desc=new B(d.bl_tree,ot),d.bi_buf=0,d.bi_valid=0,lt(d)},y._tr_stored_block=_,y._tr_flush_block=function(d,x,U,L){var z,j,H=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function(V){var et,ht=4093624447;for(et=0;et<=31;et++,ht>>>=1)if(1&ht&&V.dyn_ltree[2*et]!==0)return i;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return a;for(et=32;et<m;et++)if(V.dyn_ltree[2*et]!==0)return a;return i}(d)),St(d,d.l_desc),St(d,d.d_desc),H=function(V){var et;for(t(V,V.dyn_ltree,V.l_desc.max_code),t(V,V.dyn_dtree,V.d_desc.max_code),St(V,V.bl_desc),et=f-1;3<=et&&V.bl_tree[2*F[et]+1]===0;et--);return V.opt_len+=3*(et+1)+5+5+4,et}(d),z=d.opt_len+3+7>>>3,(j=d.static_len+3+7>>>3)<=z&&(z=j)):z=j=U+5,U+4<=z&&x!==-1?_(d,x,U,L):d.strategy===4||j===z?(J(d,2+(L?1:0),3),It(d,X,w)):(J(d,4+(L?1:0),3),function(V,et,ht,ut){var xt;for(J(V,et-257,5),J(V,ht-1,5),J(V,ut-4,4),xt=0;xt<ut;xt++)J(V,V.bl_tree[2*F[xt]+1],3);P(V,V.dyn_ltree,et-1),P(V,V.dyn_dtree,ht-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,H+1),It(d,d.dyn_ltree,d.dyn_dtree)),lt(d),L&&ct(d)},y._tr_tally=function(d,x,U){return d.pending_buf[d.d_buf+2*d.last_lit]=x>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&x,d.pending_buf[d.l_buf+d.last_lit]=255&U,d.last_lit++,x===0?d.dyn_ltree[2*U]++:(d.matches++,x--,d.dyn_ltree[2*(e[U]+m+1)]++,d.dyn_dtree[2*E(x)]++),d.last_lit===d.lit_bufsize-1},y._tr_align=function(d){J(d,2,3),$(d,A,X),function(x){x.bi_valid===16?(tt(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(u,I,y){I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,I,y){(function(s){(function(i,a){if(!i.setImmediate){var l,h,b,m,p=1,n={},f=!1,r=i.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(i);c=c&&c.setTimeout?c:i,l={}.toString.call(i.process)==="[object process]"?function(k){process.nextTick(function(){g(k)})}:function(){if(i.postMessage&&!i.importScripts){var k=!0,v=i.onmessage;return i.onmessage=function(){k=!1},i.postMessage("","*"),i.onmessage=v,k}}()?(m="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",A,!1):i.attachEvent("onmessage",A),function(k){i.postMessage(m+k,"*")}):i.MessageChannel?((b=new MessageChannel).port1.onmessage=function(k){g(k.data)},function(k){b.port2.postMessage(k)}):r&&"onreadystatechange"in r.createElement("script")?(h=r.documentElement,function(k){var v=r.createElement("script");v.onreadystatechange=function(){g(k),v.onreadystatechange=null,h.removeChild(v),v=null},h.appendChild(v)}):function(k){setTimeout(g,0,k)},c.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var v=new Array(arguments.length-1),S=0;S<v.length;S++)v[S]=arguments[S+1];var T={callback:k,args:v};return n[p]=T,l(p),p++},c.clearImmediate=o}function o(k){delete n[k]}function g(k){if(f)setTimeout(g,0,k);else{var v=n[k];if(v){f=!0;try{(function(S){var T=S.callback,Z=S.args;switch(Z.length){case 0:T();break;case 1:T(Z[0]);break;case 2:T(Z[0],Z[1]);break;case 3:T(Z[0],Z[1],Z[2]);break;default:T.apply(a,Z)}})(v)}finally{o(k),f=!1}}}}function A(k){k.source===i&&typeof k.data=="string"&&k.data.indexOf(m)===0&&g(+k.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vr);const ge=Xt;var Qt={},$r={get exports(){return Qt},set exports(C){Qt=C}};(function(C,q){(function(u,I){I()})(Bt,function(){function u(h,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function I(h,b,m){var p=new XMLHttpRequest;p.open("GET",h),p.responseType="blob",p.onload=function(){l(p.response,b,m)},p.onerror=function(){console.error("could not download file")},p.send()}function y(h){var b=new XMLHttpRequest;b.open("HEAD",h,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(b)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Bt=="object"&&Bt.global===Bt?Bt:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,b,m){var p=i.URL||i.webkitURL,n=document.createElement("a");b=b||h.name||"download",n.download=b,n.rel="noopener",typeof h=="string"?(n.href=h,n.origin===location.origin?s(n):y(n.href)?I(h,b,m):s(n,n.target="_blank")):(n.href=p.createObjectURL(h),setTimeout(function(){p.revokeObjectURL(n.href)},4e4),setTimeout(function(){s(n)},0))}:"msSaveOrOpenBlob"in navigator?function(h,b,m){if(b=b||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(u(h,m),b);else if(y(h))I(h,b,m);else{var p=document.createElement("a");p.href=h,p.target="_blank",setTimeout(function(){s(p)})}}:function(h,b,m,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof h=="string")return I(h,b,m);var n=h.type==="application/octet-stream",f=/constructor/i.test(i.HTMLElement)||i.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||n&&f||a)&&typeof FileReader<"u"){var c=new FileReader;c.onloadend=function(){var A=c.result;A=r?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=A:location=A,p=null},c.readAsDataURL(h)}else{var o=i.URL||i.webkitURL,g=o.createObjectURL(h);p?p.location=g:location.href=g,p=null,setTimeout(function(){o.revokeObjectURL(g)},4e4)}});i.saveAs=l.saveAs=l,C.exports=l})})($r);const Mr=Qt,Jr=De("save",()=>{const C=wt(null);function q(i){C.value=i,localStorage.setItem("save",JSON.stringify({save:C.value}))}function u(){try{const{save:i}=JSON.parse(localStorage.getItem("save"));return C.value=i,!0}catch{return C.value=null,!1}}function I(){localStorage.removeItem("save"),C.value=null}async function y(){const i=JSON.stringify(C.value),a=ge();a.file("save.txt",i);const l=await a.generateAsync({type:"blob",compression:"DEFLATE"});Mr.saveAs(l,"save.SCTReplay")}async function s(i){var l;const a=await ge.loadAsync(i);C.value=JSON.parse(await((l=a.file("save.txt"))==null?void 0:l.async("string"))||"{}")}return{save:C,SaveStorage:q,LoadStorage:u,CleanStorage:I,Download:y,Upload:s}});const xe=Symbol.for("vuetify:v-chip-group");ne({name:"VChipGroup",props:{column:Boolean,filter:Boolean,valueComparator:{type:Function,default:We},...Xe({selectedClass:"v-chip--selected"}),...ke(),...ye(),...Ae({variant:"tonal"})},emits:{"update:modelValue":C=>!0},setup(C,q){let{slots:u}=q;const{themeClasses:I}=be(C),{isSelected:y,select:s,next:i,prev:a,selected:l}=Qe(C,xe);return Pe({VChip:{color:Vt(C,"color"),disabled:Vt(C,"disabled"),filter:Vt(C,"filter"),variant:Vt(C,"variant")}}),ee(()=>{var h;return M(C.tag,{class:["v-chip-group",{"v-chip-group--column":C.column},I.value]},{default:()=>[(h=u.default)==null?void 0:h.call(u,{isSelected:y,select:s,next:i,prev:a,selected:l.value})]})}),{}}});const Hr=ne({name:"VChip",directives:{Ripple:tn},props:{activeClass:String,appendAvatar:String,appendIcon:qt,closable:Boolean,closeIcon:{type:qt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:qt,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:se,onClickOnce:se,...en(),...nn(),...rn(),...an(),...sn(),...on(),...ln(),...ke({tag:"span"}),...ye(),...Ae({variant:"tonal"})},emits:{"click:close":C=>!0,"update:modelValue":C=>!0,"group:selected":C=>!0,click:C=>!0},setup(C,q){let{attrs:u,emit:I,slots:y}=q;const{borderClasses:s}=un(C),{colorClasses:i,colorStyles:a,variantClasses:l}=cn(C),{densityClasses:h}=dn(C),{elevationClasses:b}=fn(C),{roundedClasses:m}=hn(C),{sizeClasses:p}=pn(C),{themeClasses:n}=be(C),f=te(C,"modelValue"),r=mn(C,xe,!1),c=vn(C,u),o=dt(()=>C.link!==!1&&c.isLink.value),g=dt(()=>!C.disabled&&C.link!==!1&&(!!r||C.link||c.isClickable.value));function A(S){f.value=!1,I("click:close",S)}function k(S){var T;I("click",S),g.value&&((T=c.navigate)==null||T.call(c,S),r==null||r.toggle())}function v(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),k(S))}return()=>{var S;const T=c.isLink.value?"a":C.tag,Z=!!(y.append||C.appendIcon||C.appendAvatar),R=!!(y.close||C.closable),F=!!(y.filter||C.filter)&&r,X=!!(y.prepend||C.prependIcon||C.prependAvatar),w=!r||r.isSelected.value;return f.value&&oe(M(T,{class:["v-chip",{"v-chip--disabled":C.disabled,"v-chip--label":C.label,"v-chip--link":g.value,"v-chip--filter":F,"v-chip--pill":C.pill},n.value,s.value,w?i.value:void 0,h.value,b.value,m.value,p.value,l.value,r==null?void 0:r.selectedClass.value],style:[w?a.value:void 0],disabled:C.disabled||void 0,draggable:C.draggable,href:c.href.value,tabindex:g.value?0:void 0,onClick:k,onKeydown:g.value&&!o.value&&v},{default:()=>[gn(g.value,"v-chip"),F&&M($t,{key:"filter",defaults:{VIcon:{icon:C.filterIcon}}},{default:()=>[M(_n,null,{default:()=>[oe(M("div",{class:"v-chip__filter"},[y.filter?y.filter():M(Mt,null,null)]),[[Ue,r.isSelected.value]])]})]}),X&&M($t,{key:"prepend",defaults:{VAvatar:{image:C.prependAvatar},VIcon:{icon:C.prependIcon}}},{default:()=>[y.prepend?M("div",{class:"v-chip__prepend"},[y.prepend()]):C.prependAvatar?M(de,{start:!0},null):C.prependIcon?M(Mt,{start:!0},null):void 0]}),((S=y.default)==null?void 0:S.call(y,{isSelected:r==null?void 0:r.isSelected.value,selectedClass:r==null?void 0:r.selectedClass.value,select:r==null?void 0:r.select,toggle:r==null?void 0:r.toggle,value:r==null?void 0:r.value.value,disabled:C.disabled}))??C.text,Z&&M($t,{key:"append",defaults:{VAvatar:{image:C.appendAvatar},VIcon:{icon:C.appendIcon}}},{default:()=>[y.append?M("div",{class:"v-chip__append"},[y.append()]):C.appendAvatar?M(de,{end:!0},null):C.appendIcon?M(Mt,{end:!0},null):void 0]}),R&&M($t,{key:"close",defaults:{VIcon:{icon:C.closeIcon,size:"x-small"}}},{default:()=>[M("div",{class:"v-chip__close",onClick:A},[y.close?y.close():M(Mt,null,null)])]})]}),[[Ze("ripple"),g.value&&C.ripple,null]])}}}),qr=ne({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:C=>typeof C=="boolean"||[1e3,1024].includes(C)},...yn({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:C=>Fe(C).every(q=>q!=null&&typeof q=="object")},...bn({clearable:!0})},emits:{"click:control":C=>!0,"update:modelValue":C=>!0},setup(C,q){let{attrs:u,emit:I,slots:y}=q;const{t:s}=Le(),i=te(C,"modelValue"),a=dt(()=>typeof C.showSize!="boolean"?C.showSize:void 0),l=dt(()=>(i.value??[]).reduce((v,S)=>{let{size:T=0}=S;return v+T},0)),h=dt(()=>le(l.value,a.value)),b=dt(()=>(i.value??[]).map(v=>{const{name:S="",size:T=0}=v;return C.showSize?`${S} (${le(T,a.value)})`:S})),m=dt(()=>{var v;const S=((v=i.value)==null?void 0:v.length)??0;return C.showSize?s(C.counterSizeString,S,h.value):s(C.counterString,S)}),p=wt(),n=wt(),f=wt(!1),r=wt(),c=dt(()=>C.messages.length?C.messages:C.persistentHint?C.hint:"");function o(){if(r.value!==document.activeElement){var v;(v=r.value)==null||v.focus()}f.value||(f.value=!0)}function g(v){ue(C["onClick:prepend"],v),A(v)}function A(v){var S;(S=r.value)==null||S.click(),I("click:control",v)}function k(v){v.stopPropagation(),o(),je(()=>{i.value=[],ue(C["onClick:clear"],v)})}return Ne(i,v=>{(!Array.isArray(v)||!v.length)&&r.value&&(r.value.value="")}),ee(()=>{const v=!!(y.counter||C.counter),S=!!(v||y.details),[T,Z]=Ge(u),[{modelValue:R,...F}]=wn(C),[X]=kn(C);return M(Cn,Rt({ref:p,modelValue:i.value,"onUpdate:modelValue":w=>i.value=w,class:"v-file-input","onClick:prepend":g,"onClick:append":C["onClick:append"]},T,F,{focused:f.value,messages:c.value}),{...y,default:w=>{let{id:D,isDisabled:e,isDirty:O,isReadonly:nt,isValid:N}=w;return M(An,Rt({ref:n,"prepend-icon":C.prependIcon,"onClick:control":A,"onClick:clear":k,"onClick:prependInner":C["onClick:prependInner"],"onClick:appendInner":C["onClick:appendInner"]},X,{id:D.value,active:O.value||f.value,dirty:O.value,focused:f.value,error:N.value===!1}),{...y,default:ot=>{var G;let{props:{class:rt,...B}}=ot;return M(ft,null,[M("input",Rt({ref:r,type:"file",readonly:nt.value,disabled:e.value,multiple:C.multiple,name:C.name,onClick:E=>{E.stopPropagation(),o()},onChange:E=>{if(!E.target)return;const tt=E.target;i.value=[...tt.files??[]]},onFocus:o,onBlur:()=>f.value=!1},B,Z),null),M("div",{class:rt},[!!((G=i.value)!=null&&G.length)&&(y.selection?y.selection({fileNames:b.value,totalBytes:l.value,totalBytesReadable:h.value}):C.chips?b.value.map(E=>M(Hr,{key:E,size:"small",color:C.color},{default:()=>[E]})):b.value.join(", "))])])}})},details:S?w=>{var D,e;return M(ft,null,[(D=y.details)==null?void 0:D.call(y,w),v&&M(ft,null,[M("span",null,null),M(xn,{active:!!((e=i.value)!=null&&e.length),value:m.value},y.counter)])])}:void 0})}),we({},p,n,r)}}),Yr={class:"d-flex flex-column"},Xr={class:"d-flex flex-column"},Qr={class:"d-flex flex-column"},ta={class:"d-flex flex-column"},ra=Ot({__name:"LocalGame",props:{config:null},setup(C){const q=C,u=_e(),I=Ve(),y=Jr();y.LoadStorage();const s=new Tn,i=new zn(0,s);s.init(q.config),s.game.start();const a=wt({canUndo:!1,canRedo:!1}),l=wt(s.game.getState()),h=dt(()=>l.value.player[0]);s.server.notify.push(k=>{l.value=k}),s.saveStateChanged=()=>{a.value=s.getState()};function b(){I.back()}document.onkeydown=k=>{var v,S;if(!(k.shiftKey||k.altKey)){if(k.ctrlKey){switch(k.key){case"z":a.value.canUndo&&s.undo();break;case"y":a.value.canRedo&&s.redo();break}return}switch(k.key){case"w":i.autoPost({msg:"$upgrade"});break;case"z":i.autoPost({msg:"$finish"});break;case"c":i.autoPost({msg:(v=i.getPlayer())!=null&&v.locked?"$unlock":"$lock"});break;case"r":i.autoPost({msg:"$refresh"});break;default:{const T=l.value.player[i.pos];if(!T||T.selected.area==="none")break;for(const Z of((S=T[T.selected.area][T.selected.place])==null?void 0:S.actions)||[])if(k.key===Z.acckey){i.post(Z.msg);break}}}}};const m=wt(!1),p=wt(""),n=dt(()=>l.value.config.ActivePack.map(k=>$e[k]).reduce((k,v)=>k.concat(v),[]).map(k=>Ut[k]).map((k,v)=>({card:k,find:k.pinyin.indexOf(p.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({card:k})=>k).slice(0,10)),f=wt(!1),r=wt(""),c=dt(()=>l.value.config.ActiveUnit.map(k=>Me[k]).map((k,v)=>({unit:k,find:k.pinyin.indexOf(r.value),index:v})).filter(({find:k})=>k!==-1).sort((k,v)=>k.find!==v.find?k.find-v.find:k.index-v.index).map(({unit:k})=>k).slice(0,10)),o=wt(!1),g=wt([]);function A(){y.Upload(g.value[0]),o.value=!1}return(k,v)=>(Y(),st(ft,null,[M(jr,{class:"MiddleScale",state:l.value,client:W(i)},{default:it(()=>{var S,T,Z,R;return[Q("div",Yr,[M(mt,{variant:"flat",onClick:v[0]||(v[0]=F=>b())},{default:it(()=>[pt(" 返回 ")]),_:1}),M(mt,{variant:"flat",onClick:v[1]||(v[1]=F=>m.value=!0),disabled:((S=W(h))==null?void 0:S.status)!=="normal"},{default:it(()=>[pt(" 卡牌 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",disabled:((T=W(h))==null?void 0:T.selected.area)!=="present"||((Z=W(h))==null?void 0:Z.status)!=="normal",onClick:v[2]||(v[2]=F=>f.value=!0)},{default:it(()=>[pt(" 单位 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",disabled:((R=W(h))==null?void 0:R.status)!=="normal",onClick:v[3]||(v[3]=F=>W(i).autoPost({msg:"$cheat",type:"resource"}))},{default:it(()=>[pt(" 资源 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",class:"mt-auto",onClick:v[4]||(v[4]=F=>W(u).toggleFullScreen())},{default:it(()=>[pt(at(W(u).isFullScreen?"窗口":"全屏"),1)]),_:1})]),Q("div",Xr,[M(mt,{variant:"flat",disabled:!a.value.canUndo,onClick:v[5]||(v[5]=F=>W(s).undo())},{default:it(()=>[pt(" 撤销 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",disabled:!a.value.canRedo,onClick:v[6]||(v[6]=F=>W(s).redo())},{default:it(()=>[pt(" 重做 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",onClick:v[7]||(v[7]=F=>W(y).SaveStorage(W(s).save))},{default:it(()=>[pt(" 保存 ")]),_:1}),M(mt,{variant:"flat",disabled:!W(y).save,onClick:v[8]||(v[8]=F=>W(y).save?W(s).load(W(y).save):void 0)},{default:it(()=>[pt(" 读取 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",disabled:!W(y).save,onClick:v[9]||(v[9]=F=>W(y).CleanStorage())},{default:it(()=>[pt(" 清除 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",disabled:!W(y).save,onClick:v[10]||(v[10]=F=>W(y).Download())},{default:it(()=>[pt(" 导出 ")]),_:1},8,["disabled"]),M(mt,{variant:"flat",onClick:v[11]||(v[11]=F=>o.value=!0)},{default:it(()=>[pt(" 导入 ")]),_:1})])]}),_:1},8,["state","client"]),M(Zt,{modelValue:m.value,"onUpdate:modelValue":v[14]||(v[14]=S=>m.value=S)},{default:it(()=>[M(zt,null,{default:it(()=>[M(Yt,null,{default:it(()=>[M(fe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:p.value,"onUpdate:modelValue":v[12]||(v[12]=S=>p.value=S),onKeyup:v[13]||(v[13]=ce(S=>W(n).length>0&&W(i).autoPost({msg:"$cheat",type:"card",cardt:W(n)[0].name}),["enter"]))},null,8,["density","modelValue"]),Q("div",Qr,[(Y(!0),st(ft,null,yt(W(n),(S,T)=>(Y(),At(mt,{variant:"flat",class:Ft({enterSelect:T===0}),key:`GCChoice-${T}`,onClick:Z=>W(i).autoPost({msg:"$cheat",type:"card",cardt:S.name})},{default:it(()=>[pt(at(S.pinyin)+" "+at(S.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),M(Zt,{modelValue:f.value,"onUpdate:modelValue":v[17]||(v[17]=S=>f.value=S)},{default:it(()=>[M(zt,null,{default:it(()=>[M(Yt,null,{default:it(()=>[M(fe,{"hide-details":"",density:W(u).isMobile?"compact":"default",modelValue:r.value,"onUpdate:modelValue":v[15]||(v[15]=S=>r.value=S),onKeyup:v[16]||(v[16]=ce(S=>{var T;return W(c).length>0&&W(i).autoPost({msg:"$cheat",type:"unit",units:[W(c)[0].name],place:((T=W(h))==null?void 0:T.selected.place)??0})},["enter"]))},null,8,["density","modelValue"]),Q("div",ta,[(Y(!0),st(ft,null,yt(W(c),(S,T)=>(Y(),At(mt,{variant:"flat",class:Ft({enterSelect:T===0}),key:`GUChoice-${T}`,onClick:Z=>{var R;return W(i).autoPost({msg:"$cheat",type:"unit",units:[S.name],place:((R=W(h))==null?void 0:R.selected.place)??0})}},{default:it(()=>[pt(at(S.pinyin)+" "+at(S.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),M(Zt,{modelValue:o.value,"onUpdate:modelValue":v[20]||(v[20]=S=>o.value=S)},{default:it(()=>[M(zt,null,{default:it(()=>[M(Sn,null,{default:it(()=>[pt(" 导入 ")]),_:1}),M(Yt,null,{default:it(()=>[M(qr,{modelValue:g.value,"onUpdate:modelValue":v[18]||(v[18]=S=>g.value=S),accept:".SCTReplay"},null,8,["modelValue"])]),_:1}),M(In,null,{default:it(()=>[M(En,{color:"primary",disabled:g.value.length!==1,onClick:v[19]||(v[19]=S=>A())},{default:it(()=>[pt(" 确定 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{ra as default};
